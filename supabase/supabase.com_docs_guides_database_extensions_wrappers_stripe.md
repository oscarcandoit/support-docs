---
url: "https://supabase.com/docs/guides/database/extensions/wrappers/stripe"
title: "Stripe | Supabase Docs"
---

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Main menu

[Database](https://supabase.com/docs/guides/database/overview)

[Overview](https://supabase.com/docs/guides/database/overview)

Fundamentals[Connecting to your database](https://supabase.com/docs/guides/database/connecting-to-postgres)
[Importing data](https://supabase.com/docs/guides/database/import-data)
[Securing your data](https://supabase.com/docs/guides/database/secure-data)

Working with your database (basics)[Managing tables, views, and data](https://supabase.com/docs/guides/database/tables)
[Working with arrays](https://supabase.com/docs/guides/database/arrays)
[Managing indexes](https://supabase.com/docs/guides/database/postgres/indexes)
[Querying joins and nested tables](https://supabase.com/docs/guides/database/joins-and-nesting)
[JSON and unstructured data](https://supabase.com/docs/guides/database/json)

Working with your database (intermediate)[Implementing cascade deletes](https://supabase.com/docs/guides/database/postgres/cascade-deletes)
[Managing enums](https://supabase.com/docs/guides/database/postgres/enums)
[Managing database functions](https://supabase.com/docs/guides/database/functions)
[Managing database triggers](https://supabase.com/docs/guides/database/postgres/triggers)
[Managing database webhooks](https://supabase.com/docs/guides/database/webhooks)
[Using Full Text Search](https://supabase.com/docs/guides/database/full-text-search)
[Partitioning your tables](https://supabase.com/docs/guides/database/partitions)
[Managing connections](https://supabase.com/docs/guides/database/connection-management)
[Managing event triggers](https://supabase.com/docs/guides/database/postgres/event-triggers)

OrioleDB[Overview](https://supabase.com/docs/guides/database/orioledb)

Access and security[Row Level Security](https://supabase.com/docs/guides/database/postgres/row-level-security)
[Column Level Security](https://supabase.com/docs/guides/database/postgres/column-level-security)
[Hardening the Data API](https://supabase.com/docs/guides/database/hardening-data-api)
[Custom Claims & RBAC](https://supabase.com/docs/guides/database/postgres/custom-claims-and-role-based-access-control-rbac)
[Managing Postgres Roles](https://supabase.com/docs/guides/database/postgres/roles)
[Using Custom Postgres Roles](https://supabase.com/docs/guides/storage/schema/custom-roles)
[Managing secrets with Vault](https://supabase.com/docs/guides/database/vault)
[Superuser Access and Unsupported Operations](https://supabase.com/docs/guides/database/postgres/roles-superuser)

Configuration, optimization, and testing[Database configuration](https://supabase.com/docs/guides/database/postgres/configuration)
[Query optimization](https://supabase.com/docs/guides/database/query-optimization)
[Database Advisors](https://supabase.com/docs/guides/database/database-advisors)
[Testing your database](https://supabase.com/docs/guides/database/testing)
[Customizing Postgres config](https://supabase.com/docs/guides/database/custom-postgres-config)

Debugging[Timeouts](https://supabase.com/docs/guides/database/postgres/timeouts)
[Debugging and monitoring](https://supabase.com/docs/guides/database/inspect)
[Debugging performance issues](https://supabase.com/docs/guides/database/debugging-performance)
[Supavisor](https://supabase.com/docs/guides/database/supavisor)
[Troubleshooting](https://supabase.com/docs/guides/database/troubleshooting)

ORM Quickstarts

Prisma

[Drizzle](https://supabase.com/docs/guides/database/drizzle)
[Postgres.js](https://supabase.com/docs/guides/database/postgres-js)

GUI quickstarts[pgAdmin](https://supabase.com/docs/guides/database/pgadmin)
[PSQL](https://supabase.com/docs/guides/database/psql)
[DBeaver](https://supabase.com/docs/guides/database/dbeaver)
[Metabase](https://supabase.com/docs/guides/database/metabase)
[Beekeeper Studio](https://supabase.com/docs/guides/database/beekeeper-studio)

Database replication[Overview](https://supabase.com/docs/guides/database/replication)

Replication

Manual replication

Extensions[Overview](https://supabase.com/docs/guides/database/extensions)
[HypoPG: Hypothetical indexes](https://supabase.com/docs/guides/database/extensions/hypopg)
[plv8 (deprecated)](https://supabase.com/docs/guides/database/extensions/plv8)
[http: RESTful Client](https://supabase.com/docs/guides/database/extensions/http)
[index\_advisor: Query optimization](https://supabase.com/docs/guides/database/extensions/index_advisor)
[PGAudit: Postgres Auditing](https://supabase.com/docs/guides/database/extensions/pgaudit)
[pgjwt (deprecated)](https://supabase.com/docs/guides/database/extensions/pgjwt)
[PGroonga: Multilingual Full Text Search](https://supabase.com/docs/guides/database/extensions/pgroonga)
[pgRouting: Geospatial Routing](https://supabase.com/docs/guides/database/extensions/pgrouting)
[pg\_cron: Schedule Recurring Jobs](https://supabase.com/docs/guides/database/extensions/pg_cron)
[pg\_graphql: GraphQL Support](https://supabase.com/docs/guides/database/extensions/pg_graphql)
[pg\_hashids: Short UIDs](https://supabase.com/docs/guides/database/extensions/pg_hashids)
[pg\_jsonschema: JSON Schema Validation](https://supabase.com/docs/guides/database/extensions/pg_jsonschema)
[pg\_net: Async Networking](https://supabase.com/docs/guides/database/extensions/pg_net)
[pg\_plan\_filter: Restrict Total Cost](https://supabase.com/docs/guides/database/extensions/pg_plan_filter)
[postgres\_fdw: query data from an external Postgres server](https://supabase.com/docs/guides/database/extensions/postgres_fdw)
[pgvector: Embeddings and vector similarity](https://supabase.com/docs/guides/database/extensions/pgvector)
[pg\_stat\_statements: SQL Planning and Execution Statistics](https://supabase.com/docs/guides/database/extensions/pg_stat_statements)
[pg\_repack: Storage Optimization](https://supabase.com/docs/guides/database/extensions/pg_repack)
[PostGIS: Geo queries](https://supabase.com/docs/guides/database/extensions/postgis)
[pgmq: Queues](https://supabase.com/docs/guides/database/extensions/pgmq)
[pgsodium (pending deprecation): Encryption Features](https://supabase.com/docs/guides/database/extensions/pgsodium)
[pgTAP: Unit Testing](https://supabase.com/docs/guides/database/extensions/pgtap)
[plpgsql\_check: PL/pgSQL Linter](https://supabase.com/docs/guides/database/extensions/plpgsql_check)
[timescaledb (deprecated)](https://supabase.com/docs/guides/database/extensions/timescaledb)
[uuid-ossp: Unique Identifiers](https://supabase.com/docs/guides/database/extensions/uuid-ossp)
[RUM: inverted index for full-text search](https://supabase.com/docs/guides/database/extensions/rum)

Foreign Data Wrappers[Overview](https://supabase.com/docs/guides/database/extensions/wrappers/overview)
[Connecting to Auth0](https://supabase.com/docs/guides/database/extensions/wrappers/auth0)
[Connecting to Airtable](https://supabase.com/docs/guides/database/extensions/wrappers/airtable)
[Connecting to AWS Cognito](https://supabase.com/docs/guides/database/extensions/wrappers/cognito)
[Connecting to AWS S3](https://supabase.com/docs/guides/database/extensions/wrappers/s3)
[Connecting to AWS S3 Vectors](https://supabase.com/docs/guides/database/extensions/wrappers/s3_vectors)
[Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery)
[Connecting to Clerk](https://supabase.com/docs/guides/database/extensions/wrappers/clerk)
[Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse)
[Connecting to DuckDB](https://supabase.com/docs/guides/database/extensions/wrappers/duckdb)
[Connecting to Firebase](https://supabase.com/docs/guides/database/extensions/wrappers/firebase)
[Connecting to Iceberg](https://supabase.com/docs/guides/database/extensions/wrappers/iceberg)
[Connecting to Logflare](https://supabase.com/docs/guides/database/extensions/wrappers/logflare)
[Connecting to MSSQL](https://supabase.com/docs/guides/database/extensions/wrappers/mssql)
[Connecting to Notion](https://supabase.com/docs/guides/database/extensions/wrappers/notion)
[Connecting to Paddle](https://supabase.com/docs/guides/database/extensions/wrappers/paddle)
[Connecting to Redis](https://supabase.com/docs/guides/database/extensions/wrappers/redis)
[Connecting to Snowflake](https://supabase.com/docs/guides/database/extensions/wrappers/snowflake)
[Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe)

Examples[Drop All Tables in Schema](https://supabase.com/docs/guides/database/postgres/dropping-all-tables-in-schema)
[Select First Row per Group](https://supabase.com/docs/guides/database/postgres/first-row-in-group)
[Print PostgreSQL Version](https://supabase.com/docs/guides/database/postgres/which-version-of-postgres)
[Replicating from Supabase to External Postgres](https://supabase.com/docs/guides/database/postgres/setup-replication-external)

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Database

1. [Database](https://supabase.com/docs/guides/database/overview)
3. Foreign Data Wrappers
5. [Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe)

# Stripe

* * *

You can enable the Stripe wrapper right from the Supabase dashboard.

[Open wrapper in dashboard](https://supabase.com/dashboard/project/_/integrations/stripe_wrapper/overview)

[Stripe](https://stripe.com/) is an API driven online payment processing utility.

The Stripe Wrapper allows you to read data from Stripe within your Postgres database.

## Preparation [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#preparation)

Before you can query Stripe, you need to enable the Wrappers extension and store your credentials in Postgres.

### Enable Wrappers [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#enable-wrappers)

Make sure the `wrappers` extension is installed on your database:

```
1

create extension if not exists wrappers with schema extensions;
```

### Enable the Stripe Wrapper [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#enable-the-stripe-wrapper)

Enable the `stripe_wrapper` FDW:

```
1
2
3

create foreign data wrapper stripe_wrapper  handler stripe_fdw_handler  validator stripe_fdw_validator;
```

### Store your credentials (optional) [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#store-your-credentials-optional)

By default, Postgres stores FDW credentials inside `pg_catalog.pg_foreign_server` in plain text. Anyone with access to this table will be able to view these credentials. Wrappers is designed to work with [Vault](https://supabase.com/docs/guides/database/vault), which provides an additional level of security for storing credentials. We recommend using Vault to store your credentials.

```
1
2
3
4
5
6

-- Save your Stripe API key in Vault and retrieve the created `key_id`select vault.create_secret(  '<Stripe API key>',  'stripe',  'Stripe API key for Wrappers');
```

### Connecting to Stripe [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#connecting-to-stripe)

We need to provide Postgres with the credentials to connect to Stripe, and any additional options. We can do this using the `create server` command:

With VaultWithout Vault

```
1
2
3
4
5
6
7
8

create server stripe_server  foreign data wrapper stripe_wrapper  options (    api_key_id '<key_ID>', -- The Key ID from above, required if api_key_name is not specified.    api_key_name '<key_Name>', -- The Key Name from above, required if api_key_id is not specified.    api_url 'https://api.stripe.com/v1/',  -- Stripe API base URL, optional. Default is 'https://api.stripe.com/v1/'    api_version '2024-06-20'  -- Stripe API version, optional. Default is your Stripe account’s default API version.  );
```

### Create a schema [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#create-a-schema)

We recommend creating a schema to hold all the foreign tables:

```
1

create schema if not exists stripe;
```

## Entities [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#entities)

The Stripe Wrapper supports data read and modify from Stripe API.

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Accounts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#accounts) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Balance](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#balance) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Balance Transactions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#balance-transactions) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Charges](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#charges) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Checkout Sessions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#checkout-sessions) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Customers](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#customers) | ✅ | ✅ | ✅ | ✅ | ❌ |
| [Disputes](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#disputes) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Events](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#events) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Files](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#files) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [File Links](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#file-links) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Invoices](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#invoices) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Mandates](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#mandates) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Meters](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#meters) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [PaymentIntents](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#payment-intents) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Payouts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#payouts) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Prices](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#prices) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Products](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#products) | ✅ | ✅ | ✅ | ✅ | ❌ |
| [Refunds](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#refunds) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [SetupAttempts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#setupattempts) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [SetupIntents](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#setupintents) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Subscriptions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#subscriptions) | ✅ | ✅ | ✅ | ✅ | ❌ |
| [Tokens](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#tokens) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Topups](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#top-ups) | ✅ | ❌ | ❌ | ❌ | ❌ |
| [Transfers](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#transfers) | ✅ | ❌ | ❌ | ❌ | ❌ |

We can use SQL [import foreign schema](https://www.postgresql.org/docs/current/sql-importforeignschema.html) to import foreign table definitions from Stripe.

For example, using below SQL can automatically create foreign tables in the `stripe` schema.

```
1
2
3
4
5
6
7
8
9
10
11
12

-- create all the foreign tablesimport foreign schema stripe from server stripe_server into stripe;-- or, create "checkout_sessions", "customers" and "balance" tables onlyimport foreign schema stripe   limit to ("checkout_sessions", "customers", "balance")   from server stripe_server into stripe;-- or, create all foreign tables except "checkout_sessions" and "billing_meters"import foreign schema stripe   except ("checkout_sessions", "billing_meters")   from server stripe_server into stripe;
```

The full list of the foreign tables is below:

### Accounts [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#accounts)

This is an object representing a Stripe account.

Ref: [Stripe docs](https://stripe.com/docs/api/accounts/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Accounts](https://stripe.com/docs/api/accounts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.accounts (  id text,  business_type text,  country text,  email text,  type text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'accounts'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes)

- While any column is allowed in a where clause, it is most efficient to filter by `id`
- Use the `attrs` jsonb column to access additional account details

### Balance [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#balance)

This is an object representing your Stripe account's current balance.

Ref: [Stripe docs](https://stripe.com/docs/api/balance)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-1)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Balance](https://stripe.com/docs/api/balance) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-1)

```
1
2
3
4
5
6
7
8
9
10

create foreign table stripe.balance (  balance_type text,  amount bigint,  currency text,  attrs jsonb)  server stripe_server  options (    object 'balance'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-1)

- Balance is a read-only object that shows the current funds in your Stripe account
- The balance is broken down by source types (e.g., card, bank account) and currencies
- Use the `attrs` jsonb column to access additional balance details like pending amounts
- While any column is allowed in a where clause, filtering options are limited as this is a singleton object

### Balance Transactions [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#balance-transactions)

This is an object representing funds moving through your Stripe account. Balance transactions are created for every type of transaction that comes into or flows out of your Stripe account balance.

Ref: [Stripe docs](https://stripe.com/docs/api/balance_transactions/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-2)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Balance Transactions](https://stripe.com/docs/api/balance_transactions/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-2)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

create foreign table stripe.balance_transactions (  id text,  amount bigint,  currency text,  description text,  fee bigint,  net bigint,  status text,  type text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'balance_transactions'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-2)

- Balance transactions are read-only records of all funds movement in your Stripe account
- Each transaction includes amount, currency, fees, and net amount information
- Use the `attrs` jsonb column to access additional transaction details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - type

### Charges [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#charges)

This is an object representing a charge on a credit or debit card. You can retrieve and refund individual charges as well as list all charges. Charges are identified by a unique, random ID.

Ref: [Stripe docs](https://stripe.com/docs/api/charges/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-3)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Charges](https://stripe.com/docs/api/charges/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-3)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

create foreign table stripe.charges (  id text,  amount bigint,  currency text,  customer text,  description text,  invoice text,  payment_intent text,  status text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'charges'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-3)

- Charges are read-only records of payment transactions in your Stripe account
- Each charge includes amount, currency, customer, and payment status information
- Use the `attrs` jsonb column to access additional charge details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer

### Checkout Sessions [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#checkout-sessions)

This is an object representing your customer's session as they pay for one-time purchases or subscriptions through Checkout or Payment Links. We recommend creating a new Session each time your customer attempts to pay.

Ref: [Stripe docs](https://stripe.com/docs/api/checkout/sessions/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-4)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Checkout Sessions](https://stripe.com/docs/api/checkout/sessions/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-4)

```
1
2
3
4
5
6
7
8
9
10
11
12

create foreign table stripe.checkout_sessions (  id text,  customer text,  payment_intent text,  subscription text,  attrs jsonb)  server stripe_server  options (    object 'checkout/sessions',    rowid_column 'id'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-4)

- Checkout Sessions are read-only records of customer payment sessions in your Stripe account
- Each session includes customer, payment intent, and subscription information
- Use the `attrs` jsonb column to access additional session details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer
  - payment\_intent
  - subscription

### Customers [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#customers)

This is an object representing your Stripe customers. You can create, retrieve, update, and delete customers.

Ref: [Stripe docs](https://stripe.com/docs/api/customers/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-5)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Customers](https://stripe.com/docs/api/customers/list) | ✅ | ✅ | ✅ | ✅ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-5)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.customers (  id text,  email text,  name text,  description text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'customers',    rowid_column 'id'  );
```

Example operations:

```
1
2
3
4
5
6
7
8
9
10
11
12

-- create a new customerinsert into stripe.customers(email, name, description)values ('jane@example.com', 'Jane Smith', 'Premium customer');-- update a customerupdate stripe.customersset name = 'Jane Doe'where email = 'jane@example.com';-- delete a customerdelete from stripe.customerswhere id = 'cus_xxx';
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-5)

- Customers can be created, retrieved, updated, and deleted through SQL operations
- Each customer can have an email, name, and description
- Use the `attrs` jsonb column to access additional customer details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - email

### Disputes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#disputes)

This is an object representing a dispute that occurs when a customer questions your charge with their card issuer.

Ref: [Stripe docs](https://stripe.com/docs/api/disputes/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-6)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Disputes](https://stripe.com/docs/api/disputes/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-6)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.disputes (  id text,  amount bigint,  currency text,  charge text,  payment_intent text,  reason text,  status text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'disputes'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-6)

- Disputes are read-only records of customer payment disputes in your Stripe account
- Each dispute includes amount, currency, charge, and payment intent information
- Use the `attrs` jsonb column to access additional dispute details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - charge
  - payment\_intent

### Events [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#events)

This is an object representing events that occur in your Stripe account, letting you know when something interesting happens.

Ref: [Stripe docs](https://stripe.com/docs/api/events/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-7)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Events](https://stripe.com/docs/api/events/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-7)

```
1
2
3
4
5
6
7
8
9
10
11

create foreign table stripe.events (  id text,  type text,  api_version text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'events'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-7)

- Events are read-only records of activities in your Stripe account
- Each event includes type, API version, and timestamp information
- Use the `attrs` jsonb column to access additional event details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - type

### Files [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#files)

This is an object representing a file hosted on Stripe's servers.

Ref: [Stripe docs](https://stripe.com/docs/api/files/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-8)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Files](https://stripe.com/docs/api/files/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-8)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

create foreign table stripe.files (  id text,  filename text,  purpose text,  title text,  size bigint,  type text,  url text,  created timestamp,  expires_at timestamp,  attrs jsonb)  server stripe_server  options (    object 'files'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-8)

- Files are read-only records of files hosted on Stripe's servers
- Each file includes filename, purpose, size, type, and URL information
- Files may have an expiration date specified in expires\_at
- Use the `attrs` jsonb column to access additional file details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - purpose

### File Links [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#file-links)

This is an object representing a link that can be used to share the contents of a `File` object with non-Stripe users.

Ref: [Stripe docs](https://stripe.com/docs/api/file_links/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-9)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [File Links](https://stripe.com/docs/api/file_links/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-9)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.file_links (  id text,  file text,  url text,  created timestamp,  expired bool,  expires_at timestamp,  attrs jsonb)  server stripe_server  options (    object 'file_links'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-9)

- File Links are read-only records that provide shareable access to Stripe files
- Each link includes a reference to the file and a public URL
- Links can be configured to expire at a specific time
- Use the `expired` boolean to check if a link has expired
- Use the `attrs` jsonb column to access additional link details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - file

### Invoices [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#invoices)

This is an object representing statements of amounts owed by a customer, which are either generated one-off or periodically from a subscription.

Ref: [Stripe docs](https://stripe.com/docs/api/invoices/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-10)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Invoices](https://stripe.com/docs/api/invoices/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-10)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.invoices (  id text,  customer text,  subscription text,  status text,  total bigint,  currency text,  period_start timestamp,  period_end timestamp,  attrs jsonb)  server stripe_server  options (    object 'invoices'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-10)

- Invoices are read-only records of amounts owed by customers
- Each invoice includes customer, subscription, status, and amount information
- Invoices track billing periods with period\_start and period\_end timestamps
- Use the `attrs` jsonb column to access additional invoice details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer
  - status
  - subscription

### Mandates [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#mandates)

This is an object representing a record of the permission a customer has given you to debit their payment method.

Ref: [Stripe docs](https://stripe.com/docs/api/mandates)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-11)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Mandates](https://stripe.com/docs/api/mandates) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-11)

```
1
2
3
4
5
6
7
8
9
10
11

create foreign table stripe.mandates (  id text,  payment_method text,  status text,  type text,  attrs jsonb)  server stripe_server  options (    object 'mandates'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-11)

- Mandates are read-only records of customer payment permissions
- Each mandate includes payment method, status, and type information
- Use the `attrs` jsonb column to access additional mandate details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id

### Meters [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#meters)

This is an object representing a billing meter that allows you to track usage of a particular event.

Ref: [Stripe docs](https://docs.stripe.com/api/billing/meter)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-12)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Meters](https://docs.stripe.com/api/billing/meter) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-12)

```
1
2
3
4
5
6
7
8
9
10
11
12

create foreign table stripe.billing_meter (  id text,  display_name text,  event_name text,  event_time_window text,  status text,  attrs jsonb)  server stripe_server  options (    object 'billing/meters'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-12)

- Meters are read-only records for tracking event usage in billing
- Each meter includes display name, event name, and time window information
- The status field indicates whether the meter is active
- Use the `attrs` jsonb column to access additional meter details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id

### Payment Intents [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#payment-intents)

This is an object representing a guide through the process of collecting a payment from your customer.

Ref: [Stripe docs](https://stripe.com/docs/api/payment_intents/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-13)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Payment Intents](https://stripe.com/docs/api/payment_intents/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-13)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.payment_intents (  id text,  customer text,  amount bigint,  currency text,  payment_method text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'payment_intents'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-13)

- Payment Intents are read-only records that guide the payment collection process
- Each intent includes customer, amount, currency, and payment method information
- The created timestamp tracks when the payment intent was initiated
- Use the `attrs` jsonb column to access additional payment intent details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer

### Payouts [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#payouts)

This is an object representing funds received from Stripe or initiated payouts to a bank account or debit card of a connected Stripe account.

Ref: [Stripe docs](https://stripe.com/docs/api/payouts/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-14)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Payouts](https://stripe.com/docs/api/payouts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-14)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.payouts (  id text,  amount bigint,  currency text,  arrival_date timestamp,  description text,  statement_descriptor text,  status text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'payouts'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-14)

- Payouts are read-only records of fund transfers
- Each payout includes amount, currency, and status information
- The arrival\_date indicates when funds will be available
- The statement\_descriptor appears on your bank statement
- Use the `attrs` jsonb column to access additional payout details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - status

### Prices [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#prices)

This is an object representing pricing configurations for products to facilitate multiple currencies and pricing options.

Ref: [Stripe docs](https://stripe.com/docs/api/prices/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-15)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Prices](https://stripe.com/docs/api/prices/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-15)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14

create foreign table stripe.prices (  id text,  active bool,  currency text,  product text,  unit_amount bigint,  type text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'prices'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-15)

- Prices are read-only records that define product pricing configurations
- Each price includes currency, unit amount, and product reference
- The active boolean indicates if the price can be used
- The type field specifies the pricing model (e.g., one-time, recurring)
- Use the `attrs` jsonb column to access additional price details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - active

### Products [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#products)

This is an object representing all products available in Stripe.

Ref: [Stripe docs](https://stripe.com/docs/api/products/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-16)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Products](https://stripe.com/docs/api/products/list) | ✅ | ✅ | ✅ | ✅ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-16)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.products (  id text,  name text,  active bool,  default_price text,  description text,  created timestamp,  updated timestamp,  attrs jsonb)  server stripe_server  options (    object 'products',    rowid_column 'id'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-16)

- Products can be created, read, updated, and deleted
- Each product includes name, description, and active status
- The default\_price links to the product's default Price object
- The updated timestamp tracks the last modification time
- Use the `attrs` jsonb column to access additional product details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - active

### Refunds [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#refunds)

This is an object representing refunds for charges that have previously been created but not yet refunded.

Ref: [Stripe docs](https://stripe.com/docs/api/refunds/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-17)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Refunds](https://stripe.com/docs/api/refunds/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-17)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.refunds (  id text,  amount bigint,  currency text,  charge text,  payment_intent text,  reason text,  status text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'refunds'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-17)

- Refunds are read-only records of charge reversals
- Each refund includes amount, currency, and status information
- The charge and payment\_intent fields link to the original transaction
- The reason field provides context for the refund
- Use the `attrs` jsonb column to access additional refund details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - charge
  - payment\_intent

### SetupAttempts [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#setupattempts)

This is an object representing attempted confirmations of SetupIntents, tracking both successful and unsuccessful attempts.

Ref: [Stripe docs](https://stripe.com/docs/api/setup_attempts/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-18)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [SetupAttempts](https://stripe.com/docs/api/setup_attempts/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-18)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

create foreign table stripe.setup_attempts (  id text,  application text,  customer text,  on_behalf_of text,  payment_method text,  setup_intent text,  status text,  usage text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'setup_attempts'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-18)

- SetupAttempts are read-only records of payment setup confirmation attempts
- Each attempt includes customer, payment method, and status information
- The setup\_intent field links to the associated SetupIntent
- The usage field indicates the intended payment method usage
- Use the `attrs` jsonb column to access additional attempt details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - setup\_intent

### SetupIntents [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#setupintents)

This is an object representing a guide through the process of setting up and saving customer payment credentials for future payments.

Ref: [Stripe docs](https://stripe.com/docs/api/setup_intents/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-19)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [SetupIntents](https://stripe.com/docs/api/setup_intents/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-19)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15

create foreign table stripe.setup_intents (  id text,  client_secret text,  customer text,  description text,  payment_method text,  status text,  usage text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'setup_intents'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-19)

- SetupIntents are read-only records for saving customer payment credentials
- Each intent includes customer, payment method, and status information
- The client\_secret is used for client-side confirmation
- The usage field indicates how the payment method will be used
- Use the `attrs` jsonb column to access additional intent details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer
  - payment\_method

### Subscriptions [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#subscriptions)

This is an object representing customer recurring payment schedules.

Ref: [Stripe docs](https://stripe.com/docs/api/subscriptions/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-20)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Subscriptions](https://stripe.com/docs/api/subscriptions/list) | ✅ | ✅ | ✅ | ✅ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-20)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.subscriptions (  id text,  customer text,  currency text,  current_period_start timestamp,  current_period_end timestamp,  attrs jsonb)  server stripe_server  options (    object 'subscriptions',    rowid_column 'id'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-20)

- Subscriptions can be created, read, updated, and deleted
- Each subscription includes customer and currency information
- The current\_period\_start and current\_period\_end track billing cycles
- The rowid\_column option enables modification operations
- Use the `attrs` jsonb column to access additional subscription details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - customer
  - price
  - status

### Tokens [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#tokens)

This is an object representing a secure way to collect sensitive card, bank account, or personally identifiable information (PII) from customers.

Ref: [Stripe docs](https://stripe.com/docs/api/tokens)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-21)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Tokens](https://stripe.com/docs/api/tokens) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-21)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.tokens (  id text,  type text,  client_ip text,  created timestamp,  livemode boolean,  used boolean,  attrs jsonb)  server stripe_server  options (    object 'tokens'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-21)

- Tokens are read-only, single-use objects for secure data collection
- Each token includes type information (card, bank\_account, pii, etc.)
- The client\_ip field records where the token was created
- The used field indicates if the token has been used
- Use the `attrs` jsonb column to access token details like card or bank information
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - type
  - used

### Top-ups [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#top-ups)

This is an object representing a way to add funds to your Stripe balance.

Ref: [Stripe docs](https://stripe.com/docs/api/topups/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-22)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Top-ups](https://stripe.com/docs/api/topups/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-22)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.topups (  id text,  amount bigint,  currency text,  description text,  status text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'topups'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-22)

- Top-ups are read-only records of balance additions
- Each top-up includes amount and currency information
- The status field tracks the top-up state (e.g., succeeded, failed)
- Use the `attrs` jsonb column to access additional top-up details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - status

### Transfers [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#transfers)

This is an object representing fund movements between Stripe accounts as part of Connect.

Ref: [Stripe docs](https://stripe.com/docs/api/transfers/list)

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#operations-23)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| [Transfers](https://stripe.com/docs/api/transfers/list) | ✅ | ❌ | ❌ | ❌ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#usage-23)

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table stripe.transfers (  id text,  amount bigint,  currency text,  description text,  destination text,  created timestamp,  attrs jsonb)  server stripe_server  options (    object 'transfers'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#notes-23)

- Transfers are read-only records of fund movements between accounts
- Each transfer includes amount, currency, and destination information
- The destination field identifies the receiving Stripe account
- Use the `attrs` jsonb column to access additional transfer details
- While any column is allowed in a where clause, it is most efficient to filter by:
  - id
  - destination

## Query Pushdown Support [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#query-pushdown-support)

This FDW supports `where` clause pushdown. You can specify a filter in `where` clause and it will be passed to Stripe API call.

For example, this query

```
1

select * from stripe.customers where id = 'cus_xxx';
```

will be translated to a Stripe API call: `https://api.stripe.com/v1/customers/cus_xxx`.

For supported filter columns for each object, please check out foreign table documents above.

## Limitations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#limitations)

This section describes important limitations and considerations when using this FDW:

- Large result sets may experience slower performance due to full data transfer requirement
- Webhook events and real-time updates are not supported
- API version mismatches can cause unexpected data format issues
- Materialized views using these foreign tables may fail during logical backups

## Examples [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#examples)

Some examples on how to use Stripe foreign tables.

### Basic example [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#basic-example)

```
1
2
3
4

-- always limit records to reduce API calls to Stripeselect * from stripe.customers limit 10;select * from stripe.invoices limit 10;select * from stripe.subscriptions limit 10;
```

### Query JSON attributes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#query-json-attributes)

```
1
2
3
4
5
6
7
8
9
10
11

-- extract account name for an invoiceselect id, attrs->>'account_name' as account_namefrom stripe.invoices where id = 'in_xxx';-- extract invoice line items for an invoiceselect id, attrs#>'{lines,data}' as line_itemsfrom stripe.invoices where id = 'in_xxx';-- extract subscription items for a subscriptionselect id, attrs#>'{items,data}' as itemsfrom stripe.subscriptions where id = 'sub_xxx';
```

### Data modify [\#](https://supabase.com/docs/guides/database/extensions/wrappers/stripe\#data-modify)

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16

-- insertinsert into stripe.customers(email,name,description)values ('test@test.com', 'test name', null);-- updateupdate stripe.customersset description='hello fdw'where id = 'cus_xxx';update stripe.customersset attrs='{"metadata[foo]": "bar"}'where id = 'cus_xxx';-- deletedelete from stripe.customerswhere id = 'cus_xxx';
```

To insert into an object with sub-fields, we need to create the foreign table with column name exactly same as the API required. For example, to insert a `subscription` object we can define the foreign table following [the Stripe API docs](https://docs.stripe.com/api/subscriptions/create):

```
1
2
3
4
5
6
7
8
9
10
11
12

-- create the subscription table for data insertion, the 'customer'-- and 'items[0][price]' fields are required.create foreign table stripe.subscriptions (  id text,  customer text,  "items[0][price]" text  -- column name will be used in API Post request)  server stripe_server  options (    object 'subscriptions',    rowid_column 'id'  );
```

And then we can insert a subscription like below:

```
1
2

insert into stripe.subscriptions(customer, "items[0][price]")values ('cus_Na6dX7aXxi11N4', 'price_1MowQULkdIwHu7ixraBm864M');
```

Note this foreign table is only for data insertion, it cannot be used in `select` statement.

[Edit this page on GitHub](https://github.com/supabase/wrappers/blob/docs_v0.5.6/docs/catalog/stripe.md)

### Is this helpful?

NoYes

### On this page

[Preparation](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#preparation) [Enable Wrappers](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#enable-wrappers) [Enable the Stripe Wrapper](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#enable-the-stripe-wrapper) [Store your credentials (optional)](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#store-your-credentials-optional) [Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#connecting-to-stripe) [Create a schema](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#create-a-schema) [Entities](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#entities) [Accounts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#accounts) [Balance](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#balance) [Balance Transactions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#balance-transactions) [Charges](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#charges) [Checkout Sessions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#checkout-sessions) [Customers](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#customers) [Disputes](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#disputes) [Events](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#events) [Files](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#files) [File Links](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#file-links) [Invoices](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#invoices) [Mandates](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#mandates) [Meters](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#meters) [Payment Intents](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#payment-intents) [Payouts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#payouts) [Prices](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#prices) [Products](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#products) [Refunds](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#refunds) [SetupAttempts](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#setupattempts) [SetupIntents](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#setupintents) [Subscriptions](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#subscriptions) [Tokens](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#tokens) [Top-ups](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#top-ups) [Transfers](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#transfers) [Query Pushdown Support](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#query-pushdown-support) [Limitations](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#limitations) [Examples](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#examples) [Basic example](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#basic-example) [Query JSON attributes](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#query-json-attributes) [Data modify](https://supabase.com/docs/guides/database/extensions/wrappers/stripe#data-modify)

- Need some help?
[Contact support](https://supabase.com/support)
- Latest product updates?
[See Changelog](https://supabase.com/changelog)
- Something's not right?
[Check system status](https://status.supabase.com/)

* * *

[© Supabase Inc](https://supabase.com/)— [Contributing](https://github.com/supabase/supabase/blob/master/apps/docs/DEVELOPERS.md) [Author Styleguide](https://github.com/supabase/supabase/blob/master/apps/docs/CONTRIBUTING.md) [Open Source](https://supabase.com/open-source) [SupaSquad](https://supabase.com/supasquad) Privacy Settings

[Twitter](https://twitter.com/supabase) [GitHub](https://github.com/supabase) [Discord](https://discord.supabase.com/) [Youtube](https://youtube.com/c/supabase)