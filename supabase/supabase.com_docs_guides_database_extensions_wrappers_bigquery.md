---
url: "https://supabase.com/docs/guides/database/extensions/wrappers/bigquery"
title: "BigQuery | Supabase Docs"
---

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Main menu

[Database](https://supabase.com/docs/guides/database/overview)

[Overview](https://supabase.com/docs/guides/database/overview)

Fundamentals[Connecting to your database](https://supabase.com/docs/guides/database/connecting-to-postgres)
[Importing data](https://supabase.com/docs/guides/database/import-data)
[Securing your data](https://supabase.com/docs/guides/database/secure-data)

Working with your database (basics)[Managing tables, views, and data](https://supabase.com/docs/guides/database/tables)
[Working with arrays](https://supabase.com/docs/guides/database/arrays)
[Managing indexes](https://supabase.com/docs/guides/database/postgres/indexes)
[Querying joins and nested tables](https://supabase.com/docs/guides/database/joins-and-nesting)
[JSON and unstructured data](https://supabase.com/docs/guides/database/json)

Working with your database (intermediate)[Implementing cascade deletes](https://supabase.com/docs/guides/database/postgres/cascade-deletes)
[Managing enums](https://supabase.com/docs/guides/database/postgres/enums)
[Managing database functions](https://supabase.com/docs/guides/database/functions)
[Managing database triggers](https://supabase.com/docs/guides/database/postgres/triggers)
[Managing database webhooks](https://supabase.com/docs/guides/database/webhooks)
[Using Full Text Search](https://supabase.com/docs/guides/database/full-text-search)
[Partitioning your tables](https://supabase.com/docs/guides/database/partitions)
[Managing connections](https://supabase.com/docs/guides/database/connection-management)
[Managing event triggers](https://supabase.com/docs/guides/database/postgres/event-triggers)

OrioleDB[Overview](https://supabase.com/docs/guides/database/orioledb)

Access and security[Row Level Security](https://supabase.com/docs/guides/database/postgres/row-level-security)
[Column Level Security](https://supabase.com/docs/guides/database/postgres/column-level-security)
[Hardening the Data API](https://supabase.com/docs/guides/database/hardening-data-api)
[Custom Claims & RBAC](https://supabase.com/docs/guides/database/postgres/custom-claims-and-role-based-access-control-rbac)
[Managing Postgres Roles](https://supabase.com/docs/guides/database/postgres/roles)
[Using Custom Postgres Roles](https://supabase.com/docs/guides/storage/schema/custom-roles)
[Managing secrets with Vault](https://supabase.com/docs/guides/database/vault)
[Superuser Access and Unsupported Operations](https://supabase.com/docs/guides/database/postgres/roles-superuser)

Configuration, optimization, and testing[Database configuration](https://supabase.com/docs/guides/database/postgres/configuration)
[Query optimization](https://supabase.com/docs/guides/database/query-optimization)
[Database Advisors](https://supabase.com/docs/guides/database/database-advisors)
[Testing your database](https://supabase.com/docs/guides/database/testing)
[Customizing Postgres config](https://supabase.com/docs/guides/database/custom-postgres-config)

Debugging[Timeouts](https://supabase.com/docs/guides/database/postgres/timeouts)
[Debugging and monitoring](https://supabase.com/docs/guides/database/inspect)
[Debugging performance issues](https://supabase.com/docs/guides/database/debugging-performance)
[Supavisor](https://supabase.com/docs/guides/database/supavisor)
[Troubleshooting](https://supabase.com/docs/guides/database/troubleshooting)

ORM Quickstarts

Prisma

[Drizzle](https://supabase.com/docs/guides/database/drizzle)
[Postgres.js](https://supabase.com/docs/guides/database/postgres-js)

GUI quickstarts[pgAdmin](https://supabase.com/docs/guides/database/pgadmin)
[PSQL](https://supabase.com/docs/guides/database/psql)
[DBeaver](https://supabase.com/docs/guides/database/dbeaver)
[Metabase](https://supabase.com/docs/guides/database/metabase)
[Beekeeper Studio](https://supabase.com/docs/guides/database/beekeeper-studio)

Database replication[Overview](https://supabase.com/docs/guides/database/replication)

Replication

Manual replication

Extensions[Overview](https://supabase.com/docs/guides/database/extensions)
[HypoPG: Hypothetical indexes](https://supabase.com/docs/guides/database/extensions/hypopg)
[plv8 (deprecated)](https://supabase.com/docs/guides/database/extensions/plv8)
[http: RESTful Client](https://supabase.com/docs/guides/database/extensions/http)
[index\_advisor: Query optimization](https://supabase.com/docs/guides/database/extensions/index_advisor)
[PGAudit: Postgres Auditing](https://supabase.com/docs/guides/database/extensions/pgaudit)
[pgjwt (deprecated)](https://supabase.com/docs/guides/database/extensions/pgjwt)
[PGroonga: Multilingual Full Text Search](https://supabase.com/docs/guides/database/extensions/pgroonga)
[pgRouting: Geospatial Routing](https://supabase.com/docs/guides/database/extensions/pgrouting)
[pg\_cron: Schedule Recurring Jobs](https://supabase.com/docs/guides/database/extensions/pg_cron)
[pg\_graphql: GraphQL Support](https://supabase.com/docs/guides/database/extensions/pg_graphql)
[pg\_hashids: Short UIDs](https://supabase.com/docs/guides/database/extensions/pg_hashids)
[pg\_jsonschema: JSON Schema Validation](https://supabase.com/docs/guides/database/extensions/pg_jsonschema)
[pg\_net: Async Networking](https://supabase.com/docs/guides/database/extensions/pg_net)
[pg\_plan\_filter: Restrict Total Cost](https://supabase.com/docs/guides/database/extensions/pg_plan_filter)
[postgres\_fdw: query data from an external Postgres server](https://supabase.com/docs/guides/database/extensions/postgres_fdw)
[pgvector: Embeddings and vector similarity](https://supabase.com/docs/guides/database/extensions/pgvector)
[pg\_stat\_statements: SQL Planning and Execution Statistics](https://supabase.com/docs/guides/database/extensions/pg_stat_statements)
[pg\_repack: Storage Optimization](https://supabase.com/docs/guides/database/extensions/pg_repack)
[PostGIS: Geo queries](https://supabase.com/docs/guides/database/extensions/postgis)
[pgmq: Queues](https://supabase.com/docs/guides/database/extensions/pgmq)
[pgsodium (pending deprecation): Encryption Features](https://supabase.com/docs/guides/database/extensions/pgsodium)
[pgTAP: Unit Testing](https://supabase.com/docs/guides/database/extensions/pgtap)
[plpgsql\_check: PL/pgSQL Linter](https://supabase.com/docs/guides/database/extensions/plpgsql_check)
[timescaledb (deprecated)](https://supabase.com/docs/guides/database/extensions/timescaledb)
[uuid-ossp: Unique Identifiers](https://supabase.com/docs/guides/database/extensions/uuid-ossp)
[RUM: inverted index for full-text search](https://supabase.com/docs/guides/database/extensions/rum)

Foreign Data Wrappers[Overview](https://supabase.com/docs/guides/database/extensions/wrappers/overview)
[Connecting to Auth0](https://supabase.com/docs/guides/database/extensions/wrappers/auth0)
[Connecting to Airtable](https://supabase.com/docs/guides/database/extensions/wrappers/airtable)
[Connecting to AWS Cognito](https://supabase.com/docs/guides/database/extensions/wrappers/cognito)
[Connecting to AWS S3](https://supabase.com/docs/guides/database/extensions/wrappers/s3)
[Connecting to AWS S3 Vectors](https://supabase.com/docs/guides/database/extensions/wrappers/s3_vectors)
[Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery)
[Connecting to Clerk](https://supabase.com/docs/guides/database/extensions/wrappers/clerk)
[Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse)
[Connecting to DuckDB](https://supabase.com/docs/guides/database/extensions/wrappers/duckdb)
[Connecting to Firebase](https://supabase.com/docs/guides/database/extensions/wrappers/firebase)
[Connecting to Iceberg](https://supabase.com/docs/guides/database/extensions/wrappers/iceberg)
[Connecting to Logflare](https://supabase.com/docs/guides/database/extensions/wrappers/logflare)
[Connecting to MSSQL](https://supabase.com/docs/guides/database/extensions/wrappers/mssql)
[Connecting to Notion](https://supabase.com/docs/guides/database/extensions/wrappers/notion)
[Connecting to Paddle](https://supabase.com/docs/guides/database/extensions/wrappers/paddle)
[Connecting to Redis](https://supabase.com/docs/guides/database/extensions/wrappers/redis)
[Connecting to Snowflake](https://supabase.com/docs/guides/database/extensions/wrappers/snowflake)
[Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe)

Examples[Drop All Tables in Schema](https://supabase.com/docs/guides/database/postgres/dropping-all-tables-in-schema)
[Select First Row per Group](https://supabase.com/docs/guides/database/postgres/first-row-in-group)
[Print PostgreSQL Version](https://supabase.com/docs/guides/database/postgres/which-version-of-postgres)
[Replicating from Supabase to External Postgres](https://supabase.com/docs/guides/database/postgres/setup-replication-external)

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Database

1. [Database](https://supabase.com/docs/guides/database/overview)
3. Foreign Data Wrappers
5. [Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery)

# BigQuery

* * *

You can enable the BigQuery wrapper right from the Supabase dashboard.

[Open wrapper in dashboard](https://supabase.com/dashboard/project/_/integrations/bigquery_wrapper/overview)

[BigQuery](https://cloud.google.com/bigquery) is a completely serverless and cost-effective enterprise data warehouse that works across clouds and scales with your data, with BI, machine learning and AI built in.

The BigQuery Wrapper allows you to read and write data from BigQuery within your Postgres database.

## Preparation [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#preparation)

Before you can query BigQuery, you need to enable the Wrappers extension and store your credentials in Postgres.

### Enable Wrappers [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#enable-wrappers)

Make sure the `wrappers` extension is installed on your database:

```
1

create extension if not exists wrappers with schema extensions;
```

### Enable the BigQuery Wrapper [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#enable-the-bigquery-wrapper)

Enable the `bigquery_wrapper` FDW:

```
1
2
3

create foreign data wrapper bigquery_wrapper  handler big_query_fdw_handler  validator big_query_fdw_validator;
```

### Store your credentials (optional) [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#store-your-credentials-optional)

By default, Postgres stores FDW credentials inside `pg_catalog.pg_foreign_server` in plain text. Anyone with access to this table will be able to view these credentials. Wrappers is designed to work with [Vault](https://supabase.com/docs/guides/database/vault), which provides an additional level of security for storing credentials. We recommend using Vault to store your credentials.

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14

-- Save your BigQuery service account json in Vault and retrieve the created `key_id`select vault.create_secret(  '    {      "type": "service_account",      "project_id": "your_gcp_project_id",      "private_key_id": "your_private_key_id",      "private_key": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n",      ...    }  ',  'bigquery',  'BigQuery service account json for Wrappers');
```

### Connecting to BigQuery [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#connecting-to-bigquery)

We need to provide Postgres with the credentials to connect to BigQuery, and any additional options. We can do this using the `create server` command:

With VaultWithout Vault

```
1
2
3
4
5
6
7

create server bigquery_server  foreign data wrapper bigquery_wrapper  options (    sa_key_id '<key_ID>', -- The Key ID from above.    project_id 'your_gcp_project_id',    dataset_id 'your_gcp_dataset_id'  );
```

### Create a schema [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#create-a-schema)

We recommend creating a schema to hold all the foreign tables:

```
1

create schema if not exists bigquery;
```

## Options [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#options)

The following options are available when creating BigQuery foreign tables:

- `table` \- Source table or view name in BigQuery, required
- `location` \- Source table location (default: 'US')
- `timeout` \- Query request timeout in milliseconds (default: 30000)
- `rowid_column` \- Primary key column name (required for data modification)

You can also use a subquery as the table option:

```
1

table '(select * except(props), to_json_string(props) as props from `my_project.my_dataset.my_table`)'
```

Note: When using subquery, full qualified table name must be used.

## Entites [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#entites)

### Tables [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#tables)

The BigQuery Wrapper supports data reads and writes from BigQuery tables and views.

#### Operations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#operations)

| Object | Select | Insert | Update | Delete | Truncate |
| --- | :-: | :-: | :-: | :-: | :-: |
| Tables | ✅ | ✅ | ✅ | ✅ | ❌ |

#### Usage [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#usage)

```
1
2
3
4
5
6
7
8
9
10

create foreign table bigquery.my_bigquery_table (  id bigint,  name text,  ts timestamp)  server bigquery_server  options (    table 'people',    location 'EU'  );
```

#### Notes [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#notes)

- Supports `where`, `order by` and `limit` clause pushdown
- When using `rowid_column`, it must be specified for data modification operations
- Data in the streaming buffer cannot be updated or deleted until the buffer is flushed (up to 90 minutes)

## Query Pushdown Support [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#query-pushdown-support)

This FDW supports `where`, `order by` and `limit` clause pushdown.

## Inserting Rows & the Streaming Buffer [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#inserting-rows--the-streaming-buffer)

This foreign data wrapper uses BigQuery’s `insertAll` API method to create a `streamingBuffer` with an associated partition time. **Within that partition time, the data cannot be updated, deleted, or fully exported**. Only after the time has elapsed (up to 90 minutes according to [BigQuery’s documentation](https://cloud.google.com/bigquery/docs/streaming-data-into-bigquery)), can you perform operations.

If you attempt an `UPDATE` or `DELETE` statement on rows while in the streamingBuffer, you will get an error of `UPDATE` or `DELETE` statement over table datasetName - note that tableName would affect rows in the streaming buffer, which is not supported.

## Supported Data Types [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#supported-data-types)

| Postgres Type | BigQuery Type |
| --- | --- |
| boolean | BOOL |
| bigint | INT64 |
| double precision | FLOAT64 |
| numeric | NUMERIC |
| text | STRING |
| varchar | STRING |
| date | DATE |
| timestamp | DATETIME |
| timestamp | TIMESTAMP |
| timestamptz | TIMESTAMP |
| jsonb | JSON |

## Limitations [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#limitations)

This section describes important limitations and considerations when using this FDW:

- Large result sets may experience network latency during data transfer
- Data in streaming buffer cannot be modified for up to 90 minutes
- Only supports specific data type mappings between Postgres and BigQuery
- Materialized views using foreign tables may fail during logical backups

## Examples [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#examples)

Some examples on how to use BigQuery foreign tables.

Let's prepare the source table in BigQuery first:

```
1
2
3
4
5
6
7
8
9
10
11
12
13

-- Run below SQLs on BigQuery to create source tablecreate table your_project_id.your_dataset_id.people (  id int64,  name string,  ts timestamp,  props jsonb);-- Add some test datainsert into your_project_id.your_dataset_id.people values  (1, 'Luke Skywalker', current_timestamp(), parse_json('{"coordinates":[10,20],"id":1}')),  (2, 'Leia Organa', current_timestamp(), null),  (3, 'Han Solo', current_timestamp(), null);
```

### Basic example [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#basic-example)

This example will create a "foreign table" inside your Postgres database called `people` and query its data:

```
1
2
3
4
5
6
7
8
9
10
11
12
13

create foreign table bigquery.people (  id bigint,  name text,  ts timestamp,  props jsonb)  server bigquery_server  options (    table 'people',    location 'EU'  );select * from bigquery.people;
```

### Data modify example [\#](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery\#data-modify-example)

This example will modify data in a "foreign table" inside your Postgres database called `people`, note that `rowid_column` option is mandatory:

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25

create foreign table bigquery.people (  id bigint,  name text,  ts timestamp,  props jsonb)  server bigquery_server  options (    table 'people',    location 'EU',    rowid_column 'id'  );-- insert new datainsert into bigquery.people(id, name, ts, props)values (4, 'Yoda', '2023-01-01 12:34:56', '{"coordinates":[10,20],"id":1}'::jsonb);-- update existing dataupdate bigquery.peopleset name = 'Anakin Skywalker', props = '{"coordinates":[30,40],"id":42}'::jsonbwhere id = 1;-- delete datadelete from bigquery.peoplewhere id = 2;
```

[Edit this page on GitHub](https://github.com/supabase/wrappers/blob/docs_v0.5.6/docs/catalog/bigquery.md)

### Is this helpful?

NoYes

### On this page

[Preparation](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#preparation) [Enable Wrappers](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#enable-wrappers) [Enable the BigQuery Wrapper](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#enable-the-bigquery-wrapper) [Store your credentials (optional)](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#store-your-credentials-optional) [Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#connecting-to-bigquery) [Create a schema](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#create-a-schema) [Options](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#options) [Entites](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#entites) [Tables](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#tables) [Query Pushdown Support](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#query-pushdown-support) [Inserting Rows & the Streaming Buffer](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#inserting-rows--the-streaming-buffer) [Supported Data Types](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#supported-data-types) [Limitations](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#limitations) [Examples](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#examples) [Basic example](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#basic-example) [Data modify example](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery#data-modify-example)

- Need some help?
[Contact support](https://supabase.com/support)
- Latest product updates?
[See Changelog](https://supabase.com/changelog)
- Something's not right?
[Check system status](https://status.supabase.com/)

* * *

[© Supabase Inc](https://supabase.com/)— [Contributing](https://github.com/supabase/supabase/blob/master/apps/docs/DEVELOPERS.md) [Author Styleguide](https://github.com/supabase/supabase/blob/master/apps/docs/CONTRIBUTING.md) [Open Source](https://supabase.com/open-source) [SupaSquad](https://supabase.com/supasquad) Privacy Settings

[Twitter](https://twitter.com/supabase) [GitHub](https://github.com/supabase) [Discord](https://discord.supabase.com/) [Youtube](https://youtube.com/c/supabase)