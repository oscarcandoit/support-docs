---
url: "https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema"
title: "AI Prompt: Database: Declarative Database Schema | Supabase Docs"
---

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Main menu

[Start with Supabase](https://supabase.com/docs/guides/getting-started)

[Features](https://supabase.com/docs/guides/getting-started/features)

[Architecture](https://supabase.com/docs/guides/getting-started/architecture)

Framework Quickstarts[Next.js](https://supabase.com/docs/guides/getting-started/quickstarts/nextjs)
[React](https://supabase.com/docs/guides/getting-started/quickstarts/reactjs)
[Nuxt](https://supabase.com/docs/guides/getting-started/quickstarts/nuxtjs)
[Vue](https://supabase.com/docs/guides/getting-started/quickstarts/vue)
[Hono](https://supabase.com/docs/guides/getting-started/quickstarts/hono)
[Flutter](https://supabase.com/docs/guides/getting-started/quickstarts/flutter)
[iOS SwiftUI](https://supabase.com/docs/guides/getting-started/quickstarts/ios-swiftui)
[Android Kotlin](https://supabase.com/docs/guides/getting-started/quickstarts/kotlin)
[SvelteKit](https://supabase.com/docs/guides/getting-started/quickstarts/sveltekit)
[Laravel PHP](https://supabase.com/docs/guides/getting-started/quickstarts/laravel)
[Ruby on Rails](https://supabase.com/docs/guides/getting-started/quickstarts/ruby-on-rails)
[SolidJS](https://supabase.com/docs/guides/getting-started/quickstarts/solidjs)
[RedwoodJS](https://supabase.com/docs/guides/getting-started/quickstarts/redwoodjs)
[Refine](https://supabase.com/docs/guides/getting-started/quickstarts/refine)

Web app demos[Next.js](https://supabase.com/docs/guides/getting-started/tutorials/with-nextjs)
[React](https://supabase.com/docs/guides/getting-started/tutorials/with-react)
[Vue 3](https://supabase.com/docs/guides/getting-started/tutorials/with-vue-3)
[Nuxt 3](https://supabase.com/docs/guides/getting-started/tutorials/with-nuxt-3)
[Angular](https://supabase.com/docs/guides/getting-started/tutorials/with-angular)
[RedwoodJS](https://supabase.com/docs/guides/getting-started/tutorials/with-redwoodjs)
[SolidJS](https://supabase.com/docs/guides/getting-started/tutorials/with-solidjs)
[Svelte](https://supabase.com/docs/guides/getting-started/tutorials/with-svelte)
[SvelteKit](https://supabase.com/docs/guides/getting-started/tutorials/with-sveltekit)
[Refine](https://supabase.com/docs/guides/getting-started/tutorials/with-refine)

Mobile tutorials[Flutter](https://supabase.com/docs/guides/getting-started/tutorials/with-flutter)
[Expo React Native](https://supabase.com/docs/guides/getting-started/tutorials/with-expo-react-native)
[Android Kotlin](https://supabase.com/docs/guides/getting-started/tutorials/with-kotlin)
[Ionic React](https://supabase.com/docs/guides/getting-started/tutorials/with-ionic-react)
[Ionic Vue](https://supabase.com/docs/guides/getting-started/tutorials/with-ionic-vue)
[Ionic Angular](https://supabase.com/docs/guides/getting-started/tutorials/with-ionic-angular)
[Swift](https://supabase.com/docs/guides/getting-started/tutorials/with-swift)

AI Tools

Prompts

[Supabase Realtime AI Assistant Guide](https://supabase.com/docs/guides/getting-started/ai-prompts/use-realtime)
[Bootstrap Next.js app with Supabase Auth](https://supabase.com/docs/guides/getting-started/ai-prompts/nextjs-supabase-auth)
[Writing Supabase Edge Functions](https://supabase.com/docs/guides/getting-started/ai-prompts/edge-functions)
[Database: Declarative Database Schema](https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema)
[Database: Create RLS policies](https://supabase.com/docs/guides/getting-started/ai-prompts/database-rls-policies)
[Database: Create functions](https://supabase.com/docs/guides/getting-started/ai-prompts/database-functions)
[Database: Create migration](https://supabase.com/docs/guides/getting-started/ai-prompts/database-create-migration)
[Postgres SQL Style Guide](https://supabase.com/docs/guides/getting-started/ai-prompts/code-format-sql)

[Model context protocol (MCP)](https://supabase.com/docs/guides/getting-started/mcp)

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

- [Start](https://supabase.com/docs/guides/getting-started)
- Products
- Build
- Manage
- Reference
- Resources

[![Supabase wordmark](https://supabase.com/docs/supabase-dark.svg)![Supabase wordmark](https://supabase.com/docs/supabase-light.svg)DOCS](https://supabase.com/docs)

Search docs...

K

[Sign up](https://supabase.com/dashboard)

Getting Started

1. [Getting started](https://supabase.com/docs/guides/getting-started)
3. AI Tools
5. [Prompts](https://supabase.com/docs/guides/getting-started/ai-prompts)

# AI Prompt: Database: Declarative Database Schema

* * *

## How to use [\#](https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema\#how-to-use)

Copy the prompt to a file in your repo.

Use the "include file" feature from your AI tool to include the prompt when chatting with your AI assistant. For example, with GitHub Copilot, use `#<filename>`, in Cursor, use `@Files`, and in Zed, use `/file`.

You can also load the prompt directly into your IDE via the following links:

- [Open in Cursor](cursor://anysphere.cursor-deeplink/prompt?text=%23+Database%3A+Declarative+Database+Schema%0A%0AMandatory+Instructions+for+Supabase+Declarative+Schema+Management%0A%0A%23%23+1.+**Exclusive+Use+of+Declarative+Schema**%0A%0A-**All+database+schema+modifications+must+be+defined+within+%60.sql%60+files+located+in+the+%60supabase%2Fschemas%2F%60+directory.+-**Do+not%5C*%5C*+create+or+modify+files+directly+in+the+%60supabase%2Fmigrations%2F%60+directory+unless+the+modification+is+about+the+known+caveats+below.+Migration+files+are+to+be+generated+automatically+through+the+CLI.%0A%0A%23%23+2.+**Schema+Declaration**%0A%0A-For+each+database+entity+%28e.g.%2C+tables%2C+views%2C+functions%29%2C+create+or+update+a+corresponding+%60.sql%60+file+in+the+%60supabase%2Fschemas%2F%60+directory%0A-Ensure+that+each+%60.sql%60+file+accurately+represents+the+desired+final+state+of+the+entity%0A%0A%23%23+3.+**Migration+Generation**%0A%0A-+Before+generating+migrations%2C+**stop+the+local+Supabase+development+environment**%0A++%60%60%60bash%0A++supabase+stop%0A++%60%60%60%0A-+Generate+migration+files+by+diffing+the+declared+schema+against+the+current+database+state%0A++%60%60%60bash%0A++supabase+db+diff+-f+%3Cmigration_name%3E%0A++%60%60%60%0A++Replace+%60%3Cmigration_name%3E%60+with+a+descriptive+name+for+the+migration%0A%0A%23%23+4.+**Schema+File+Organization**%0A%0A-+Schema+files+are+executed+in+lexicographic+order.+To+manage+dependencies+%28e.g.%2C+foreign+keys%29%2C+name+files+to+ensure+correct+execution+order%0A-+When+adding+new+columns%2C+append+them+to+the+end+of+the+table+definition+to+prevent+unnecessary+diffs%0A%0A%23%23+5.+**Rollback+Procedures**%0A%0A-+To+revert+changes%0A++-+Manually+update+the+relevant+%60.sql%60+files+in+%60supabase%2Fschemas%2F%60+to+reflect+the+desired+state%0A++-+Generate+a+new+migration+file+capturing+the+rollback%0A++++%60%60%60bash%0A++++supabase+db+diff+-f+%3Crollback_migration_name%3E%0A++++%60%60%60%0A++-+Review+the+generated+migration+file+carefully+to+avoid+unintentional+data+loss%0A%0A%23%23+6.+**Known+caveats**%0A%0AThe+migra+diff+tool+used+for+generating+schema+diff+is+capable+of+tracking+most+database+changes.+However%2C+there+are+edge+cases+where+it+can+fail.%0A%0AIf+you+need+to+use+any+of+the+entities+below%2C+remember+to+add+them+through+versioned+migrations+instead.%0A%0A%23%23%23+Data+manipulation+language%0A%0A-+DML+statements+such+as+insert%2C+update%2C+delete%2C+etc.%2C+are+not+captured+by+schema+diff%0A%0A%23%23%23+View+ownership%0A%0A-+view+owner+and+grants%0A-+security+invoker+on+views%0A-+materialized+views%0A-+doesn%E2%80%99t+recreate+views+when+altering+column+type%0A%0A%23%23%23+RLS+policies%0A%0A-+alter+policy+statements%0A-+column+privileges%0A-+Other+entities%23%0A-+schema+privileges+are+not+tracked+because+each+schema+is+diffed+separately%0A-+comments+are+not+tracked%0A-+partitions+are+not+tracked%0A-+alter+publication+...+add+table+...%0A-+create+domain+statements+are+ignored%0A-+grant+statements+are+duplicated+from+default+privileges%0A%0A---%0A%0A**Non-compliance+with+these+instructions+may+lead+to+inconsistent+database+states+and+is+strictly+prohibited.**)

## Prompt [\#](https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema\#prompt)

````
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72

# Database: Declarative Database SchemaMandatory Instructions for Supabase Declarative Schema Management## 1. **Exclusive Use of Declarative Schema**-**All database schema modifications must be defined within `.sql` files located in the `supabase/schemas/` directory. -**Do not\*\* create or modify files directly in the `supabase/migrations/` directory unless the modification is about the known caveats below. Migration files are to be generated automatically through the CLI.## 2. **Schema Declaration**-For each database entity (e.g., tables, views, functions), create or update a corresponding `.sql` file in the `supabase/schemas/` directory-Ensure that each `.sql` file accurately represents the desired final state of the entity## 3. **Migration Generation**- Before generating migrations, **stop the local Supabase development environment**  ```bash  supabase stop  ```- Generate migration files by diffing the declared schema against the current database state  ```bash  supabase db diff -f <migration_name>  ```  Replace `<migration_name>` with a descriptive name for the migration## 4. **Schema File Organization**- Schema files are executed in lexicographic order. To manage dependencies (e.g., foreign keys), name files to ensure correct execution order- When adding new columns, append them to the end of the table definition to prevent unnecessary diffs## 5. **Rollback Procedures**- To revert changes  - Manually update the relevant `.sql` files in `supabase/schemas/` to reflect the desired state  - Generate a new migration file capturing the rollback    ```bash    supabase db diff -f <rollback_migration_name>    ```  - Review the generated migration file carefully to avoid unintentional data loss## 6. **Known caveats**The migra diff tool used for generating schema diff is capable of tracking most database changes. However, there are edge cases where it can fail.If you need to use any of the entities below, remember to add them through versioned migrations instead.### Data manipulation language- DML statements such as insert, update, delete, etc., are not captured by schema diff### View ownership- view owner and grants- security invoker on views- materialized views- doesn’t recreate views when altering column type### RLS policies- alter policy statements- column privileges- Other entities#- schema privileges are not tracked because each schema is diffed separately- comments are not tracked- partitions are not tracked- alter publication ... add table ...- create domain statements are ignored- grant statements are duplicated from default privileges---**Non-compliance with these instructions may lead to inconsistent database states and is strictly prohibited.**
````

[Edit this page on GitHub](https://github.com/supabase/supabase/blob/master/examples/prompts/declarative-database-schema.md)

### Is this helpful?

NoYes

### On this page

[How to use](https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema#how-to-use) [Prompt](https://supabase.com/docs/guides/getting-started/ai-prompts/declarative-database-schema#prompt)

- Need some help?
[Contact support](https://supabase.com/support)
- Latest product updates?
[See Changelog](https://supabase.com/changelog)
- Something's not right?
[Check system status](https://status.supabase.com/)

* * *

[© Supabase Inc](https://supabase.com/)— [Contributing](https://github.com/supabase/supabase/blob/master/apps/docs/DEVELOPERS.md) [Author Styleguide](https://github.com/supabase/supabase/blob/master/apps/docs/CONTRIBUTING.md) [Open Source](https://supabase.com/open-source) [SupaSquad](https://supabase.com/supasquad) Privacy Settings

[Twitter](https://twitter.com/supabase) [GitHub](https://github.com/supabase) [Discord](https://discord.supabase.com/) [Youtube](https://youtube.com/c/supabase)