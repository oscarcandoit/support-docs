---
url: "https://docs.gravityforms.com/gform_post_add_subscription_payment/"
title: "gform_post_add_subscription_payment - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)      - [Add-On Framework Actions](https://docs.gravityforms.com/category/developers/hooks/actions/addon-framework-actions/)
      - [Confirmations Actions](https://docs.gravityforms.com/category/developers/hooks/actions/confirmations-actions/)
      - [Editor Actions](https://docs.gravityforms.com/category/developers/hooks/actions/editor-actions/)
      - [Email Actions](https://docs.gravityforms.com/category/developers/hooks/actions/email-actions/)
      - [Entry Actions](https://docs.gravityforms.com/category/developers/hooks/actions/entry-actions/)
      - [Entry Change Actions](https://docs.gravityforms.com/category/developers/hooks/actions/entry-change-actions/)
      - [Entry Detail Actions](https://docs.gravityforms.com/category/developers/hooks/actions/entry-detail-actions/)
      - [Entry List Actions](https://docs.gravityforms.com/category/developers/hooks/actions/entry-list-actions/)
      - [Entry Printing Actions](https://docs.gravityforms.com/category/developers/hooks/actions/entry-printing-actions/)
      - [Field Framework Actions](https://docs.gravityforms.com/category/developers/hooks/actions/field-framework-actions/)
      - [Field Actions](https://docs.gravityforms.com/category/developers/hooks/actions/field-actions/)
      - [Gravity Forms Core Actions](https://docs.gravityforms.com/category/developers/hooks/actions/gravity-forms-core-actions/)
      - [Gravity Forms Settings Actions](https://docs.gravityforms.com/category/developers/hooks/actions/gravity-forms-settings-actions/)
      - [Form Actions](https://docs.gravityforms.com/category/developers/hooks/actions/form-actions/)
      - [Form Activity Actions](https://docs.gravityforms.com/category/developers/hooks/actions/form-activity-actions/)
      - [Form Settings Actions](https://docs.gravityforms.com/category/developers/hooks/actions/form-settings-actions/)
      - [Import/Export Actions](https://docs.gravityforms.com/category/developers/hooks/actions/importexport-actions/)
      - [Notifications Actions](https://docs.gravityforms.com/category/developers/hooks/actions/notifications-actions/)
      - [Payment Actions](https://docs.gravityforms.com/category/developers/hooks/actions/payment-actions/)        - [gform\_action\_pre\_payment\_callback](https://docs.gravityforms.com/gform_action_pre_payment_callback/ "gform_action_pre_payment_callback")
        - [gform\_payment\_details](https://docs.gravityforms.com/10107-2/ "gform_payment_details")
        - [gform\_post\_add\_subscription\_payment](https://docs.gravityforms.com/gform_post_add_subscription_payment/ "gform_post_add_subscription_payment")
        - [gform\_post\_fail\_subscription\_payment](https://docs.gravityforms.com/gform_post_fail_subscription_payment/ "gform_post_fail_subscription_payment")
        - [gform\_post\_payment\_action](https://docs.gravityforms.com/gform_post_payment_action/ "gform_post_payment_action")
        - [gform\_post\_payment\_callback](https://docs.gravityforms.com/gform_post_payment_callback/ "gform_post_payment_callback")
        - [gform\_post\_payment\_completed](https://docs.gravityforms.com/gform_post_payment_completed/ "gform_post_payment_completed")
        - [gform\_post\_payment\_refunded](https://docs.gravityforms.com/gform_post_payment_refunded/ "gform_post_payment_refunded")
        - [gform\_post\_payment\_transaction](https://docs.gravityforms.com/gform_post_payment_transaction/ "gform_post_payment_transaction")
        - [gform\_post\_subscription\_started](https://docs.gravityforms.com/gform_post_subscription_started/ "gform_post_subscription_started")
        - [gform\_subscription\_canceled](https://docs.gravityforms.com/gform_subscription_canceled/ "gform_subscription_canceled")
        - [gform\_trigger\_payment\_delayed\_feeds](https://docs.gravityforms.com/gform_trigger_payment_delayed_feeds/ "gform_trigger_payment_delayed_feeds")
      - [Post Field Actions](https://docs.gravityforms.com/category/developers/hooks/actions/post-fields-actions/)
      - [Script/Style Actions](https://docs.gravityforms.com/category/developers/hooks/actions/scriptstyle-actions/)
      - [Submission Actions](https://docs.gravityforms.com/category/developers/hooks/actions/submission-actions/)
      - [System Status Actions](https://docs.gravityforms.com/category/developers/hooks/actions/system-status-actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_post\_add\_subscription\_payment

- [Description](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-description)
- [Usage](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-usage)
- [Parameters](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-parameters)
- [Examples](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-examples)
- [1\. Basic usage](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-1-basic-usage)
- [2\. Cancel a Stripe subscription after # payments](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-2-cancel-a-stripe-subscription-after-payments)
- [3\. Access webhook event](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-3-access-webhook-event)
- [Placement](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-placement)
- [Source Code](https://docs.gravityforms.com/gform_post_add_subscription_payment/#h-source-code)

## Description

Triggered after a payment is made to an existing subscription.

## Usage

|     |     |
| --- | --- |
| 1 | `add_action(``'gform_post_add_subscription_payment'``,``'my_function'``, 10, 2 );` |

## Parameters

- $entry [Entry Object](https://docs.gravityforms.com/entry-object/)

The entry object that was created.
- $action [array](https://docs.gravityforms.com/array/)

The action that occurred within the subscription payment. Contains further information about the subscription. See below for Array configuration.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10 | `$action``=``array``(`<br>```'type'``=>``''``,`<br>```'amount'``=>``''``,`<br>```'transaction_type'``=>``''``,`<br>```'transaction_id'``=>``''``,`<br>```'subscription_id'``=>``''``,`<br>```'entry_id'``=>``''``,`<br>```'payment_status'``=>``''``,`<br>```'note'``=>``''``,`<br>`);` |

## Examples

### 1\. Basic usage

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4 | `function``my_function() {`<br>`//Do something here`<br>`}`<br>`add_action(``'gform_post_add_subscription_payment'``,``'my_function'``, 10, 2 );` |

### 2\. Cancel a Stripe subscription after \# payments

See the [Cancel a Stripe Subscription After a Specified Number of Payments](https://docs.gravityforms.com/cancel-stripe-subscription-payments/) article for an example showing how this hook can be used to cancel a Stripe subscription after a set number of payments have occurred.

### 3\. Access webhook event

In some cases, you may need access to the webhook event that initiated the subscription cancellation. This example demonstrates how to access that event object. Note that this object is only available if the request was initiated by a Stripe webhook.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8 | `add_action(``'gform_post_add_subscription_payment'``,``'my_function'``, 10, 2 );`<br>`function``my_function(``$entry``,``$feed``) {`<br>```// If data from the Stripe webhook event is needed (and this hook was initiated via a Stripe webhook request), you can access event data with the following line:`<br>```$event``= gf_stripe()->get_webhook_event();`<br>```if``(``$event``){`<br>```// Access webhook event data. For event object documentation, see: https://stripe.com/docs/api/events/object`<br>```}`<br>`}` |

## Placement

This code can be used in the [functions.php](https://developer.wordpress.org/themes/basics/theme-functions/) file of the active theme, a custom functions plugin, a custom add-on, or with a code snippets plugin.

See also the PHP section in this article: [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/)

## Source Code

|     |     |
| --- | --- |
| 1 | `do_action(``'gform_post_add_subscription_payment'``,``$entry``,``$action``);` |

This action hook is located in GFPaymentAddOn::add\_subscription\_payment() in _includes/addon/class-gf-payment-addon.php_.

- X/Twitter


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: July 12, 2024

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_post_add_subscription_payment/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)