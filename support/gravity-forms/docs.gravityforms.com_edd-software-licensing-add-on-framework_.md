---
url: "https://docs.gravityforms.com/edd-software-licensing-add-on-framework/"
title: "EDD Software Licensing with Add-On Framework - Gravity Forms"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)    - [Accessing Mapped Field Values During Feed Processing](https://docs.gravityforms.com/mapped-field-values-during-feed-processing/ "Accessing Mapped Field Values During Feed Processing")
    - [Add Sub-Pages to Gravity Forms Admin Navigation](https://docs.gravityforms.com/add-sub-pages-to-gravity-forms-admin-nav/ "Add Sub-Pages to Gravity Forms Admin Navigation")
    - [Adding a New Notification Service Using the Add-On Framework](https://docs.gravityforms.com/new-notification-service-using-framework/ "Adding a New Notification Service Using the Add-On Framework")
    - [Adding a Note to the Entry when Using the Add-On Framework](https://docs.gravityforms.com/adding-note-when-using-addon-framework/ "Adding a Note to the Entry when Using the Add-On Framework")
    - [Adding Meta Boxes to the Entry Detail Page Using the Add-On Framework](https://docs.gravityforms.com/meta-boxes-entry-detail-addon-framework/ "Adding Meta Boxes to the Entry Detail Page Using the Add-On Framework")
    - [Cancel a Stripe Subscription After a Specified Number of Payments](https://docs.gravityforms.com/cancel-stripe-subscription-payments/ "Cancel a Stripe Subscription After a Specified Number of Payments")
    - [Capturing the HTTP Referrer URL on Form Submissions](https://docs.gravityforms.com/capture-http-referrer-url-form-submissions/ "Capturing the HTTP Referrer URL on Form Submissions")
    - [Centering an Entire Form](https://docs.gravityforms.com/centering-an-entire-form/ "Centering an Entire Form")
    - [Changing Stripe Billing Information](https://docs.gravityforms.com/changing-stripe-billing-information/ "Changing Stripe Billing Information")
    - [Create a Customer in Stripe without Capturing Payment](https://docs.gravityforms.com/create-customer-stripe-without-payment/ "Create a Customer in Stripe without Capturing Payment")
    - [Create Post with Custom Taxonomy](https://docs.gravityforms.com/create-post-with-custom-taxonomy/ "Create Post with Custom Taxonomy")
    - [Defining Minimum Add-On Requirements](https://docs.gravityforms.com/defining-minimum-add-requirements/ "Defining Minimum Add-On Requirements")
    - [Deleting Cached Entry Data](https://docs.gravityforms.com/deleting-cached-entry-data/ "Deleting Cached Entry Data")
    - [Disabling Mobile Keyboard Input on Datepicker Fields](https://docs.gravityforms.com/disable-keyboard-input-datepicker-fields/ "Disabling Mobile Keyboard Input on Datepicker Fields")
    - [Display a message on the login form when the user is pending activation](https://docs.gravityforms.com/display-message-login-form-user-pending-activation/ "Display a message on the login form when the user is pending activation")
    - [Enable Use of the Total Field with Conditional Logic](https://docs.gravityforms.com/enable-total-field-with-conditional-logic/ "Enable Use of the Total Field with Conditional Logic")
    - [Hiding the Form Title](https://docs.gravityforms.com/hiding-the-form-title/ "Hiding the Form Title")
    - [Highlighting the Current or Future Date in the Datepicker](https://docs.gravityforms.com/highlighting-current-future-date-datepicker/ "Highlighting the Current or Future Date in the Datepicker")
    - [How to Add a Custom Field Group when Using the Field Framework](https://docs.gravityforms.com/add-custom-field-group-using-field-framework/ "How to Add a Custom Field Group when Using the Field Framework")
    - [How to Add a New Field to an Existing Form Using the GFAPI](https://docs.gravityforms.com/how-to-add-field-to-form-using-gfapi/ "How to Add a New Field to an Existing Form Using the GFAPI")
    - [How To Add And Remove Countries From the Address Field](https://docs.gravityforms.com/addremove-countries-country-select-field/ "How To Add And Remove Countries From the Address Field")
    - [How to Add Delayed Payment Support to a Feed Add-On](https://docs.gravityforms.com/add-delayed-payment-support-feed-add/ "How to Add Delayed Payment Support to a Feed Add-On")
    - [How to Set the Default Properties for a New Field](https://docs.gravityforms.com/set-default-properties-new-field/ "How to Set the Default Properties for a New Field")
    - [Including a New Field Using the Add-On Framework](https://docs.gravityforms.com/including-new-field-using-add-on-framework/ "Including a New Field Using the Add-On Framework")
    - [Including and Using Entry Meta with the Add-On Framework](https://docs.gravityforms.com/using-entry-meta-with-add-on-framework/ "Including and Using Entry Meta with the Add-On Framework")
    - [Including Scripts and Styles when Using the Add-On Framework](https://docs.gravityforms.com/include-scripts-styles-with-addon-framework/ "Including Scripts and Styles when Using the Add-On Framework")
    - [Sending Notifications on Custom Events when Using the Add-On Framework](https://docs.gravityforms.com/notifications-custom-events-addon-framework/ "Sending Notifications on Custom Events when Using the Add-On Framework")
    - [Using EDD Software Licensing with the Add-On Framework](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/ "Using EDD Software Licensing with the Add-On Framework")
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# Using EDD Software Licensing with the Add-On Framework

- [Introduction](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-introduction)
- [The Constants](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-the-constants)
- [The License Key Setting](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-the-license-key-setting)
- [Validating the License Key](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-validating-the-license-key)
- [Activating and Deactivating the License Key](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-activating-and-deactivating-the-license-key)
- [Perform the Remote Request](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-perform-the-remote-request)
- [Plugin Updates](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-plugin-updates)
- [Important](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/#h-important)

## Introduction

In this article we will show how you can integrate your add-on with the Easy Digital Downloads Software Licensing extension to handle license key activation, deactivation, validation, and enabling access to automatic updates.

Before reading on we do recommend you read the following articles from the EDD documentation:

- [Activating License Keys in WP Plugins and Themes](http://docs.easydigitaldownloads.com/article/380-activating-license-keys-in-wp-plugins-and-themes)
- [Deactivating License Keys in WP Plugins and Themes](http://docs.easydigitaldownloads.com/article/376-deactivating-license-keys-in-wp-plugins-and-themes)
- [Automatic Upgrades for WordPress Plugins](http://docs.easydigitaldownloads.com/article/383-automatic-upgrades-for-wordpress-plugins)

The following examples are based on the Simple Add-On from the [Add-On Framework](https://docs.gravityforms.com/add-on-framework/#a-simple-add-on) article.

## The Constants

Some of the arguments used in the various requests to the [EDD Software Licensing API](http://docs.easydigitaldownloads.com/article/384-software-licensing-api) are identical so we are going to store their values in constants.

In our Simple Add-On we have already defined the add-on version number (GF\_SIMPLE\_ADDON\_VERSION) in the root file so we will add our two new constants there.

|     |     |
| --- | --- |
| 1<br>2<br>3 | `define(``'GF_SIMPLE_ADDON_VERSION'``,``'2.0'``);`<br>`define(``'GF_SIMPLE_ADDON_EDD_SL_STORE_URL'``,``'http://yoursite.com'``);`<br>`define(``'GF_SIMPLE_ADDON_EDD_SL_ITEM_NAME'``,``'Simple Add-On'``);` |

GF\_SIMPLE\_ADDON\_EDD\_SL\_STORE\_URL is the URL of the site where you have installed the Easy Digital Downloads plugin and Software Licensing extension.

GF\_SIMPLE\_ADDON\_EDD\_SL\_ITEM\_NAME is the name of the product as you have configured it in EDD.

## The License Key Setting

The plugin\_settings\_fields() function of our example add-on had a simple text field named mytextbox. In the following example we have replaced that field with a new text field named license\_key which will use a password type input to capture the license key.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25 | `/**`<br>```* Configures the settings which should be rendered on the add-on settings tab.`<br>```*`<br>```* @return array`<br>```*/`<br>`public``function``plugin_settings_fields() {`<br>```return``array``(`<br>```array``(`<br>```'title'``=> esc_html__(``'Simple Add-On Settings'``,``'simpleaddon'``),`<br>```'fields'``=>``array``(`<br>```array``(`<br>```'name'``=>``'license_key'``,`<br>```'label'``=> esc_html__(``'License Key'``,``'simpleaddon'``),`<br>```'type'``=>``'text'``,`<br>```'input_type'``=>``'password'``,`<br>```'validation_callback'``=>``array``(``$this``,``'license_validation'``),`<br>```'feedback_callback'``=>``array``(``$this``,``'license_feedback'``),`<br>```'error_message'``=> esc_html__(``'Invalid license'``,``'simpleaddon'``),`<br>```'class'``=>``'large'``,`<br>```'default_value'``=>``''``,`<br>```),`<br>```),`<br>```),`<br>```);`<br>`}` |

Review the [Settings API](https://docs.gravityforms.com/category/developers/php-api/add-on-framework/settings-api/) documentation for more details about how to define sections of fields.

## Validating the License Key

The example below shows the function assigned to the **feedback\_callback** property of the **license\_key** field. This function runs when the markup for the text field is being prepared on page display so the validation check can determine which icon is displayed next to the field.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25 | `/**`<br>```* Determine if the license key is valid so the appropriate icon can be displayed next to the field.`<br>```*`<br>```* @param string $value The current value of the license_key field.`<br>```* @param array $field The field properties.`<br>```*`<br>```* @return bool|null`<br>```*/`<br>`public``function``license_feedback(``$value``,``$field``) {`<br>```if``(``empty``(``$value``) ) {`<br>```return``null;`<br>```}`<br>```// Send the remote request to check the license is valid`<br>```$license_data``=``$this``->perform_edd_license_request(``'check_license'``,``$value``);`<br>```$valid``= null;`<br>```if``(``empty``(``$license_data``) ||``$license_data``->license ==``'invalid'``) {`<br>```$valid``= false;`<br>```}``elseif``(``$license_data``->license ==``'valid'``) {`<br>```$valid``= true;`<br>```}`<br>```return``$valid``;`<br>`}` |

## Activating and Deactivating the License Key

The example below shows the function assigned to the **validation\_callback** property of the **license\_key** field. This function runs when the plugin settings are saved. It will deactivate the old license key if the posted value doesn’t match the value found in the existing settings. It will also activate the new license key.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19 | `/**`<br>```* Handle license key activation or deactivation.`<br>```*`<br>```* @param array $field The field properties.`<br>```* @param string $field_setting The submitted value of the license_key field.`<br>```*/`<br>`public``function``license_validation(``$field``,``$field_setting``) {`<br>```$old_license``=``$this``->get_plugin_setting(``'license_key'``);`<br>```if``(``$old_license``&&``$field_setting``!=``$old_license``) {`<br>```// Send the remote request to deactivate the old license`<br>```$this``->perform_edd_license_request(``'deactivate_license'``,``$old_license``);`<br>```}`<br>```if``( !``empty``(``$field_setting``) ) {`<br>```// Send the remote request to activate the new license`<br>```$this``->perform_edd_license_request(``'activate_license'``,``$field_setting``);`<br>```}`<br>`}` |

## Perform the Remote Request

The following example shows the helper being used by the license\_feedback() and license\_validation() functions to send the license key validation, activation, and deactivation requests to your EDD store url.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26 | `/**`<br>```* Send a request to the EDD store url.`<br>```*`<br>```* @param string $edd_action The action to perform (check_license, activate_license, or deactivate_license).`<br>```* @param string $license The license key.`<br>```*`<br>```* @return object`<br>```*/`<br>`public``function``perform_edd_license_request(``$edd_action``,``$license``) {`<br>```// Prepare the request arguments`<br>```$args``=``array``(`<br>```'timeout'``=> 10,`<br>```'sslverify'``=> false,`<br>```'body'``=>``array``(`<br>```'edd_action'``=>``$edd_action``,`<br>```'license'``=> trim(``$license``),`<br>```'item_name'``=> urlencode( GF_SIMPLE_ADDON_EDD_SL_ITEM_NAME ),`<br>```'url'``=> home_url(),`<br>```),`<br>```);`<br>```// Send the remote request`<br>```$response``= wp_remote_post( GF_SIMPLE_ADDON_EDD_SL_STORE_URL,``$args``);`<br>```return``json_decode( wp_remote_retrieve_body(``$response``) );`<br>`}` |

## Plugin Updates

Adding support for automatic updates is very simple. If you have read the EDD documentation on the subject you will know that the EDD Software Licensing plugin includes a sample plugin containing a file named EDD\_SL\_Plugin\_Updater.php. You will want to include a copy of this file with your add-on.

Next, return to your add-ons root file and add the following to the end of the file.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21 | `add_action(``'init'``,``'gf_simple_addon_edd_plugin_updater'``, 0 );`<br>`function``gf_simple_addon_edd_plugin_updater() {`<br>```if``( !``class_exists``(``'EDD_SL_Plugin_Updater'``) ) {`<br>```// load our custom updater if it doesn't already exist`<br>```include``( dirname(``__FILE__``) .``'/EDD_SL_Plugin_Updater.php'``);`<br>```}`<br>```// retrieve the license key`<br>```$license_key``= trim( gf_simple_addon()->get_plugin_setting(``'license_key'``) );`<br>```// setup the updater`<br>```$edd_updater``=``new``EDD_SL_Plugin_Updater( GF_SIMPLE_ADDON_EDD_SL_STORE_URL,``__FILE__``,``array``(`<br>```'version'``=> GF_SIMPLE_ADDON_VERSION,`<br>```'license'``=>``$license_key``,`<br>```'item_name'``=> GF_SIMPLE_ADDON_EDD_SL_ITEM_NAME,`<br>```'author'``=>``'John Doe'`<br>```)`<br>```);`<br>`}` |

That’s all there is to it! As long as the license key entered on the plugin settings page is valid and active, the add-on will have access to updates.

## Important

The [GFAddon](https://docs.gravityforms.com/gfaddon) class includes a protected variable named $\_enable\_rg\_autoupgrade which is set to false.

The $\_enable\_rg\_autoupgrade variable is not intended for use in third-party add-ons. It is only used by add-ons developed by Rocketgenius, Inc. to include the class-gf-auto-upgrade.php file which handles integrating the add-ons with our licensing and updates system.

All other add-ons should leave the $\_enable\_rg\_autoupgrade variable set to false.

- LinkedIn


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: December 3, 2021

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)