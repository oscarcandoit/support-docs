---
url: "https://docs.gravityforms.com/gform_field_validation/"
title: "gform_field_validation - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)      - [Add-On Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/addon-framework-filters/)
      - [Add-On Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/)
      - [Admin Dashboard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/admin-dashboard-filters/)
      - [Calculation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/calculation-filters/)
      - [Conditional Logic Filters](https://docs.gravityforms.com/category/developers/hooks/filters/conditional-logic-filters/)
      - [Confirmation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/confirmation-filters/)
      - [Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/editor-filters/)
      - [Entry List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-list-filters/)
      - [Entry Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-filters/)
      - [Field Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-filters/)
      - [Field Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-framework-filters/)
      - [Form Component Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-component-filters/)
      - [Form List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-list/)
      - [Form Object Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-object/)
      - [Form Settings Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-settings-filters/)
      - [Import/Export Filters](https://docs.gravityforms.com/category/developers/hooks/filters/importexport-filters/)
      - [Logging Filters](https://docs.gravityforms.com/category/developers/hooks/filters/logging/)
      - [Merge Tag Filters](https://docs.gravityforms.com/category/developers/hooks/filters/merge-tags/)
      - [Notification Filters](https://docs.gravityforms.com/category/developers/hooks/filters/notification-filters/)
      - [Payment Filters](https://docs.gravityforms.com/category/developers/hooks/filters/payment/)
      - [Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/post-creation/)
      - [REST API v1 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v1/)
      - [REST API v2 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v2/)
      - [Rich Text Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rich-text-editor/)
      - [Save and Continue Filters](https://docs.gravityforms.com/category/developers/hooks/filters/save-and-continue/)
      - [Script Filters](https://docs.gravityforms.com/category/developers/hooks/filters/script-filters/)
      - [Styling/Theme/CSS Filters](https://docs.gravityforms.com/category/developers/hooks/filters/styling-filters/)
      - [System Status Filters](https://docs.gravityforms.com/category/developers/hooks/filters/system-status/)
      - [Upload Filters](https://docs.gravityforms.com/category/developers/hooks/filters/upload-filters/)
      - [Validation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/validation/)        - [gform\_allowable\_tags](https://docs.gravityforms.com/gform_allowable_tags/ "gform_allowable_tags")
        - [gform\_duplicate\_message](https://docs.gravityforms.com/gform_duplicate_message/ "gform_duplicate_message")
        - [gform\_email\_field\_rejectable\_values](https://docs.gravityforms.com/gform_email_field_rejectable_values/ "gform_email_field_rejectable_values")
        - [gform\_field\_validation](https://docs.gravityforms.com/gform_field_validation/ "gform_field_validation")
        - [gform\_form\_validation\_errors](https://docs.gravityforms.com/gform_form_validation_errors/ "gform_form_validation_errors")
        - [gform\_form\_validation\_errors\_markup](https://docs.gravityforms.com/gform_form_validation_errors_markup/ "gform_form_validation_errors_markup")
        - [gform\_is\_disabled\_duplicate\_submissions\_protection](https://docs.gravityforms.com/gform_is_disabled_duplicate_submissions_protection/ "gform_is_disabled_duplicate_submissions_protection")
        - [gform\_is\_duplicate](https://docs.gravityforms.com/gform_is_duplicate/ "gform_is_duplicate")
        - [gform\_is\_valid\_conditional\_logic\_operator](https://docs.gravityforms.com/gform_is_valid_conditional_logic_operator/ "gform_is_valid_conditional_logic_operator")
        - [gform\_is\_valid\_url](https://docs.gravityforms.com/gform_is_valid_url/ "gform_is_valid_url")
        - [gform\_rfc\_url\_validation](https://docs.gravityforms.com/gform_rfc_url_validation/ "gform_rfc_url_validation")
        - [gform\_search\_criteria\_entry\_limit\_validation](https://docs.gravityforms.com/gform_search_critera_entry_limit_validation/ "gform_search_criteria_entry_limit_validation")
        - [gform\_validate\_required\_file\_exists](https://docs.gravityforms.com/gform_validate_required_file_exists/ "gform_validate_required_file_exists")
        - [gform\_validation](https://docs.gravityforms.com/gform_validation/ "gform_validation")
        - [gform\_validation\_message](https://docs.gravityforms.com/gform_validation_message/ "gform_validation_message")
        - [gform\_value\_pre\_duplicate\_check](https://docs.gravityforms.com/gform_value_pre_duplicate_check/ "gform_value_pre_duplicate_check")
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_field\_validation

- [Description](https://docs.gravityforms.com/gform_field_validation/#h-description)
- [Usage](https://docs.gravityforms.com/gform_field_validation/#h-usage)
- [Parameters](https://docs.gravityforms.com/gform_field_validation/#h-parameters)
- [Examples](https://docs.gravityforms.com/gform_field_validation/#h-examples)
- [Number field validation](https://docs.gravityforms.com/gform_field_validation/#h-number-field-validation)
- [User Defined Price field validation](https://docs.gravityforms.com/gform_field_validation/#h-user-defined-price-field-validation)
- [Address field validation](https://docs.gravityforms.com/gform_field_validation/#h-address-field-validation)
- [Name field validation](https://docs.gravityforms.com/gform_field_validation/#h-name-field-validation)
- [Compare value against another field](https://docs.gravityforms.com/gform_field_validation/#h-compare-value-against-another-field)
- [Phone field validation](https://docs.gravityforms.com/gform_field_validation/#h-phone-field-validation)
- [Time field validation](https://docs.gravityforms.com/gform_field_validation/#h-time-field-validation)
- [Check if email is on Mailchimp list](https://docs.gravityforms.com/gform_field_validation/#h-check-if-email-is-on-mailchimp-list)
- [Date field validation](https://docs.gravityforms.com/gform_field_validation/#h-date-field-validation)
- [Product field quantity validation](https://docs.gravityforms.com/gform_field_validation/#h-product-field-quantity-validation)
- [Email validation by third-party API](https://docs.gravityforms.com/gform_field_validation/#h-email-validation-by-third-party-api)
- [Multiple emails in one field](https://docs.gravityforms.com/gform_field_validation/#h-multiple-emails-in-one-field)
- [Date field – Age Validation](https://docs.gravityforms.com/gform_field_validation/#h-date-field-age-validation)
- [Survey Rank field](https://docs.gravityforms.com/gform_field_validation/#h-survey-rank-field)
- [Multi-file Upload Minimum Count](https://docs.gravityforms.com/gform_field_validation/#h-multi-file-upload-minimum-count)
- [Current User Password validation](https://docs.gravityforms.com/gform_field_validation/#h-current-user-password-validation)
- [List field validation](https://docs.gravityforms.com/gform_field_validation/#h-list-field-validation)
- [Prevent submission based on a word list](https://docs.gravityforms.com/gform_field_validation/#h-prevent-submission-based-on-a-word-list)
- [Prevent use of passwords exposed in data breaches](https://docs.gravityforms.com/gform_field_validation/#h-prevent-use-of-passwords-exposed-in-data-breaches)
- [Prevent submission if a URL is entered into Text or Paragraph fields](https://docs.gravityforms.com/gform_field_validation/#h-prevent-submission-if-a-url-is-entered-into-text-or-paragraph-fields)
- [Prevent submission of Cyrillic characters](https://docs.gravityforms.com/gform_field_validation/#h-prevent-submission-of-cyrillic-characters)
- [Validate uploaded files](https://docs.gravityforms.com/gform_field_validation/#h-validate-uploaded-files)
- [Placement](https://docs.gravityforms.com/gform_field_validation/#h-placement)
- [Source Code](https://docs.gravityforms.com/gform_field_validation/#h-source-code)

## Description

Use this filter to create custom validation logic for a field.

## Usage

The base filter which applies to all forms and all fields would be used like so:

|     |
| --- |
| `add_filter(``'gform_field_validation'``,``'your_function_name'``, 10, 4 );` |

You can also target all fields in a form by adding the form id after the hook name.

|     |
| --- |
| `// The following declaration targets all fields in form 6`<br>`add_filter(``'gform_field_validation_6'``,``'your_function_name'``, 10, 5 );` |

You can also target a specific field by adding the form id and field id after the hook name.

|     |
| --- |
| `// The following declaration targets field 1 in form 6`<br>`add_filter(``'gform_field_validation_6_1'``,``'your_function_name'``, 10, 5 );` |

## Parameters

- **$result** [array](https://docs.gravityforms.com/array) The validation result to be filtered. It is formatted as follows:

|     |
| --- |
| `array``(``'is_valid'``=> false,``'message'``=>``'Please enter a number greater than 10'``)` |

- **$value** [string](https://docs.gravityforms.com/string) \| [array](https://docs.gravityforms.com/array) The field value to be validated. Multi-input fields like Address will pass an array of values.
- **$form** [Form Object](https://docs.gravityforms.com/form-object) Current form object.
- **$field** [Field Object](https://docs.gravityforms.com/field-object) Current field object.
- **$context** [string](https://docs.gravityforms.com/string) The context for the current submission. Since Gravity Forms 2.6.3.2. Possible values: `form-submit`, `api-submit`, or `api-validate`.

## Examples

### Number field validation

This example validates a field so that only numbers less than 10 are allowed.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9 | `add_filter(``'gform_field_validation_175_1'``,``'custom_validation'``, 10, 4 );`<br>`function``custom_validation(``$result``,``$value``,``$form``,``$field``) {`<br>``<br>```if``(``$result``[``'is_valid'``] &&``intval``(``$value``) > 10 ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``] =``'Please enter a value less than 10'``;`<br>```}`<br>```return``$result``;`<br>`}` |

### User Defined Price field validation

This example validates an User Defined Price field to make sure the user entered an amount of at least 0.50. The example targets a field with id 23 in a form with id 96, update the filter name with your field and form id or remove them to target all User Defined Price fields in all forms.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13 | `add_filter(``'gform_field_validation_96_23'``,``'gf_user_defined_price_validation'``, 10, 4 );`<br>`function``gf_user_defined_price_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```//change value for price field to just be numeric (strips off currency symbol, etc.) using Gravity Forms to_number function`<br>```//the second parameter to to_number is the currency code, ie "USD", if not specified USD is used`<br>```$number``= GFCommon::to_number(``$value``,``''``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): User Defined Price Submitted: '``.``$number``);`<br>``<br>```if``(``$result``[``'is_valid'``] &&``$number``< 0.50 ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``] =``'You must enter at least $0.50'``;`<br>```}`<br>```return``$result``;`<br>`}` |

### Address field validation

This example validates the address field so that you can control which parts are required. Only the street, city, and state are required in this example.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38 | `add_filter(``'gform_field_validation_362_1'``,``'custom_address_validation'``, 10, 4 );`<br>`function``custom_address_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```//address field will pass $value as an array with each of the elements as an item within the array, the key is the field id`<br>```if``(``'address'``===``$field``->type &&``$field``->isRequired ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Running.'``);`<br>```//address failed validation because of a required item not being filled out`<br>```//do custom validation`<br>```$street``= rgar(``$value``,``$field``->id .``'.1'``);`<br>```$street2``= rgar(``$value``,``$field``->id .``'.2'``);`<br>```$city``= rgar(``$value``,``$field``->id .``'.3'``);`<br>```$state``= rgar(``$value``,``$field``->id .``'.4'``);`<br>```$zip``= rgar(``$value``,``$field``->id .``'.5'``);`<br>```$country``= rgar(``$value``,``$field``->id .``'.6'``);`<br>```//check to see if the values you care about are filled out`<br>```$required_inputs``=``array``(``'1'``=>``$street``,``'3'``=>``$city``,``'4'``=>``$state``);`<br>```$empty_input``= false;`<br>```foreach``(``$required_inputs``as``$input_number``=>``$input_value``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Is Hidden? '``.``$field``->get_input_property(``$input_number``,``'isHidden'``) );`<br>```if``(``empty``(``$input_value``) && !``$field``->get_input_property(``$input_number``,``'isHidden'``) ) {`<br>```$field``->set_input_validation_state(``$input_number``, false );``// Only for Gravity Forms 2.5.10 or higher.`<br>```$empty_input``= true;`<br>```GFCommon::log_debug(``__METHOD__``.``"(): Empty input: {$field->id}.{$input_number}"``);`<br>```}`<br>```}`<br>```if``(``$empty_input``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``empty``(``$field``->errorMessage ) ?``'This field is required. Please enter at least a street, city, and state.'``:``$field``->errorMessage;`<br>```}``else``{`<br>```$result``[``'is_valid'``] = true;`<br>```$result``[``'message'``]  =``''``;`<br>```}`<br>```}`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Returning validation result.'``);`<br>```return``$result``;`<br>`}` |

This example validates the zip input of field 1 on form 2.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19 | `add_filter(``'gform_field_validation_2_1'``,``'custom_zip_validation'``, 10, 4 );`<br>`function``custom_zip_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$result``[``'is_valid'``] ) {`<br>```$acceptable_zips``=``array``(`<br>```'123'``,`<br>```'456'``,`<br>```);`<br>```$zip_value``= rgar(``$value``,``$field``->id .``'.5'``);`<br>```if``( ! in_array(``$zip_value``,``$acceptable_zips``) ) {`<br>```$field``->set_input_validation_state( 5, false );``// Only for Gravity Forms 2.5.10 or higher.`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Zip validation failed.'``;`<br>```}`<br>```}`<br>```return``$result``;`<br>`}` |

### Name field validation

This example validates all the Name field inputs which are not hidden, the default validation only requires the first and last inputs.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``'name'``===``$field``->type &&``$field``->isRequired ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Running.'``);`<br>```// Input values.`<br>```$prefix``= rgar(``$value``,``$field``->id .``'.2'``);`<br>```$first``= rgar(``$value``,``$field``->id .``'.3'``);`<br>```$middle``= rgar(``$value``,``$field``->id .``'.4'``);`<br>```$last``= rgar(``$value``,``$field``->id .``'.6'``);`<br>```$suffix``= rgar(``$value``,``$field``->id .``'.8'``);`<br>```$name_field``=``array``(``'2'``=>``$prefix``,``'3'``=>``$first``,``'4'``=>``$middle``,``'6'``=>``$last``,``'8'``=>``$suffix``);`<br>```foreach``(``$name_field``as``$input_number``=>``$input_value``) {`<br>```if``(``empty``(``$input_value``) && !``$field``->get_input_property(``$input_number``,``'isHidden'``) ) {`<br>```$field``->set_input_validation_state(``$input_number``, false );``// Only for Gravity Forms 2.5.10 or higher.`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``empty``(``$field``->errorMessage ) ? __(``'This field is required. Please enter a complete name.'``,``'gravityforms'``) :``$field``->errorMessage;`<br>```GFCommon::log_debug(``__METHOD__``.``"(): Empty input: {$field->id}.{$input_number}"``);`<br>```}`<br>```}`<br>```}`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Returning validation result.'``);`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Compare value against another field

This example validates field 2 to make sure the value does not match field 1.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10 | `// The add_filter line below targets field id 2 in a form that has id 10.`<br>`add_filter(``'gform_field_validation_10_2'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```$master``= rgpost(``'input_1'``);``// Change 1 to the id of the other field.`<br>```if``(``$result``[``'is_valid'``] &&``$value``==``$master``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Please enter a different email.'``;`<br>```}`<br>``<br>```return``$result``;`<br>`}, 10, 4 );` |

### Phone field validation

This example shows how you can use regex to validate the value of phone field.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10 | `add_filter(``'gform_field_validation'``,``'validate_phone'``, 10, 4 );`<br>`function``validate_phone(``$result``,``$value``,``$form``,``$field``) {`<br>```$pattern``=``"/^(\+44\s?7\d{3}|\(?07\d{3}\)|\(?01\d{3}\)?)\s?\d{3}\s?\d{3}$/"``;`<br>```if``(``$field``->type ==``'phone'``&&``$field``->phoneFormat !=``'standard'``&& ! preg_match(``$pattern``,``$value``) &&``$value``!=``''``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Please enter a valid phone number'``;`<br>```}`<br>``<br>```return``$result``;`<br>`}` |

### Time field validation

This example validates field 2 in form 1 to check that time is between two set times (12 hour time format).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15 | `add_filter(``'gform_field_validation_1_2'``,``'validate_time'``, 10, 4 );`<br>`function``validate_time(``$result``,``$value``,``$form``,``$field``) {`<br>```//convert the entire time field array into a string, separating values with colons`<br>```$input_time``= implode(``':'``,``$value``);`<br>```//replace colon between the time and am/pm with space and convert strings into a unix timestamp`<br>```$time``=``strtotime``( substr_replace(``$input_time``,``' '``, -3, 1 ) );`<br>```$max_time``=``strtotime``(``'17:00'``);`<br>```$min_time``=``strtotime``(``'09:00'``);`<br>``<br>```if``(``$time``<``$min_time``OR``$time``>``$max_time``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``] =``'Please select a time between 09:00 am and 05:00 pm'``;`<br>```}`<br>```return``$result``;`<br>`}` |

### Check if email is on Mailchimp list

The following example shows how you return an error if the email is already on a Mailchimp list.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``( ! function_exists(``'gf_mailchimp'``) ||``$field``->get_input_type() !==``'email'``|| ! rgar(``$result``,``'is_valid'``) || ! gf_mailchimp()->initialize_api() ) {`<br>```return``$result``;`<br>```}`<br>```gf_mailchimp()->log_debug(``'gform_field_validation: running.'``);`<br>```$entry``= GFFormsModel::get_current_lead();`<br>```$feed``= gf_mailchimp()->get_single_submission_feed_by_form(``$form``,``$entry``);`<br>```$member``= gf_mailchimp()->get_existing_member(``$value``,``$feed``,``$entry``,``$form``);`<br>```if``( is_wp_error(``$member``) ) {`<br>```return``$result``;`<br>```}`<br>```$member_status``= rgar(``$member``,``'status'``);`<br>```gf_mailchimp()->log_debug(``'gform_field_validation: member status => '``. print_r(``$member_status``, 1 ) );`<br>```if``(``$member_status``==``'subscribed'``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``empty``(``$field``->errorMessage ) ?``'This address is already on the list.'``:``$field``->errorMessage;`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Date field validation

The following example shows how you override the default validation when using a custom date format.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15 | `add_filter(``'gform_field_validation'``,``'custom_date_validation'``, 10, 4 );`<br>`function``custom_date_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```if``( !``$result``[``'is_valid'``] &&``$field``->get_input_type() ==``'date'``) {`<br>```$date``= GFCommon::parse_date(``$value``);`<br>``<br>```if``( ! GFCommon::is_empty_array(``$date``) &&``checkdate``(``$date``[``'month'``],``$date``[``'day'``],``$date``[``'year'``] ) ) {`<br>```$result``[``'is_valid'``] = true;`<br>```$result``[``'message'``]  =``''``;`<br>```}``else``{`<br>```$result``[``'message'``] =``'Please enter a valid date.'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}` |

### Product field quantity validation

The following example shows how you perform custom validation of the product field quantity input. This example is validating that the quantity input of field 1 on form 10 contains a value less than 10.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11 | `add_filter(``'gform_field_validation_10_1'``,``'product_quantity_validation'``, 10, 4 );`<br>`function``product_quantity_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```$quantity``=``intval``( rgar(``$value``,``$field``->id .``'.3'``) );`<br>``<br>```if``(``$result``[``'is_valid'``] &&``$quantity``> 10 ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Please enter a value less than 10'``;`<br>```}`<br>``<br>```return``$result``;`<br>`}` |

### Email validation by third-party API

The following example shows how you can send the value of an Email type field to a third-party API to determine if the email is valid. In this example, we are using the [QuickEmailVerification API](http://docs.quickemailverification.com/email-verification-api/kick-start-with-email-validation-api).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$field``->get_input_type() ===``'email'``&&``$result``[``'is_valid'``] ) {`<br>```$request_url``= add_query_arg(`<br>```array``(`<br>```'email'``=>``$value``,`<br>```'apikey'``=>``'your_api_key_here'``,`<br>```),`<br>```'http://api.quickemailverification.com/v1/verify'`<br>```);`<br>``<br>```$response``= wp_remote_get(``$request_url``);`<br>```$response_json``= wp_remote_retrieve_body(``$response``);`<br>```$response_array``= json_decode(``$response_json``, 1 );`<br>``<br>```if``( rgar(``$response_array``,``'result'``) !==``'valid'``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Email is invalid'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}, 10, 4 );` |

**Note**: If you are using the email confirmation feature (by checking the “Enable Email Confirmation” box), `$value` will be an array containing the values of both inputs. To access the email address, you’ll need to change this line in the code above:

`'email' => $value,`

to this:

`'email' => rgar( $value, 0 ),`

### Multiple emails in one field

The following example shows how you can override the default validation of a text field to validate multiple comma separated emails. Add `multiple-emails` to the Custom CSS Class setting on the Appearance panel of the field settings.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``( !``$result``[``'is_valid'``] ||``$field``->get_input_type() !==``'text'``||``strpos``(``$field``->cssClass,``'multiple-emails'``) === false ) {`<br>```return``$result``;`<br>```}`<br>```if``( ! GFCommon::is_valid_email_list(``$value``) ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'One or more email addresses entered are invalid, please check the formatting (e.g. email1@domain.com,email2@domain.com).'``;`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Date field – Age Validation

The following example shows how you can override the default validation of the date field to validate the age. In this case, we are validating field #2 on form #10 and returning an error if the supplied date is less than 18 years ago.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19 | `add_filter(``'gform_field_validation_10_2'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$result``[``'is_valid'``] ) {`<br>```if``(``is_array``(``$value``) ) {`<br>```$value``=``array_values``(``$value``);`<br>```}`<br>```$date_value``= GFFormsModel::prepare_date(``$field``->dateFormat,``$value``);`<br>``<br>```$today``=``new``DateTime();`<br>```$diff``=``$today``->diff(``new``DateTime(``$date_value``) );`<br>```$age``=``$diff``->y;`<br>``<br>```if``(``$age``< 18 ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Underage'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}, 10, 4 );` |

### Survey Rank field

The following example shows how you require the user to change the order of the choices in the rank type survey field.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$field``->get_input_type() ==``'rank'``) {`<br>```$choice_values``=``array``();`<br>```foreach``(``$field``->choices``as``$choice``) {`<br>```$choice_values``[] =``$choice``[``'value'``];`<br>```}`<br>``<br>```if``(``$value``== implode(``','``,``$choice_values``) ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Please rank the choices.'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}, 10, 4 );` |

### Multi-file Upload Minimum Count

The following example shows how you require the user to upload a minimum number of files for the multi-file enabled upload field, in this case **field 2** of **form 50**.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16 | `add_filter(``'gform_field_validation_50_2'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$field``->multipleFiles ) {`<br>```$input_name``=``'input_'``.``$field``->id;`<br>```$files``= isset( GFFormsModel::``$uploaded_files``[``$form``[``'id'``] ][``$input_name``] ) ? GFFormsModel::``$uploaded_files``[``$form``[``'id'``] ][``$input_name``] :``array``();`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $files content => '``. print_r(``$files``, true ) );`<br>```$count``=``count``(``$files``);`<br>```$min``= 2;`<br>```if``(``$result``[``'is_valid'``] &&``$count``<``$min``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``"Number of files is less than the minimum required ({$min})."``;`<br>```}`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Current User Password validation

The following example shows you how to validate the current user password for a password field or a text field with password input enabled for form 20.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13 | `add_filter(``'gform_field_validation_20'``,``'check_current_password'``, 10, 4 );`<br>`function``check_current_password(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$field``->type ===``'password'``|| (``$field``->get_input_type() ===``'text'``&&``$field``->enablePasswordInput ) ) {`<br>```$user``= wp_get_current_user();`<br>``<br>```if``(``empty``(``$value``) || ! wp_check_password(``addslashes``(``$value``),``$user``->data->user_pass,``$user``->ID ) ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Invalid current password. Please try again.'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}` |

### List field validation

The following example shows you how to require the user to fill all inputs of a list field, in this case field 1 of form 53.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33 | `// Require all inputs for a list field.`<br>``<br>`add_filter(``'gform_field_validation_53_1'``,``'validate_list_field'``, 10, 4 );`<br>`function``validate_list_field(``$result``,``$value``,``$form``,``$field``) {`<br>```if``(``$field``->type ==``'list'``) {`<br>``<br>```GFCommon::log_debug(``__METHOD__``.``'(): List Field: '``. print_r(``$value``, true ) );`<br>``<br>```foreach``(``$value``as``$row_values``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Row Value: '``. print_r(``$row_values``, true ) );`<br>``<br>```$column_1``= rgar(``$row_values``,``'Type'``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Column 1: '``. print_r(``$column_1``, true ) );`<br>``<br>```$column_2``= rgar(``$row_values``,``'Cost'``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Column 2: '``. print_r(``$column_2``, true ) );`<br>``<br>```$column_3``= rgar(``$row_values``,``'Frequency'``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Column 3: '``. print_r(``$column_3``, true ) );`<br>``<br>```if``(``empty``(``$column_1``) ||``empty``(``$column_2``) ||``empty``(``$column_3``) ) {`<br>```$has_empty_input``= true;`<br>```}`<br>```}`<br>``<br>```if``(``$has_empty_input``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'All inputs are required!'``;`<br>```}`<br>```}`<br>``<br>```return``$result``;`<br>`}` |

### Prevent submission based on a word list

The following example shows you how to prevent a submission if certain words are entered into any Single Line Text or Paragraph fields.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Running...'``);`<br>```// Only for Single Line Text and Paragraph fields.`<br>```if``(``'text'``===``$field``->type ||``'textarea'``===``$field``->type ) {`<br>```if``(``$result``[``'is_valid'``] ) {`<br>```$stop_words``=``array``(``// List of words to not allow in lowercase.`<br>```'viagra'``,`<br>```'porn'``,`<br>```'sidenafil'``,`<br>```);`<br>```// Trim and lowercase the input.`<br>```$lower_value``=``strtolower``( trim(``$value``) );`<br>``<br>```// Split the input into words.`<br>```$words``= preg_split(``'/\s+/'``,``$lower_value``);`<br>``<br>```// Check if there's only one word and if it's in the stop words list.`<br>```if``( 1 ===``count``(``$words``) && in_array(``$words``[0],``$stop_words``, true ) ) {`<br>```GFCommon::log_debug(``__METHOD__``.``"(): Stop word detected as the only word in field id {$field->id}. Stop Word: {$words[0]}"``);`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Sorry, your submission contains a word that is not allowed.'``;`<br>```}``else``{`<br>```// Check if any stop word is part of the submitted text.`<br>```foreach``(``$stop_words``as``$stop_word``) {`<br>```if``( false !==``strpos``(``$lower_value``,``$stop_word``) ) {`<br>```GFCommon::log_debug(``__METHOD__``.``"(): Stop word detected in field id {$field->id}. Stop Word: {$stop_word}"``);`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``'Sorry, your submission contains a word that is not allowed.'``;`<br>```break``;`<br>```}`<br>```}`<br>```}`<br>```}`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Prevent use of passwords exposed in data breaches

The following example shows how you can use the [Pwned Passwords API](https://haveibeenpwned.com/API/v3#PwnedPasswords) from [https://haveibeenpwned.com/](https://haveibeenpwned.com/) to check if the submitted password is vulnerable to credential stuffing attacks.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41 | `add_filter(``'gform_field_validation'``,``'check_pwnedpasswords'``, 60, 4 );`<br>`function``check_pwnedpasswords(``$result``,``$value``,``$form``,``$field``) {`<br>```// Return early if there is no value, the value already failed validation, or it's the wrong field.`<br>```if``(``empty``(``$value``) ||``empty``(``$result``[``'is_valid'``] ) || ! (``$field``->type ===``'password'``|| (``$field``->get_input_type() ===``'text'``&&``$field``->enablePasswordInput ) ) ) {`<br>```return``$result``;`<br>```}`<br>```// Hash the value.`<br>```$hash``= sha1(``$value``);`<br>```// Get the first 5 characters of the hash.`<br>```$prefix``=``substr``(``$hash``, 0, 5 );`<br>```// Send the hash prefix to the API.`<br>```$response``= wp_remote_get(``'https://api.pwnedpasswords.com/range/'``.``$prefix``);`<br>```// Return early if the request fails.`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```return``$result``;`<br>```}`<br>```// Get the hash with the first 5 characters removed.`<br>```$suffix``=``substr``(``$hash``, 5 );`<br>```// Return early if the hash suffix isn't found in the response body.`<br>```if``( ! preg_match(``"/{$suffix}:(\d+)/i"``, wp_remote_retrieve_body(``$response``),``$matches``) ) {`<br>```return``$result``;`<br>```}`<br>```// Get the number of times the password has been found in breach data.`<br>```$count``=``intval``(``$matches``[1] );`<br>```// Fail validation if the count is greater than zero.`<br>```if``(``$count``> 0 ) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  = sprintf(``'Please enter a different password. This password has been found in a data breach. Visit %sHave I Been Pwned (HIBP)%s for more details.'``,``'<a href="https://haveibeenpwned.com/Passwords" target="_blank">'``,``'</a>'``);`<br>```GFCommon::log_debug(``__METHOD__``. sprintf(``'(): Password found in haveibeenpwned.com breach data for field #%d(%s - %s).'``,``$field``->id,``$field``->label,``$field``->type ) );`<br>```}`<br>```return``$result``;`<br>`}` |

### Prevent submission if a URL is entered into Text or Paragraph fields

The following example shows you how to prevent a submission if a URL is entered into any Single Line Text or Paragraph fields.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```// Only for Single Line Text or Paragraph fields.`<br>```if``(``$field``->type ==``'text'``||``$field``->type ==``'textarea'``) {`<br>```$has_url``= false;`<br>```// The following regex is just an example, feel free to change it.`<br>```if``( preg_match (``'/www\.|http:|https:\/\/[a-z0-9_]+([\-\.]{1}[a-z_0-9]+)*\.[_a-z]{2,5}'``.``'((:[0-9]{1,5})?\/.*)?$/i'``,``$value``) ) {`<br>```$has_url``= true;`<br>```}`<br>```if``( true ===``$has_url``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  =``empty``(``$field``->errorMessage ) ?``'Sorry, URL not allowed!'``:``$field``->errorMessage;`<br>```}`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

### Prevent submission of Cyrillic characters

The following example shows you how to prevent a submission if Cyrillic characters are entered into any **Single Line Text or Paragraph** fields. If you want to apply this validation to any field type, just remove the if statement at the start of the snippet.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18 | `add_filter(``'gform_field_validation'``,``'gf_cyrillic_validation'``, 10, 4 );`<br>`function``gf_cyrillic_validation(``$result``,``$value``,``$form``,``$field``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): running for field type '``.``$field``->type );`<br>```if``(``'text'``!==``$field``->type &&``'textarea'``!==``$field``->type ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): No text or paragraph field.'``);`<br>```return``$result``;`<br>```}`<br>``<br>```// Cyrillic check.`<br>```$cyrillic``= preg_match(``'/[\p{Cyrillic}]/u'``,``$value``);`<br>``<br>```if``(``$result``[``'is_valid'``] &&``$cyrillic``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Cyrillic detected!'``);`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``] =``'Data entered not allowed.'``;`<br>```}`<br>```return``$result``;`<br>`}` |

### Validate uploaded files

The following example shows how you can perform custom validation of uploaded files. This approach works with both the single and multi-file enabled field with Gravity Forms 2.8.6 and newer.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36 | `add_filter(``'gform_field_validation'``,``function``(``$result``,``$value``,``$form``,``$field``) {`<br>```if``( ! rgar(``$result``,``'is_valid'``) ||``$field``->get_input_type() !==``'fileupload'``) {`<br>```return``$result``;`<br>```}`<br>```$draft_entry_value``= rgar( GFFormsModel::get_current_lead(``$form``),``$field``->id );`<br>```$files``=``empty``(``$draft_entry_value``) ? null : json_decode(``$draft_entry_value``, true );`<br>```if``(``empty``(``$files``) ) {`<br>```return``$result``;`<br>```}`<br>```foreach``(``$files``as``$file``) {`<br>```$tmp_path``= rgar(``$file``,``'tmp_path'``);`<br>```if``( !``empty``(``$tmp_path``) && !``file_exists``(``$tmp_path``) ) {`<br>```// The file hasn't been moved to the form-specific tmp folder yet, using the original in the PHP tmp folder instead.`<br>```$tmp_path``= rgars(``$_FILES``, sprintf(``'input_%d/tmp_name'``,``$field``->id ) );`<br>```}`<br>```$tmp_url``= rgar(``$file``,``'tmp_url'``);`<br>```$tmp_name``= rgar(``$file``,``'tmp_name'``);`<br>```$uploaded_name``= rgar(``$file``,``'uploaded_name'``);`<br>```// Perform your custom file check here, setting $is_valid to true or false.`<br>```$is_valid``= true;`<br>```if``( !``$is_valid``) {`<br>```$result``[``'is_valid'``] = false;`<br>```$result``[``'message'``]  = sprintf(``'%s is not a valid file.'``,``$uploaded_name``);`<br>```return``$result``;`<br>```}`<br>```}`<br>```return``$result``;`<br>`}, 10, 4 );` |

## Placement

This code can be used in the [functions.php](https://developer.wordpress.org/themes/basics/theme-functions/) file of the active theme, a custom functions plugin, a custom add-on, or with a code snippets plugin.

See also the PHP section in this article: [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/)

## Source Code

As of Gravity Forms 2.7 this filter is located in `GFFormDisplay::validate_field()` in _form\_display.php_. It was previously located in `GFFormDisplay::validate()`.

- Company


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: January 16, 2025

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_field_validation/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)