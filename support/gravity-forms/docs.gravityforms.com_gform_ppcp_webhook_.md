---
url: "https://docs.gravityforms.com/gform_ppcp_webhook/"
title: "gform_ppcp_webhook - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)      - [Add-On Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/addon-framework-filters/)
      - [Add-On Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/)        - [2Checkout Add-On](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/2checkout-add-on-filters-addons/)
        - [Active Campaign Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/activecampaign-filters/)
        - [Advanced Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/advanced-post-creation-filters/)
        - [Agile CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/agile-crm-filters/)
        - [Akismet Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/akismet-filters/)
        - [Authorize.net Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/authorize-net-filters/)
        - [AWeber Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/aweber-filters/)
        - [Breeze Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/breeze-filters/)
        - [Brevo Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/brevo-filters/)
        - [Campaign Monitor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/campaign-monitor-filters/)
        - [Capsule CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/capsule-crm-filters/)
        - [Chained Selects Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/chained-selects-filters/)
        - [CleverReach Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/cleverreach-filters/)
        - [Conversational Forms Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/conversational-forms-filters/)
        - [Constant Contact Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/constant-contact-filters/)
        - [Coupons Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/coupons-filters/)
        - [Dropbox Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/dropbox-filters/)
        - [EmailOctopus Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/emailoctopus-filters/)
        - [Emma Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/emma-filters/)
        - [FreshBooks Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/freshbooks-filters/)
        - [Geolocation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/geolocation-filters/)
        - [GetResponse Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/getresponse-filters/)
        - [Google Analytics Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hooks-google-analytics-filters/)
        - [Help Scout Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/help-scout-filters/)
        - [HipChat Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hipchat-filters/)
        - [HubSpot Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hubspot-hooks-filters/)
        - [iContact Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/icontact-filters/)
        - [Kit Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/kit-filters/)
        - [Mad Mimi Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mad-mimi-filters/)
        - [Mailchimp Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailchimp-filters/)
        - [MailerLite Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailerlite-filters/)
        - [Mailgun Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailgun-filters/)
        - [Moderation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/moderation-filters/)
        - [Mollie Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mollie-filters/)
        - [Partial Entries Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/partial-entries-filters/)
        - [Paypal Checkout Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-checkout-filters/)          - [gform\_ppcp\_authorization\_only](https://docs.gravityforms.com/gform_ppcp_authorization_only/ "gform_ppcp_authorization_only")
          - [gform\_ppcp\_card\_style](https://docs.gravityforms.com/gform_ppcp_card_style/ "gform_ppcp_card_style")
          - [gform\_ppcp\_disable\_funding](https://docs.gravityforms.com/gform_ppcp_disable_funding/ "gform_ppcp_disable_funding")
          - [gform\_ppcp\_discount\_total](https://docs.gravityforms.com/gform_ppcp_discount_total/ "gform_ppcp_discount_total")
          - [gform\_ppcp\_enable\_funding](https://docs.gravityforms.com/gform_ppcp_enable_funding/ "gform_ppcp_enable_funding")
          - [gform\_ppcp\_entry\_not\_found\_status\_code](https://docs.gravityforms.com/gform_ppcp_entry_not_found_status_code/ "gform_ppcp_entry_not_found_status_code")
          - [gform\_ppcp\_intent](https://docs.gravityforms.com/gform_ppcp_intent/ "gform_ppcp_intent")
          - [gform\_ppcp\_object](https://docs.gravityforms.com/gform_ppcp_object/ "gform_ppcp_object")
          - [gform\_ppcp\_webhook](https://docs.gravityforms.com/gform_ppcp_webhook/ "gform_ppcp_webhook")
          - [PayPal Checkout Feed Meta](https://docs.gravityforms.com/paypal-checkout-feed-meta/ "PayPal Checkout Feed Meta")
        - [PayPal Payments Pro Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-payments-pro-filters/)
        - [PayPal Standard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-standard-filters/)
        - [Polls Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/polls-filters/)
        - [Postmark Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/postmark-filters/)
        - [Quiz Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/quiz-filters/)
        - [reCAPTCHA Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/recaptcha-filters/)
        - [Salesforce Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/salesforce-filters/)
        - [SendGrid Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/sendgrid-filters/)
        - [Signature Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/signature-filters/)
        - [Slack Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/slack-filters/)
        - [Square Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/square-filters/)
        - [Stripe Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/stripe-filters/)
        - [Trello Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/trello-filters/)
        - [Turnstile Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/turnstile-filters/)
        - [Twilio Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/twilio-filters/)
        - [User Registration Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/user-registration-filters/)
        - [Webhooks Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/webhooks-filters/)
        - [Zapier Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/zapier-filters/)
        - [Zoho CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/zoho-crm-filters/)
      - [Admin Dashboard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/admin-dashboard-filters/)
      - [Calculation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/calculation-filters/)
      - [Conditional Logic Filters](https://docs.gravityforms.com/category/developers/hooks/filters/conditional-logic-filters/)
      - [Confirmation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/confirmation-filters/)
      - [Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/editor-filters/)
      - [Entry List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-list-filters/)
      - [Entry Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-filters/)
      - [Field Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-filters/)
      - [Field Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-framework-filters/)
      - [Form Component Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-component-filters/)
      - [Form List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-list/)
      - [Form Object Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-object/)
      - [Form Settings Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-settings-filters/)
      - [Import/Export Filters](https://docs.gravityforms.com/category/developers/hooks/filters/importexport-filters/)
      - [Logging Filters](https://docs.gravityforms.com/category/developers/hooks/filters/logging/)
      - [Merge Tag Filters](https://docs.gravityforms.com/category/developers/hooks/filters/merge-tags/)
      - [Notification Filters](https://docs.gravityforms.com/category/developers/hooks/filters/notification-filters/)
      - [Payment Filters](https://docs.gravityforms.com/category/developers/hooks/filters/payment/)
      - [Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/post-creation/)
      - [REST API v1 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v1/)
      - [REST API v2 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v2/)
      - [Rich Text Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rich-text-editor/)
      - [Save and Continue Filters](https://docs.gravityforms.com/category/developers/hooks/filters/save-and-continue/)
      - [Script Filters](https://docs.gravityforms.com/category/developers/hooks/filters/script-filters/)
      - [Styling/Theme/CSS Filters](https://docs.gravityforms.com/category/developers/hooks/filters/styling-filters/)
      - [System Status Filters](https://docs.gravityforms.com/category/developers/hooks/filters/system-status/)
      - [Upload Filters](https://docs.gravityforms.com/category/developers/hooks/filters/upload-filters/)
      - [Validation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/validation/)
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_ppcp\_webhook

- [Description](https://docs.gravityforms.com/gform_ppcp_webhook/#h-description)
- [Usage](https://docs.gravityforms.com/gform_ppcp_webhook/#h-usage)
- [Examples](https://docs.gravityforms.com/gform_ppcp_webhook/#h-examples)
- [Add a note](https://docs.gravityforms.com/gform_ppcp_webhook/#h-add-a-note)
- [Process the PAYMENT.CAPTURE.DECLINED event](https://docs.gravityforms.com/gform_ppcp_webhook/#h-process-the-payment-capture-declined-event)
- [Placement](https://docs.gravityforms.com/gform_ppcp_webhook/#h-placement)
- [Source Code](https://docs.gravityforms.com/gform_ppcp_webhook/#h-source-code)

## Description

The gform\_ppcp\_webhook filter can be used to customize the webhook events processed by the Gravity Forms PayPal Checkout Add-On. The following event types are supported by default.

Product and Services:

- PAYMENT.CAPTURE.REFUNDED
- PAYMENT.AUTHORIZATION.VOIDED
- PAYMENT.CAPTURE.COMPLETED
- PAYMENT.CAPTURE.DENIED

Subscriptions:

- PAYMENT.SALE.COMPLETED
- BILLING.SUBSCRIPTION.PAYMENT.FAILED
- BILLING.SUBSCRIPTION.CANCELLED
- BILLING.SUBSCRIPTION.EXPIRED

See the [PayPal API Reference](https://developer.paypal.com/docs/integration/direct/webhooks/event-names/) for a full list of event types for which webhooks can be sent.

## Usage

The hook which would run for all PayPal Checkout feeds can be used like so:

|     |
| --- |
| `add_filter(``'gform_ppcp_webhook'``,``'your_function_name'``, 10, 2 );` |

## Parameters

- **$action** [array](https://docs.gravityforms.com/array)
An associative array containing the event details or an empty array for unsupported event types.


```
array(
          'type'             => '',
          'amount'           => '',
          'transaction_type' => '',
          'transaction_id'   => '',
          'subscription_id'  => '',
          'entry_id'         => '',
          'payment_status'   => '',
          'note'             => '',
);
```

- **$event** [array](https://docs.gravityforms.com/array)

The PayPal Checkout event object for the webhook which was received. See the [PayPal API Reference](https://developer.paypal.com/docs/integration/direct/webhooks/event-names/) for details about the event properties.


## Examples

### Add a note

The following shows how you can add a custom note when an authorization is cancelled (voided).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8 | `add_filter(``'gform_ppcp_webhook'``,``'ppcp_webhook_action_note'``, 10, 2 );`<br>`function``ppcp_webhook_action_note(``$action``,``$event``) {`<br>```if``( rgar(``$event``,``'event_type'``) ===``'PAYMENT.AUTHORIZATION.VOIDED'``) {`<br>```$action``[``'note'``] = sprintf(``'Authorization has been cancelled (voided). Transaction Id: %s'``, rgar(``$action``,``'transaction_id'``) );`<br>```}`<br>```return``$action``;`<br>`}` |

### Process the PAYMENT.CAPTURE.DECLINED event

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17 | `add_filter(``'gform_ppcp_webhook'``,``function``(``$action``,``$event``) {`<br>```if``( rgar(``$event``,``'event_type'``) !==``'PAYMENT.CAPTURE.DECLINED'``||``empty``(``$action``[``'entry_id'``] ) ) {`<br>```return``$action``;`<br>```}`<br>```$entry``= GFAPI::get_entry(``$action``[``'entry_id'``] );`<br>```$payment_status``= rgar(``$entry``,``'payment_status'``);`<br>```if``( ! in_array(``$payment_status``,``array``(``'Authorized'``,``'Pending'``) ) ) {`<br>```return``$action``;`<br>```}`<br>```$action``[``'note'``]   = sprintf(``'Payment declined. Transaction Id: %s'``, rgar(``$action``,``'transaction_id'``) );`<br>```$action``[``'type'``]   =``'fail_payment'``;`<br>```$action``[``'amount'``] = gf_ppcp()->get_amount_import( rgars(``$event``,``'resource/amount/value'``), rgar(``$entry``,``'currency'``) );`<br>```return``$action``;`<br>`}, 10, 2 );` |

## Placement

Your code snippet should be placed in the [functions.php](https://codex.wordpress.org/Theme_Development#Functions_File) file of your active theme.

## Source Code

|     |
| --- |
| `$action``= apply_filters(``'gform_ppcp_webhook'``,``$action``,``$event``);` |

This hook is located in GF\_PPCP::callback() in _class-gf-ppcp.php_.

- URL


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: April 3, 2023

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_ppcp_webhook/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)