---
url: "https://docs.gravityforms.com/gform_stripe_session_data/"
title: "gform_stripe_session_data - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)      - [Add-On Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/addon-framework-filters/)
      - [Add-On Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/)        - [2Checkout Add-On](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/2checkout-add-on-filters-addons/)
        - [Active Campaign Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/activecampaign-filters/)
        - [Advanced Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/advanced-post-creation-filters/)
        - [Agile CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/agile-crm-filters/)
        - [Akismet Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/akismet-filters/)
        - [Authorize.net Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/authorize-net-filters/)
        - [AWeber Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/aweber-filters/)
        - [Breeze Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/breeze-filters/)
        - [Brevo Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/brevo-filters/)
        - [Campaign Monitor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/campaign-monitor-filters/)
        - [Capsule CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/capsule-crm-filters/)
        - [Chained Selects Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/chained-selects-filters/)
        - [CleverReach Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/cleverreach-filters/)
        - [Conversational Forms Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/conversational-forms-filters/)
        - [Constant Contact Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/constant-contact-filters/)
        - [Coupons Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/coupons-filters/)
        - [Dropbox Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/dropbox-filters/)
        - [EmailOctopus Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/emailoctopus-filters/)
        - [Emma Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/emma-filters/)
        - [FreshBooks Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/freshbooks-filters/)
        - [Geolocation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/geolocation-filters/)
        - [GetResponse Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/getresponse-filters/)
        - [Google Analytics Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hooks-google-analytics-filters/)
        - [Help Scout Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/help-scout-filters/)
        - [HipChat Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hipchat-filters/)
        - [HubSpot Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/hubspot-hooks-filters/)
        - [iContact Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/icontact-filters/)
        - [Kit Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/kit-filters/)
        - [Mad Mimi Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mad-mimi-filters/)
        - [Mailchimp Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailchimp-filters/)
        - [MailerLite Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailerlite-filters/)
        - [Mailgun Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mailgun-filters/)
        - [Moderation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/moderation-filters/)
        - [Mollie Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/mollie-filters/)
        - [Partial Entries Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/partial-entries-filters/)
        - [Paypal Checkout Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-checkout-filters/)
        - [PayPal Payments Pro Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-payments-pro-filters/)
        - [PayPal Standard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/paypal-standard-filters/)
        - [Polls Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/polls-filters/)
        - [Postmark Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/postmark-filters/)
        - [Quiz Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/quiz-filters/)
        - [reCAPTCHA Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/recaptcha-filters/)
        - [Salesforce Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/salesforce-filters/)
        - [SendGrid Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/sendgrid-filters/)
        - [Signature Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/signature-filters/)
        - [Slack Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/slack-filters/)
        - [Square Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/square-filters/)
        - [Stripe Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/stripe-filters/)          - [gform\_card\_details](https://docs.gravityforms.com/gform_card_details/ "gform_card_details")
          - [gform\_stripe\_api\_mode](https://docs.gravityforms.com/gform_stripe_api_mode/ "gform_stripe_api_mode")
          - [gform\_stripe\_cancel\_url](https://docs.gravityforms.com/gform_stripe_cancel_url/ "gform_stripe_cancel_url")
          - [gform\_stripe\_charge\_authorization\_only](https://docs.gravityforms.com/gform_stripe_charge_authorization_only/ "gform_stripe_charge_authorization_only")
          - [gform\_stripe\_charge\_description](https://docs.gravityforms.com/gform_stripe_charge_description/ "gform_stripe_charge_description")
          - [gform\_stripe\_charge\_pre\_create](https://docs.gravityforms.com/gform_stripe_charge_pre_create/ "gform_stripe_charge_pre_create")
          - [gform\_stripe\_checkout\_options](https://docs.gravityforms.com/gform_stripe_checkout_options/ "gform_stripe_checkout_options")
          - [gform\_stripe\_checkout\_payment\_methods](https://docs.gravityforms.com/gform_stripe_checkout_payment_methods/ "gform_stripe_checkout_payment_methods")
          - [gform\_stripe\_checkout\_supported\_cards](https://docs.gravityforms.com/gform_stripe_checkout_supported_cards/ "gform_stripe_checkout_supported_cards")
          - [gform\_stripe\_connect\_enabled](https://docs.gravityforms.com/gform_stripe_connect_enabled/ "gform_stripe_connect_enabled")
          - [gform\_stripe\_customer\_after\_create](https://docs.gravityforms.com/gform_stripe_customer_after_create/ "gform_stripe_customer_after_create")
          - [gform\_stripe\_customer\_id](https://docs.gravityforms.com/gform_stripe_customer_id/ "gform_stripe_customer_id")
          - [gform\_stripe\_discounted\_line\_items\_name](https://docs.gravityforms.com/gform_stripe_discounted_line_items_name/ "gform_stripe_discounted_line_items_name")
          - [gform\_stripe\_elements\_classes](https://docs.gravityforms.com/gform_stripe_elements_classes/ "gform_stripe_elements_classes")
          - [gform\_stripe\_elements\_style](https://docs.gravityforms.com/gform_stripe_elements_style/ "gform_stripe_elements_style")
          - [gform\_stripe\_enable\_rate\_limits](https://docs.gravityforms.com/gform_stripe_enable_rate_limits/ "gform_stripe_enable_rate_limits")
          - [gform\_stripe\_entry\_not\_found\_status\_code](https://docs.gravityforms.com/gform_stripe_entry_not_found_status_code/ "gform_stripe_entry_not_found_status_code")
          - [gform\_stripe\_field\_value](https://docs.gravityforms.com/gform_stripe_field_value/ "gform_stripe_field_value")
          - [gform\_stripe\_fulfillment](https://docs.gravityforms.com/gform_stripe_fulfillment/ "gform_stripe_fulfillment")
          - [gform\_stripe\_no\_subscriptions\_found\_message](https://docs.gravityforms.com/gform_stripe_no_subscriptions_found_message/ "gform_stripe_no_subscriptions_found_message")
          - [gform\_stripe\_object](https://docs.gravityforms.com/gform_stripe_object/ "gform_stripe_object")
          - [gform\_stripe\_payment\_element\_authorization\_only](https://docs.gravityforms.com/gform_stripe_payment_element_authorization_only/ "gform_stripe_payment_element_authorization_only")
          - [gform\_stripe\_payment\_element\_initial\_payment\_information](https://docs.gravityforms.com/gform_stripe_payment_element_initial_payment_information/ "gform_stripe_payment_element_initial_payment_information")
          - [gform\_stripe\_payment\_element\_payment\_methods](https://docs.gravityforms.com/gform_stripe_payment_element_payment_methods/ "gform_stripe_payment_element_payment_methods")
          - [gform\_stripe\_payment\_element\_subscriptions\_automatic\_charge\_methods](https://docs.gravityforms.com/gform_stripe_payment_element_subscriptions_automatic_charge_methods/ "gform_stripe_payment_element_subscriptions_automatic_charge_methods")
          - [gform\_stripe\_payment\_element\_updated\_payment\_information](https://docs.gravityforms.com/gform_stripe_payment_element_updated_payment_information/ "gform_stripe_payment_element_updated_payment_information")
          - [gform\_stripe\_payment\_intent\_pre\_create](https://docs.gravityforms.com/gform_stripe_payment_intent_pre_create/ "gform_stripe_payment_intent_pre_create")
          - [gform\_stripe\_post\_include\_api](https://docs.gravityforms.com/gform_stripe_post_include_api/ "gform_stripe_post_include_api")
          - [gform\_stripe\_sca\_success\_pre\_validation](https://docs.gravityforms.com/gform_stripe_sca_success_pre_validation/ "gform_stripe_sca_success_pre_validation")
          - [gform\_stripe\_session\_data](https://docs.gravityforms.com/gform_stripe_session_data/ "gform_stripe_session_data")
          - [gform\_stripe\_submission\_timeout\_seconds](https://docs.gravityforms.com/gform_stripe_submission_timeout_seconds/ "gform_stripe_submission_timeout_seconds")
          - [gform\_stripe\_subscription\_cancel\_at\_period\_end](https://docs.gravityforms.com/gform_stripe_subscription_cancel_at_period_end/ "gform_stripe_subscription_cancel_at_period_end")
          - [gform\_stripe\_subscription\_params\_pre\_update\_customer](https://docs.gravityforms.com/gform_stripe_subscription_params_pre_update_customer/ "gform_stripe_subscription_params_pre_update_customer")
          - [gform\_stripe\_subscriptions\_self\_serve\_markup](https://docs.gravityforms.com/gform_stripe_subscriptions_self_serve_markup/ "gform_stripe_subscriptions_self_serve_markup")
          - [gform\_stripe\_success\_url](https://docs.gravityforms.com/gform_stripe_success_url/ "gform_stripe_success_url")
          - [gform\_stripe\_url\_port](https://docs.gravityforms.com/gform_stripe_url_port/ "gform_stripe_url_port")
          - [gform\_stripe\_webhook](https://docs.gravityforms.com/gform_stripe_webhook/ "gform_stripe_webhook")
          - [gform\_stripe\_webhook\_signing\_secret](https://docs.gravityforms.com/gform_stripe_webhook_signing_secret/ "gform_stripe_webhook_signing_secret")
          - [GFStripe](https://docs.gravityforms.com/gfstripe/ "GFStripe")
          - [Stripe Feed Meta](https://docs.gravityforms.com/stripe-feed-meta/ "Stripe Feed Meta")
        - [Trello Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/trello-filters/)
        - [Turnstile Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/turnstile-filters/)
        - [Twilio Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/twilio-filters/)
        - [User Registration Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/user-registration-filters/)
        - [Webhooks Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/webhooks-filters/)
        - [Zapier Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/zapier-filters/)
        - [Zoho CRM Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/zoho-crm-filters/)
      - [Admin Dashboard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/admin-dashboard-filters/)
      - [Calculation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/calculation-filters/)
      - [Conditional Logic Filters](https://docs.gravityforms.com/category/developers/hooks/filters/conditional-logic-filters/)
      - [Confirmation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/confirmation-filters/)
      - [Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/editor-filters/)
      - [Entry List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-list-filters/)
      - [Entry Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-filters/)
      - [Field Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-filters/)
      - [Field Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-framework-filters/)
      - [Form Component Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-component-filters/)
      - [Form List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-list/)
      - [Form Object Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-object/)
      - [Form Settings Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-settings-filters/)
      - [Import/Export Filters](https://docs.gravityforms.com/category/developers/hooks/filters/importexport-filters/)
      - [Logging Filters](https://docs.gravityforms.com/category/developers/hooks/filters/logging/)
      - [Merge Tag Filters](https://docs.gravityforms.com/category/developers/hooks/filters/merge-tags/)
      - [Notification Filters](https://docs.gravityforms.com/category/developers/hooks/filters/notification-filters/)
      - [Payment Filters](https://docs.gravityforms.com/category/developers/hooks/filters/payment/)
      - [Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/post-creation/)
      - [REST API v1 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v1/)
      - [REST API v2 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v2/)
      - [Rich Text Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rich-text-editor/)
      - [Save and Continue Filters](https://docs.gravityforms.com/category/developers/hooks/filters/save-and-continue/)
      - [Script Filters](https://docs.gravityforms.com/category/developers/hooks/filters/script-filters/)
      - [Styling/Theme/CSS Filters](https://docs.gravityforms.com/category/developers/hooks/filters/styling-filters/)
      - [System Status Filters](https://docs.gravityforms.com/category/developers/hooks/filters/system-status/)
      - [Upload Filters](https://docs.gravityforms.com/category/developers/hooks/filters/upload-filters/)
      - [Validation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/validation/)
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_stripe\_session\_data

- [Description](https://docs.gravityforms.com/gform_stripe_session_data/#h-description)
- [Usage](https://docs.gravityforms.com/gform_stripe_session_data/#h-usage)
- [Parameters](https://docs.gravityforms.com/gform_stripe_session_data/#h-parameters)
- [Example](https://docs.gravityforms.com/gform_stripe_session_data/#h-example)
- [Show product images on the checkout page with the Image Choices add-on](https://docs.gravityforms.com/gform_stripe_session_data/#h-show-product-images-on-the-checkout-page-with-the-image-choices-add-on)
- [Add the statement\_descriptor property](https://docs.gravityforms.com/gform_stripe_session_data/#h-add-the-statement-descriptor-property)
- [Add additional payment method types](https://docs.gravityforms.com/gform_stripe_session_data/#h-add-additional-payment-method-types)
- [Send metadata before the entry is saved](https://docs.gravityforms.com/gform_stripe_session_data/#h-send-metadata-before-the-entry-is-saved)
- [Save payment method for future usage](https://docs.gravityforms.com/gform_stripe_session_data/#h-save-payment-method-for-future-usage)
- [Remove customer\_creation when customer has already been created](https://docs.gravityforms.com/gform_stripe_session_data/#h-remove-customer-creation-when-customer-has-already-been-created)
- [Placement](https://docs.gravityforms.com/gform_stripe_session_data/#h-placement)
- [Since](https://docs.gravityforms.com/gform_stripe_session_data/#h-since)
- [Source Code](https://docs.gravityforms.com/gform_stripe_session_data/#h-source-code)

## Description

Used to set or update product or subscription data before creating the Stripe Checkout session in Stripe. Can be used to add product images.

## Usage

|     |     |
| --- | --- |
| 1 | `$session_data``= apply_filters(``'gform_stripe_session_data'``,``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``);` |

## Parameters

- **$session\_data** [array](https://docs.gravityforms.com/array)

Session data for creating the session. See the [Stripe documentation](https://stripe.com/docs/api/checkout/sessions/create) for supported arguments.
- **$feed** [array](https://docs.gravityforms.com/array)

The feed object currently being processed.
- **$submission\_data** [array](https://docs.gravityforms.com/array)

The customer and transaction data.
- **$form** [array](https://docs.gravityforms.com/array)

The form object currently being processed.
- **$entry** [array](https://docs.gravityforms.com/array)

The entry object currently being processed.

## Example

### Show product images on the checkout page with the Image Choices add-on

The following snippet shows how to add product images to the Stripe Checkout page when using the Gravity Forms Image Choices add-on.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16 | `function``my_gform_stripe_session_data(``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``) {`<br>```if``(``$form``[``'id'``] === 4 ) {``// set your form id.`<br>```foreach``(``$submission_data``[``'line_items'``]``as``$k``=>``$line_item``) {`<br>```$field``= GFAPI::get_field(``$form``,``$line_item``[``'id'``] );`<br>```if``( rgar(``$field``,``'choices'``) ) {`<br>```$image``= gf_image_choices()->get_choice_image_src(``$field``,``$line_item``[``'name'``] );`<br>```if``(``$image``) {`<br>```$session_data``[``'line_items'``][``$k``][``'images'``][] =``$image``;`<br>```}`<br>```}`<br>```}`<br>```}`<br>``<br>```return``$session_data``;`<br>`}`<br>`add_filter(``'gform_stripe_session_data'``,``'my_gform_stripe_session_data'``, 10, 5 );` |

### Add the statement\_descriptor property

The following snippet shows how to replace the _gform\_stripe\_charge\_pre\_create_ filter for use with the new Stripe Checkout in Stripe add-on version 3.0 and newer.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7 | `function``my_gform_stripe_session_data(``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``) {`<br>```if``(``$form``[``'id'``] === 4 ) {``// set your form id.`<br>```$session_data``[``'payment_intent_data'``][``'statement_descriptor'``] =``'STATEMENTDESC'``;`<br>```}`<br>```return``$session_data``;`<br>`}`<br>`add_filter(``'gform_stripe_session_data'``,``'my_gform_stripe_session_data'``, 10, 5 );` |

To see what charge meta can be replaced with `payment_intent_data` in the Stripe checkout session, see the [Stripe documentation](https://stripe.com/docs/api/checkout/sessions/create#create_checkout_session-payment_intent_data).

### Add additional payment method types

The following example shows how to include additional payment methods. You can find the full list of available payment methods in [Stripe’s documentation](https://stripe.com/docs/api/checkout/sessions/create#create_checkout_session-payment_method_types).

Note that currently our add-on is certified to work only with the following payment methods: Card, Google Pay, Apple Pay. Other payment methods added this way may not work due to additional technical requirements.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7 | `add_filter(``'gform_stripe_session_data'``,``function``(``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``) {`<br>```if``(``$form``[``'id'``] === 4 ) {``// set your form id.`<br>```$session_data``[``'payment_method_types'``][] =``'ideal'``;`<br>```}`<br>```return``$session_data``;`<br>`}, 10, 5 );` |

See the [Stripe API documentation for the supported payment method types](https://stripe.com/docs/api/checkout/sessions/create#create_checkout_session-payment_method_types) and the [conditions which must be met for them to be used](https://stripe.com/docs/payments/checkout/payment-methods).

### Send metadata before the entry is saved

Note: This request is sent during form validation when entry properties such as the id are not available. Also, other field values could be changed after this data has been sent to Stripe.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11 | `add_filter(``'gform_stripe_session_data'``,``function``(``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``) {`<br>```if``( !``empty``(``$session_data``[``'payment_intent_data'``] ) &&``$form``[``'id'``] === 4 ) {``// set your form id.`<br>```$metadata``= gf_stripe()->get_stripe_meta_data(``$feed``,``$entry``,``$form``);`<br>```if``( !``empty``(``$metadata``) ) {`<br>```// Add metadata to payment intent.`<br>```$session_data``[``'payment_intent_data'``][``'metadata'``] =``$metadata``;`<br>```}`<br>```}`<br>``<br>```return``$session_data``;`<br>`}, 10, 5 );` |

### Save payment method for future usage

The following snippet adds the `setup_future_usage` parameter to attach the payment method to the customer created at Stripe.com

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4 | `add_filter(``'gform_stripe_session_data'``,``function``(``$session_data``,``$feed``,``$submission_data``,``$form``,``$entry``) {`<br>```$session_data``[``'payment_intent_data'``][``'setup_future_usage'``] =``'off_session'``;`<br>```return``$session_data``;`<br>`}, 10, 5 );` |

### Remove customer\_creation when customer has already been created

Stripe made a breaking change to their API which causes an error to be returned on session creation if both the `customer` and `customer_creation` parameters are included in the request.

This example shows how the `customer_creation` parameter can be removed from the request when the [gform\_stripe\_customer\_id](https://docs.gravityforms.com/gform_stripe_customer_id/) filter has set the `customer`.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7 | `add_filter(``'gform_stripe_session_data'``,``function``(``$session_data``) {`<br>```if``( !``empty``(``$session_data``[``'customer'``] ) ) {`<br>```unset(``$session_data``[``'customer_creation'``] );`<br>```}`<br>```return``$session_data``;`<br>`} );` |

## Placement

This code should be placed in the [functions.php](http://codex.wordpress.org/Theme_Development#Functions_File) file of your active theme.

## Since

This filter was added in Stripe 3.0.

## Source Code

This filter is located in _class-gf-stripe.php_.

- Facebook


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: March 21, 2023

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_stripe_session_data/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)