---
url: "https://docs.gravityforms.com/display-message-login-form-user-pending-activation/"
title: "Pending Activation Login Message - Gravity Guide"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)    - [Accessing Mapped Field Values During Feed Processing](https://docs.gravityforms.com/mapped-field-values-during-feed-processing/ "Accessing Mapped Field Values During Feed Processing")
    - [Add Sub-Pages to Gravity Forms Admin Navigation](https://docs.gravityforms.com/add-sub-pages-to-gravity-forms-admin-nav/ "Add Sub-Pages to Gravity Forms Admin Navigation")
    - [Adding a New Notification Service Using the Add-On Framework](https://docs.gravityforms.com/new-notification-service-using-framework/ "Adding a New Notification Service Using the Add-On Framework")
    - [Adding a Note to the Entry when Using the Add-On Framework](https://docs.gravityforms.com/adding-note-when-using-addon-framework/ "Adding a Note to the Entry when Using the Add-On Framework")
    - [Adding Meta Boxes to the Entry Detail Page Using the Add-On Framework](https://docs.gravityforms.com/meta-boxes-entry-detail-addon-framework/ "Adding Meta Boxes to the Entry Detail Page Using the Add-On Framework")
    - [Cancel a Stripe Subscription After a Specified Number of Payments](https://docs.gravityforms.com/cancel-stripe-subscription-payments/ "Cancel a Stripe Subscription After a Specified Number of Payments")
    - [Capturing the HTTP Referrer URL on Form Submissions](https://docs.gravityforms.com/capture-http-referrer-url-form-submissions/ "Capturing the HTTP Referrer URL on Form Submissions")
    - [Centering an Entire Form](https://docs.gravityforms.com/centering-an-entire-form/ "Centering an Entire Form")
    - [Changing Stripe Billing Information](https://docs.gravityforms.com/changing-stripe-billing-information/ "Changing Stripe Billing Information")
    - [Create a Customer in Stripe without Capturing Payment](https://docs.gravityforms.com/create-customer-stripe-without-payment/ "Create a Customer in Stripe without Capturing Payment")
    - [Create Post with Custom Taxonomy](https://docs.gravityforms.com/create-post-with-custom-taxonomy/ "Create Post with Custom Taxonomy")
    - [Defining Minimum Add-On Requirements](https://docs.gravityforms.com/defining-minimum-add-requirements/ "Defining Minimum Add-On Requirements")
    - [Deleting Cached Entry Data](https://docs.gravityforms.com/deleting-cached-entry-data/ "Deleting Cached Entry Data")
    - [Disabling Mobile Keyboard Input on Datepicker Fields](https://docs.gravityforms.com/disable-keyboard-input-datepicker-fields/ "Disabling Mobile Keyboard Input on Datepicker Fields")
    - [Display a message on the login form when the user is pending activation](https://docs.gravityforms.com/display-message-login-form-user-pending-activation/ "Display a message on the login form when the user is pending activation")
    - [Enable Use of the Total Field with Conditional Logic](https://docs.gravityforms.com/enable-total-field-with-conditional-logic/ "Enable Use of the Total Field with Conditional Logic")
    - [Hiding the Form Title](https://docs.gravityforms.com/hiding-the-form-title/ "Hiding the Form Title")
    - [Highlighting the Current or Future Date in the Datepicker](https://docs.gravityforms.com/highlighting-current-future-date-datepicker/ "Highlighting the Current or Future Date in the Datepicker")
    - [How to Add a Custom Field Group when Using the Field Framework](https://docs.gravityforms.com/add-custom-field-group-using-field-framework/ "How to Add a Custom Field Group when Using the Field Framework")
    - [How to Add a New Field to an Existing Form Using the GFAPI](https://docs.gravityforms.com/how-to-add-field-to-form-using-gfapi/ "How to Add a New Field to an Existing Form Using the GFAPI")
    - [How To Add And Remove Countries From the Address Field](https://docs.gravityforms.com/addremove-countries-country-select-field/ "How To Add And Remove Countries From the Address Field")
    - [How to Add Delayed Payment Support to a Feed Add-On](https://docs.gravityforms.com/add-delayed-payment-support-feed-add/ "How to Add Delayed Payment Support to a Feed Add-On")
    - [How to Set the Default Properties for a New Field](https://docs.gravityforms.com/set-default-properties-new-field/ "How to Set the Default Properties for a New Field")
    - [Including a New Field Using the Add-On Framework](https://docs.gravityforms.com/including-new-field-using-add-on-framework/ "Including a New Field Using the Add-On Framework")
    - [Including and Using Entry Meta with the Add-On Framework](https://docs.gravityforms.com/using-entry-meta-with-add-on-framework/ "Including and Using Entry Meta with the Add-On Framework")
    - [Including Scripts and Styles when Using the Add-On Framework](https://docs.gravityforms.com/include-scripts-styles-with-addon-framework/ "Including Scripts and Styles when Using the Add-On Framework")
    - [Sending Notifications on Custom Events when Using the Add-On Framework](https://docs.gravityforms.com/notifications-custom-events-addon-framework/ "Sending Notifications on Custom Events when Using the Add-On Framework")
    - [Using EDD Software Licensing with the Add-On Framework](https://docs.gravityforms.com/edd-software-licensing-add-on-framework/ "Using EDD Software Licensing with the Add-On Framework")
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# Display a message on the login form when the user is pending activation

- [Placement](https://docs.gravityforms.com/display-message-login-form-user-pending-activation/#h-placement)

This example shows how the WordPress [authenticate](https://developer.wordpress.org/reference/hooks/authenticate/) filter can be used to check if the user attempting to login is still pending activation so a custom message can be displayed instead of the standard unknown username or email message.

**Note**: This code snippet is compatible with both the standard WordPress login form and the login form included with the [User Registration Add-On](https://docs.gravityforms.com/category/add-ons-gravity-forms/user-registration-add-on/).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41 | `add_filter(``'authenticate'``,``function``(``$user_or_error``,``$username_or_email``) {`<br>```// Abort if the user has already been authenticated or the UR add-on is not active.`<br>```if``(``$user_or_error``instanceof``WP_User || ! function_exists(``'gf_user_registration'``) ) {`<br>```return``$user_or_error``;`<br>```}`<br>```// Abort if authentication failed for an unsupported reason.`<br>```if``( is_wp_error(``$user_or_error``) && ! in_array(``$user_or_error``->get_error_code(),``array``(`<br>```'invalid_username'``,`<br>```'invalid_email'``,`<br>```) ) ) {`<br>```return``$user_or_error``;`<br>```}`<br>```add_filter(``'gform_user_registration_pending_activation_expiration'``,``'authenticate_pending_activation_expiration'``);`<br>```$key``=``strpos``(``$username_or_email``,``'@'``) ?``'user_email'``:``'user_login'``;`<br>```$is_pending``= gf_user_registration()->pending_activation_exists(``$key``,``$username_or_email``);`<br>```remove_filter(``'gform_user_registration_pending_activation_expiration'``,``'authenticate_pending_activation_expiration'``);`<br>```// If there isn't a pending activation return the original error.`<br>```if``( !``$is_pending``) {`<br>```return``$user_or_error``;`<br>```}`<br>```$custom_error_message``=``'Account is pending activation.'``;`<br>```// If the UR login form is being used add the error to the first field.`<br>```if``( isset(``$_POST``[``'gform_submit'``] ) && absint(``$_POST``[``'gform_submit'``] ) === 0 ) {`<br>```$field``= GFAPI::get_field( gf_user_registration()->login_form_object(), 1 );`<br>```$field``->failed_validation  = true;`<br>```$field``->validation_message =``$custom_error_message``;`<br>```}`<br>```return``new``WP_Error(``'pending_activation'``,``$custom_error_message``);`<br>`}, 30, 2 );`<br>`// Callback for the gform_user_registration_pending_activation_expiration hook.`<br>`// Prevents the pending activation being deleted by the pending_activation_exists() check if it is a few days old.`<br>`function``authenticate_pending_activation_expiration() {`<br>```return``YEAR_IN_SECONDS;`<br>`}` |

[![Image showing Account is pending activation message with the User Registration Add-On Login Form Shortcode](https://docs.gravityforms.com/wp-content/uploads/2025/05/image-26.png)](https://docs.gravityforms.com/wp-content/uploads/2025/05/image-26.png)

## Placement

This code can be used in the [functions.php](https://developer.wordpress.org/themes/basics/theme-functions/) file of the active theme, a custom functions plugin, a custom add-on, or with a code snippets plugin.

See also the PHP section in this article: [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/)

- Name


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: May 15, 2025

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/display-message-login-form-user-pending-activation/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)