---
url: "https://docs.gravityforms.com/gform_replace_merge_tags/"
title: "gform_replace_merge_tags - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)      - [Add-On Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/addon-framework-filters/)
      - [Add-On Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/)
      - [Admin Dashboard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/admin-dashboard-filters/)
      - [Calculation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/calculation-filters/)
      - [Conditional Logic Filters](https://docs.gravityforms.com/category/developers/hooks/filters/conditional-logic-filters/)
      - [Confirmation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/confirmation-filters/)
      - [Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/editor-filters/)
      - [Entry List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-list-filters/)
      - [Entry Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-filters/)
      - [Field Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-filters/)
      - [Field Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-framework-filters/)
      - [Form Component Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-component-filters/)
      - [Form List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-list/)
      - [Form Object Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-object/)
      - [Form Settings Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-settings-filters/)
      - [Import/Export Filters](https://docs.gravityforms.com/category/developers/hooks/filters/importexport-filters/)
      - [Logging Filters](https://docs.gravityforms.com/category/developers/hooks/filters/logging/)
      - [Merge Tag Filters](https://docs.gravityforms.com/category/developers/hooks/filters/merge-tags/)        - [gform\_custom\_merge\_tags](https://docs.gravityforms.com/gform_custom_merge_tags/ "gform_custom_merge_tags")
        - [gform\_display\_product\_summary](https://docs.gravityforms.com/gform_display_product_summary/ "gform_display_product_summary")
        - [gform\_entry\_detail\_url](https://docs.gravityforms.com/gform_entry_detail_url/ "gform_entry_detail_url")
        - [gform\_merge\_tag\_data](https://docs.gravityforms.com/gform_merge_tag_data/ "gform_merge_tag_data")
        - [gform\_merge\_tag\_filter](https://docs.gravityforms.com/gform_merge_tag_filter/ "gform_merge_tag_filter")
        - [gform\_merge\_tag\_list\_exclude](https://docs.gravityforms.com/gform_merge_tag_list_exclude/ "gform_merge_tag_list_exclude")
        - [gform\_pre\_replace\_merge\_tags](https://docs.gravityforms.com/gform_pre_replace_merge_tags/ "gform_pre_replace_merge_tags")
        - [gform\_replace\_merge\_tags](https://docs.gravityforms.com/gform_replace_merge_tags/ "gform_replace_merge_tags")
      - [Notification Filters](https://docs.gravityforms.com/category/developers/hooks/filters/notification-filters/)
      - [Payment Filters](https://docs.gravityforms.com/category/developers/hooks/filters/payment/)
      - [Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/post-creation/)
      - [REST API v1 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v1/)
      - [REST API v2 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v2/)
      - [Rich Text Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rich-text-editor/)
      - [Save and Continue Filters](https://docs.gravityforms.com/category/developers/hooks/filters/save-and-continue/)
      - [Script Filters](https://docs.gravityforms.com/category/developers/hooks/filters/script-filters/)
      - [Styling/Theme/CSS Filters](https://docs.gravityforms.com/category/developers/hooks/filters/styling-filters/)
      - [System Status Filters](https://docs.gravityforms.com/category/developers/hooks/filters/system-status/)
      - [Upload Filters](https://docs.gravityforms.com/category/developers/hooks/filters/upload-filters/)
      - [Validation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/validation/)
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_replace\_merge\_tags

- [Description](https://docs.gravityforms.com/gform_replace_merge_tags/#h-description)
- [Usage](https://docs.gravityforms.com/gform_replace_merge_tags/#h-usage)
- [Examples](https://docs.gravityforms.com/gform_replace_merge_tags/#h-examples)
- [Replace a custom merge tag](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-a-custom-merge-tag)
- [Replace {entry\_time}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-entry-time)
- [Replace {entry\_notes}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-entry-notes)
- [Replace {paypal\_link}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-paypal-link)
- [Replace {archive\_title}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-archive-title)
- [Custom Date Merge Tag](https://docs.gravityforms.com/gform_replace_merge_tags/#h-custom-date-merge-tag)
- [Replace {user\_id}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-user-id)
- [Replace {username}](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-username)
- [Replace a custom merge tag with a value from a BuddyPress profile field](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-a-custom-merge-tag-with-a-value-from-a-buddypress-profile-field)
- [Replace paging merge tags](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-paging-merge-tags)
- [Replace multiple merge tags in one function](https://docs.gravityforms.com/gform_replace_merge_tags/#h-replace-multiple-merge-tags-in-one-function)
- [Placement](https://docs.gravityforms.com/gform_replace_merge_tags/#h-placement)
- [Source Code](https://docs.gravityforms.com/gform_replace_merge_tags/#h-source-code)

## Description

Use the `gform_replace_merge_tags` filter to **create** your own custom merge tags.

This filter lets you dynamically replace custom merge tags with values from form entries, dynamic data, calculations, site information, user data, or external sources. Look at the examples on this page for a small taste of what is possible.

## Usage

|     |
| --- |
| `add_filter(``'gform_replace_merge_tags'``,``'replace_custom_merge_tags'``, 10, 7 );` |

## Parameters

- **$text** [string](https://docs.gravityforms.com/string)
The current text in which merge tags are being replaced.

- **$form** false\| [Form Object](https://docs.gravityforms.com/form-object)

False or the current form.

- **$entry** false\| [Entry Object](https://docs.gravityforms.com/entry-object)

False or the current entry.

- **$url\_encode** [boolean](https://docs.gravityforms.com/boolean)

Whether to encode any URLs found in the replaced value.

- **$esc\_html** [boolean](https://docs.gravityforms.com/boolean)

Whether to encode HTML found in the replaced value.

- **$nl2br** [boolean](https://docs.gravityforms.com/boolean)

Whether to convert newlines to break tags.

- **$format** [string](https://docs.gravityforms.com/string)

Determines how the value should be formatted. Default is _html_.


## Examples

### Replace a custom merge tag

This example demonstrates how to replace a custom merge tag {download\_link}. The code first searches for the merge tag in the $text. If found, it retrieves the value that will replace the merge tag and then _returns_ the newly replaced string.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12 | `add_filter(``'gform_replace_merge_tags'``,``'replace_download_link'``, 10, 7 );`<br>`function``replace_download_link(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$custom_merge_tag``=``'{download_link}'``;`<br>```if``(``strpos``(``$text``,``$custom_merge_tag``) === false ) {`<br>```return``$text``;`<br>```}`<br>```$download_link``= gform_get_meta(``$entry``[``'id'``],``'gfmergedoc_download_link'``);`<br>```return``str_replace``(``$custom_merge_tag``,``$download_link``,``$text``);`<br>`}` |

### Replace {entry\_time}

This example replaces a custom merge tag with the entry date and time. If you don’t need to customize the output, use the built-in [{entry:date\_created} merge tag](https://docs.gravityforms.com/entry-merge-tag/) that uses the default yyyy-mm-dd hh::mm::ss format.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$merge_tag``=``'{entry_time}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ||``empty``(``$entry``) ||``empty``(``$form``) ) {`<br>```return``$text``;`<br>```}`<br>```return``str_replace``(``$merge_tag``, GFCommon::format_date( rgar(``$entry``,``'date_created'``), false,``'Y/m/d'``),``$text``);`<br>`}, 10, 7 );` |

### Replace {entry\_notes}

This example replaces a custom merge tag with the entry notes.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21 | `add_filter(``'gform_replace_merge_tags'``,``'replace_entry_notes'``, 10, 7 );`<br>`function``replace_entry_notes(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$merge_tag``=``'{entry_notes}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ||``empty``(``$entry``) ||``empty``(``$form``) ) {`<br>```return``$text``;`<br>```}`<br>```$entry_notes``=``''``;`<br>```$notes``= RGFormsModel::get_lead_notes(``$entry``[``'id'``] );`<br>```if``(``$notes``) {`<br>```$entry_notes``.=``"<br><br><strong>Additional Notes</strong><br>"``;`<br>```foreach``(``$notes``as``$note``) {`<br>```$date``= GFCommon::format_date(``$note``->date_created, false );`<br>```$entry_notes``.=``"<em>{$note->user_name} - {$date}</em><br>{$note->value}<br><br>"``;`<br>```}`<br>```}`<br>```return``str_replace``(``$merge_tag``,``$entry_notes``,``$text``);`<br>`}` |

### Replace {paypal\_link}

This example replaces a custom merge tag with the PayPal link for the feed which was used to process an entry.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17 | `add_filter(``'gform_replace_merge_tags'``,``'replace_paypal_link_merge_tag'``, 10, 7 );`<br>`function``replace_paypal_link_merge_tag(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$merge_tag``=``'{paypal_link}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ||``empty``(``$entry``) ||``empty``(``$form``) || ! function_exists(``'gf_paypal'``) ) {`<br>```return``$text``;`<br>```}`<br>```$feed``= gf_paypal()->get_payment_feed(``$entry``,``$form``);`<br>```if``(``$feed``) {`<br>```$submission_data``= gf_paypal()->get_submission_data(``$feed``,``$form``,``$entry``);`<br>```$url``= gf_paypal()->redirect_url(``$feed``,``$submission_data``,``$form``,``$entry``);`<br>```$text``=``str_replace``(``$merge_tag``, sprintf(``"<a href='%s'>Pay by PayPal</a>"``,``$url``),``$text``);`<br>```}`<br>```return``$text``;`<br>`}` |

### Replace {archive\_title}

This example replaces a custom merge tag during form pre-population with the archive title where the form is located.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``) {`<br>```$merge_tag``=``'{archive_title}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false || !``empty``(``$form``) ) {`<br>```return``$text``;`<br>```}`<br>```return``str_replace``(``$merge_tag``, get_the_archive_title(),``$text``);`<br>`}, 10, 2 );` |

### Custom Date Merge Tag

This example shows how you can define a custom merge tag to return the current date in your desired format.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$merge_tag``=``'{custom_date}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ) {`<br>```return``$text``;`<br>```}`<br>```$local_timestamp``= GFCommon::get_local_timestamp( time() );`<br>```$local_date``= date_i18n(``'Y-m-d'``,``$local_timestamp``, true );`<br>```return``str_replace``(``$merge_tag``,``$url_encode``? urlencode(``$local_date``) :``$local_date``,``$text``);`<br>`}, 10, 7 );` |

### Replace {user\_id}

This example replaces a custom merge tag with the user’s ID, which was retrieved from the current entry.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12 | `add_filter(``'gform_replace_merge_tags'``,``'replace_user_id_merge_tag'``, 10, 3 );`<br>`function``replace_user_id_merge_tag(``$text``,``$form``,``$entry``) {`<br>```$merge_tag``=``'{user_id}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ||``empty``(``$entry``) ||``empty``(``$form``) || ! function_exists(``'gf_user_registration'``) ) {`<br>```return``$text``;`<br>```}`<br>```$user_id``= gf_user_registration()->get_user_by_entry_id(``$entry``[``'id'``], true );`<br>```return``str_replace``(``$merge_tag``,``$user_id``,``$text``);`<br>`}` |

### Replace {username}

This example replaces a custom merge tag with the username of the user which was retrieved from the current entry.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``,``$entry``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Running snippet for custom {username} merge tag.'``);`<br>```$merge_tag``=``'{username}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false ||``empty``(``$entry``) || ! function_exists(``'gf_user_registration'``) ) {`<br>```return``$text``;`<br>```}`<br>```/** @var WP_User $user */`<br>```$user``= gf_user_registration()->get_user_by_entry_id(``$entry``[``'id'``] );`<br>```GFCommon::log_debug(``__METHOD__``.``"(): user_login for entry id {$entry['id']} is {$user->user_login}"``);`<br>```return``str_replace``(``$merge_tag``,``$user``->user_login,``$text``);`<br>`}, 10, 3 );` |

### Replace a custom merge tag with a value from a BuddyPress profile field

This example replaces a custom merge tag with the value obtained from a custom BuddyPress profile field of type Text labeled as BP Text in BuddyPress.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18 | `// BuddyPress custom merge tag`<br>`add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``) {`<br>```$merge_tag``=``'{bpfield_bptext}'``;``// Change this to any name you may want to use for your merge tag`<br>```if``(``strpos``(``$text``,``$merge_tag``) === false || !``empty``(``$form``) ) {`<br>```return``$text``;`<br>```}`<br>```$current_user``= wp_get_current_user();`<br>```// Change BP Text to the label defined for your field in BuddyPress`<br>```$bp_field_content``= bp_get_profile_field_data(``array``(`<br>```'field'``=>``'BP Text'``,`<br>```'user_id'``=>``$current_user``->ID,`<br>```) );`<br>```return``str_replace``(``$merge_tag``,``$bp_field_content``,``$text``);`<br>`}, 10, 2 );` |

### Replace paging merge tags

This example replaces custom merge tags with the source and target pages of multipage forms.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$merge_tag_1``=``'{source_page_number}'``;`<br>```$merge_tag_2``=``'{target_page_number}'``;`<br>```if``(``strpos``(``$text``,``$merge_tag_1``) === false &&``strpos``(``$text``,``$merge_tag_2``) === false ) {`<br>```return``$text``;`<br>```}`<br>```$source_page``= GFFormDisplay::get_source_page( rgar(``$form``,``'id'``) );`<br>```$text``=``str_replace``(``$merge_tag_1``, GFCommon::format_variable_value(``$source_page``,``$url_encode``,``$esc_html``,``$format``,``$nl2br``),``$text``);`<br>```$target_page``= GFFormDisplay::get_target_page(``$form``,``$source_page``,``array``() );`<br>```return``str_replace``(``$merge_tag_2``, GFCommon::format_variable_value(``$target_page``,``$url_encode``,``$esc_html``,``$format``,``$nl2br``),``$text``);`<br>`}, 10, 7 );` |

### Replace multiple merge tags in one function

This example shows how to replace multiple custom merge tags with information about the current site using WordPress functions.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10 | `add_filter(``'gform_replace_merge_tags'``,``function``(``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``) {`<br>```$custom_merge_tags``=``array``(`<br>```'{site_url}'``=> get_site_url(),`<br>```'{site_name}'``=> get_bloginfo(``'name'``)`<br>```);`<br>``<br>```return``str_replace``(``array_keys``(``$custom_merge_tags``),``array_values``(``$custom_merge_tags``),``$text``);`<br>`}, 10, 7 );` |

## Placement

This code can be used in the [functions.php](https://developer.wordpress.org/themes/basics/theme-functions/) file of the active theme, a custom functions plugin, a custom add-on, or with a code snippets plugin.

See also the PHP section in this article: [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/)

## Source Code

|     |
| --- |
| `apply_filters(``'gform_replace_merge_tags'``,``$text``,``$form``,``$entry``,``$url_encode``,``$esc_html``,``$nl2br``,``$format``)` |

This filter is located in GFCommon::replace\_variables\_prepopulate() in _common.php_.

- Instagram


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: February 23, 2025

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_replace_merge_tags/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)