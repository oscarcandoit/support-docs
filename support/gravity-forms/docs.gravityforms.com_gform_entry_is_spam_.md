---
url: "https://docs.gravityforms.com/gform_entry_is_spam/"
title: "gform_entry_is_spam - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)  - [Theme Framework](https://docs.gravityforms.com/category/developers/theme-framework/)
  - [Hooks](https://docs.gravityforms.com/category/developers/hooks/)    - [Actions](https://docs.gravityforms.com/category/developers/hooks/actions/)
    - [Filters](https://docs.gravityforms.com/category/developers/hooks/filters/)      - [Add-On Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/addon-framework-filters/)
      - [Add-On Filters](https://docs.gravityforms.com/category/developers/hooks/filters/filters-addons/)
      - [Admin Dashboard Filters](https://docs.gravityforms.com/category/developers/hooks/filters/admin-dashboard-filters/)
      - [Calculation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/calculation-filters/)
      - [Conditional Logic Filters](https://docs.gravityforms.com/category/developers/hooks/filters/conditional-logic-filters/)
      - [Confirmation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/confirmation-filters/)
      - [Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/editor-filters/)
      - [Entry List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-list-filters/)
      - [Entry Filters](https://docs.gravityforms.com/category/developers/hooks/filters/entry-filters/)        - [gform\_abort\_submission\_with\_confirmation](https://docs.gravityforms.com/gform_abort_submission_with_confirmation/ "gform_abort_submission_with_confirmation")
        - [gform\_addnote\_button](https://docs.gravityforms.com/gform_addnote_button/ "gform_addnote_button")
        - [gform\_currency\_pre\_save\_entry](https://docs.gravityforms.com/gform_currency_pre_save_entry/ "gform_currency_pre_save_entry")
        - [gform\_display\_field\_select\_columns\_entry\_list](https://docs.gravityforms.com/gform_display_field_select_columns_entry_list/ "gform_display_field_select_columns_entry_list")
        - [gform\_entries\_column\_filter](https://docs.gravityforms.com/gform_entries_column_filter/ "gform_entries_column_filter")
        - [gform\_entries\_field\_value](https://docs.gravityforms.com/gform_entries_field_value/ "gform_entries_field_value")
        - [gform\_entries\_first\_column\_actions](https://docs.gravityforms.com/gform_entries_first_column_actions/ "gform_entries_first_column_actions")
        - [gform\_entries\_primary\_column\_filter](https://docs.gravityforms.com/gform_entries_primary_column_filter/ "gform_entries_primary_column_filter")
        - [gform\_entry\_detail\_grid\_display\_empty\_fields](https://docs.gravityforms.com/gform_entry_detail_grid_display_empty_fields/ "gform_entry_detail_grid_display_empty_fields")
        - [gform\_entry\_detail\_meta\_boxes](https://docs.gravityforms.com/gform_entry_detail_meta_boxes/ "gform_entry_detail_meta_boxes")
        - [gform\_entry\_detail\_title](https://docs.gravityforms.com/gform_entry_detail_title/ "gform_entry_detail_title")
        - [gform\_entry\_field\_value](https://docs.gravityforms.com/gform_entry_field_value/ "gform_entry_field_value")
        - [gform\_entry\_id\_pre\_save\_lead](https://docs.gravityforms.com/gform_entry_id_pre_save_lead/ "gform_entry_id_pre_save_lead")
        - [gform\_entry\_ids\_automatic\_deletion](https://docs.gravityforms.com/gform_entry_ids_automatic_deletion/ "gform_entry_ids_automatic_deletion")
        - [gform\_entry\_is\_spam](https://docs.gravityforms.com/gform_entry_is_spam/ "gform_entry_is_spam")
        - [gform\_entry\_list\_bulk\_actions](https://docs.gravityforms.com/gform_entry_list_bulk_actions/ "gform_entry_list_bulk_actions")
        - [gform\_entry\_list\_column\_input\_label\_only](https://docs.gravityforms.com/gform_entry_list_column_input_label_only/ "gform_entry_list_column_input_label_only")
        - [gform\_entry\_list\_columns](https://docs.gravityforms.com/gform_entry_list_columns/ "gform_entry_list_columns")
        - [gform\_entry\_meta](https://docs.gravityforms.com/gform_entry_meta/ "gform_entry_meta")
        - [gform\_entry\_meta\_conditional\_logic\_confirmations](https://docs.gravityforms.com/gform_entry_meta_conditional_logic_confirmations/ "gform_entry_meta_conditional_logic_confirmations")
        - [gform\_entry\_page\_size](https://docs.gravityforms.com/gform_entry_page_size/ "gform_entry_page_size")
        - [gform\_entry\_post\_save](https://docs.gravityforms.com/gform_entry_post_save/ "gform_entry_post_save")
        - [gform\_entry\_pre\_update](https://docs.gravityforms.com/gform_entry_pre_update/ "gform_entry_pre_update")
        - [gform\_entrydetail\_update\_button](https://docs.gravityforms.com/gform_entrydetail_update_button/ "gform_entrydetail_update_button")
        - [gform\_field\_filters](https://docs.gravityforms.com/gform_field_filters/ "gform_field_filters")
        - [gform\_filter\_links\_entry\_list](https://docs.gravityforms.com/gform_filter_links_entry_list/ "gform_filter_links_entry_list")
        - [gform\_form\_pre\_update\_entry](https://docs.gravityforms.com/gform_form_pre_update_entry/ "gform_form_pre_update_entry")
        - [gform\_get\_entries\_args\_entry\_list](https://docs.gravityforms.com/gform_get_entries_args_entry_list/ "gform_get_entries_args_entry_list")
        - [gform\_incomplete\_submissions\_expiration\_days](https://docs.gravityforms.com/gform_incomplete_submissions_expiration_days/ "gform_incomplete_submissions_expiration_days")
        - [gform\_ip\_address](https://docs.gravityforms.com/gform_ip_address/ "gform_ip_address")
        - [gform\_is\_encrypted\_field](https://docs.gravityforms.com/gform_is_encrypted_field/ "gform_is_encrypted_field")
        - [gform\_is\_entry\_detail](https://docs.gravityforms.com/gform_is_entry_detail/ "gform_is_entry_detail")
        - [gform\_is\_entry\_detail\_edit](https://docs.gravityforms.com/gform_is_entry_detail_edit/ "gform_is_entry_detail_edit")
        - [gform\_is\_entry\_detail\_view](https://docs.gravityforms.com/gform_is_entry_detail_view/ "gform_is_entry_detail_view")
        - [gform\_notes\_apply\_button](https://docs.gravityforms.com/gform_notes_apply_button/ "gform_notes_apply_button")
        - [gform\_notes\_avatar](https://docs.gravityforms.com/gform_notes_avatar/ "gform_notes_avatar")
        - [gform\_notification\_note](https://docs.gravityforms.com/gform_notification_note/ "gform_notification_note")
        - [gform\_order\_label](https://docs.gravityforms.com/gform_order_label/ "gform_order_label")
        - [gform\_payment\_amount](https://docs.gravityforms.com/gform_payment_amount/ "gform_payment_amount")
        - [gform\_payment\_date](https://docs.gravityforms.com/gform_payment_date/ "gform_payment_date")
        - [gform\_payment\_status](https://docs.gravityforms.com/gform_payment_status/ "gform_payment_status")
        - [gform\_payment\_transaction\_id](https://docs.gravityforms.com/gform_payment_transaction_id/ "gform_payment_transaction_id")
        - [gform\_personal\_data](https://docs.gravityforms.com/gform_personal_data/ "gform_personal_data")
        - [gform\_personal\_data\_identification\_fields](https://docs.gravityforms.com/gform_personal_data_identification_fields/ "gform_personal_data_identification_fields")
        - [gform\_print\_entry\_notes](https://docs.gravityforms.com/gform_print_entry_notes/ "gform_print_entry_notes")
        - [gform\_purge\_expired\_incomplete\_submissions\_query](https://docs.gravityforms.com/gform_purge_expired_incomplete_submissions_query/ "gform_purge_expired_incomplete_submissions_query")
        - [gform\_search\_criteria\_entry\_list](https://docs.gravityforms.com/gform_search_criteria_entry_list/ "gform_search_criteria_entry_list")
        - [gform\_source\_id\_pre\_save\_entry](https://docs.gravityforms.com/gform_source_id_pre_save_entry/ "gform_source_id_pre_save_entry")
        - [gform\_submission\_values\_pre\_save](https://docs.gravityforms.com/gform_submission_values_pre_save/ "gform_submission_values_pre_save")
        - [gform\_subscription\_details\_trial\_description](https://docs.gravityforms.com/gform_subscription_details_trial_description/ "gform_subscription_details_trial_description")
      - [Field Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-filters/)
      - [Field Framework Filters](https://docs.gravityforms.com/category/developers/hooks/filters/field-framework-filters/)
      - [Form Component Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-component-filters/)
      - [Form List Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-list/)
      - [Form Object Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-object/)
      - [Form Settings Filters](https://docs.gravityforms.com/category/developers/hooks/filters/form-settings-filters/)
      - [Import/Export Filters](https://docs.gravityforms.com/category/developers/hooks/filters/importexport-filters/)
      - [Logging Filters](https://docs.gravityforms.com/category/developers/hooks/filters/logging/)
      - [Merge Tag Filters](https://docs.gravityforms.com/category/developers/hooks/filters/merge-tags/)
      - [Notification Filters](https://docs.gravityforms.com/category/developers/hooks/filters/notification-filters/)
      - [Payment Filters](https://docs.gravityforms.com/category/developers/hooks/filters/payment/)
      - [Post Creation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/post-creation/)
      - [REST API v1 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v1/)
      - [REST API v2 Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rest-api-v2/)
      - [Rich Text Editor Filters](https://docs.gravityforms.com/category/developers/hooks/filters/rich-text-editor/)
      - [Save and Continue Filters](https://docs.gravityforms.com/category/developers/hooks/filters/save-and-continue/)
      - [Script Filters](https://docs.gravityforms.com/category/developers/hooks/filters/script-filters/)
      - [Styling/Theme/CSS Filters](https://docs.gravityforms.com/category/developers/hooks/filters/styling-filters/)
      - [System Status Filters](https://docs.gravityforms.com/category/developers/hooks/filters/system-status/)
      - [Upload Filters](https://docs.gravityforms.com/category/developers/hooks/filters/upload-filters/)
      - [Validation Filters](https://docs.gravityforms.com/category/developers/hooks/filters/validation/)
    - [JavaScript](https://docs.gravityforms.com/category/developers/hooks/javascript/)
    - [Deprecated](https://docs.gravityforms.com/category/developers/hooks/deprecated/)
  - [Data Objects](https://docs.gravityforms.com/category/developers/data-objects/)
  - [PHP API](https://docs.gravityforms.com/category/developers/php-api/)
  - [Database](https://docs.gravityforms.com/category/developers/database/)
  - [Developer Snippets](https://docs.gravityforms.com/category/developers/tutorials/)
  - [REST API](https://docs.gravityforms.com/category/developers/rest-api/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)

# gform\_entry\_is\_spam

- [Description](https://docs.gravityforms.com/gform_entry_is_spam/#h-description)
- [Usage](https://docs.gravityforms.com/gform_entry_is_spam/#h-usage)
- [Parameters](https://docs.gravityforms.com/gform_entry_is_spam/#h-parameters)
- [Examples](https://docs.gravityforms.com/gform_entry_is_spam/#h-examples)
- [Basic Usage](https://docs.gravityforms.com/gform_entry_is_spam/#h-basic-usage)
- [Integrate with ZeroBounce](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-zerobounce)
- [Check field values for URLs](https://docs.gravityforms.com/gform_entry_is_spam/#h-check-field-values-for-urls)
- [IP Rate Limit](https://docs.gravityforms.com/gform_entry_is_spam/#h-ip-rate-limit)
- [Check Name Field Values](https://docs.gravityforms.com/gform_entry_is_spam/#h-check-name-field-values)
- [Integrate with ipapi.co](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-ipapi-co)
- [Integrate with iplocate.io](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-iplocate-io)
- [Mark as Not Spam for administrators](https://docs.gravityforms.com/gform_entry_is_spam/#h-mark-as-not-spam-for-administrators)
- [Integrate with Komprehend Abusive Content Classifier](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-komprehend-abusive-content-classifier)
- [Integrate with PurgoMalum profanity filter](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-purgomalum-profanity-filter)
- [Integrate with Moderation API](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-moderation-api)
- [Integrate with Detect Language API](https://docs.gravityforms.com/gform_entry_is_spam/#h-integrate-with-detect-language-api)
- [User-Agent](https://docs.gravityforms.com/gform_entry_is_spam/#h-user-agent)
- [Field "is\_value\_spam" Context Property](https://docs.gravityforms.com/gform_entry_is_spam/#h-field-is-value-spam-context-property)
- [Placement](https://docs.gravityforms.com/gform_entry_is_spam/#h-placement)
- [Source Code](https://docs.gravityforms.com/gform_entry_is_spam/#h-source-code)

## Description

The gform\_entry\_is\_spam filter is used to mark entries as spam during form submission.

Notifications and add-on feeds will NOT be processed for submissions which are marked as spam.

As the submission completes the default “Thanks for contacting us! We will get in touch with you shortly.” message will be displayed instead of the forms configured confirmation. The [gform\_confirmation](https://docs.gravityforms.com/gform_confirmation/#5-customize-the-message-for-spam-submissions) filter can be used to change the message.

## Usage

The following would apply to all forms.

|     |
| --- |
| `add_filter(``'gform_entry_is_spam'``,``'your_function_name'``, 10, 3 );` |

To limit the scope of your function to a specific form, append the form id to the end of the hook name. (format: gform\_entry\_is\_spam\_FORMID)

|     |
| --- |
| `add_filter(``'gform_entry_is_spam_6'``,``'your_function_name'``);` |

## Parameters

- **$is\_spam** [bool](https://docs.gravityforms.com/bool/)
Indicates if the entry is to be marked as spam.

- **$form** [Form Object](https://docs.gravityforms.com/form-object/)
The form currently being processed.

- **$entry** [Entry Object](https://docs.gravityforms.com/entry-object/)
The entry being evaluated.


## Examples

### Basic Usage

This is a basic usage example showing how to use the filter. This example also shows how to add a note to the entry with Gravity Forms 2.7+ to indicate which integration marked it as spam.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15 | `add_filter(``'gform_entry_is_spam'``,``'it_is_all_spam'``, 10, 3 );`<br>`function``it_is_all_spam(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```// Update this with the result of your custom spam check.`<br>```$is_spam``= true;`<br>```if``(``$is_spam``&& method_exists(``'GFCommon'``,``'set_spam_filter'``) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'The name of your spam check'``,``'the reason this entry is being marked as spam'``);`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Integrate with ZeroBounce

This example shows how a field value can be checked by the [ZeroBounce Email Validation API](https://www.zerobounce.net/docs/email-validation-api-quickstart/#validate_emails__v2__).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_zerobounce'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_zerobounce(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_id``=``'1'``;``// The ID of the field containing the email address to be checked.`<br>```$email``= rgar(``$entry``,``$field_id``);`<br>```if``( GFCommon::is_invalid_or_empty_email(``$email``) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_zerobounce()'``,``'The email was empty or invalid.'``);`<br>```return``true;`<br>```}`<br>```$ip``= rgars(``$form``,``'personalData/preventIP'``) ? GFFormsModel::get_ip() : rgar(``$entry``,``'ip'``);`<br>```$request_url``= add_query_arg(`<br>```array``(`<br>```'email'``=>``$email``,`<br>```'ip_address'``=>``$ip``,`<br>```'api_key'``=>``'your_api_key_here'``,`<br>```),`<br>```'https://api.zerobounce.net/v2/validate'`<br>```);`<br>```$response``= wp_remote_get(``$request_url``);`<br>```if``( ! is_wp_error(``$response``) && wp_remote_retrieve_response_code(``$response``) === 200 ) {`<br>```$response_body``= wp_remote_retrieve_body(``$response``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): '``. print_r(``$response_body``, true ) );`<br>```$is_spam``= rgar( json_decode(``$response_body``, true ),``'status'``) !==``'valid'``;`<br>```if``(``$is_spam``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_zerobounce()'``,``'The email was invalid.'``);`<br>```}`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Check field values for URLs

This example shows how you can mark a submission as spam if a field value contains a URL. It only checks fields of the following types: Hidden, Single Line Text, Paragraph, Name, and Address.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_urls'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_urls(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_types_to_check``=``array``(`<br>```'hidden'``,`<br>```'text'``,`<br>```'textarea'``,`<br>```'name'``,`<br>```'address'``,`<br>```);`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() || ! in_array(``$field``->get_input_type(),``$field_types_to_check``) ) {`<br>```continue``;`<br>```}`<br>```// Skipping fields which don't have a value.`<br>```$value``=``$field``->get_value_export(``$entry``);`<br>```if``(``empty``(``$value``) ) {`<br>```continue``;`<br>```}`<br>```// If value contains a URL mark submission as spam.`<br>```if``( preg_match(``'~(https?|ftp):\/\/\S+~'``,``$value``) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_urls()'``,``'A URL was found in a field that shouldn'``t contain URLs.' );`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}` |

### IP Rate Limit

This example shows how you can mark a submission as spam if the IP address is the source of multiple submissions.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_ip_rate_limit'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_ip_rate_limit(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$ip_address``=``empty``(``$entry``[``'ip'``] ) ? GFFormsModel::get_ip() :``$entry``[``'ip'``];`<br>```if``( ! filter_var(``$ip_address``, FILTER_VALIDATE_IP ) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_ip_rate_limit()'``,``'The IP address failed FILTER_VALIDATE_IP validation.'``);`<br>```return``true;`<br>```}`<br>```$key``= wp_hash(``__FUNCTION__``.``$ip_address``);`<br>```$count``= (int) get_transient(``$key``);`<br>```if``(``$count``>= 2 ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_ip_rate_limit()'``,``'The IP address is the source of multiple entries.'``);`<br>```return``true;`<br>```}`<br>```$count``++;`<br>```set_transient(``$key``,``$count``, HOUR_IN_SECONDS );`<br>```return``false;`<br>`}` |

### Check Name Field Values

This example shows how you can mark a submission as spam if the first and last name inputs contain the same value.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_name_values'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_name_values(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() ||``$field``->get_input_type() !==``'name'``||``$field``->nameFormat ===``'simple'``) {`<br>```continue``;`<br>```}`<br>```$first_name``= rgar(``$entry``,``$field``->id .``'.3'``);`<br>```$last_name``= rgar(``$entry``,``$field``->id .``'.6'``);`<br>```if``( !``empty``(``$first_name``) && !``empty``(``$last_name``) &&``$first_name``===``$last_name``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_name_values()'``,``'The same value was submitted for both the first and last name inputs.'``);`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}` |

### Integrate with ipapi.co

This example shows how the [ipapi.co](https://ipapi.co/) service can be used to get the country code for the IP address of the form submitter enabling you to mark submissions as spam if they originate from specified countries.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_ipapi_country'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_ipapi_country(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$ip_address``=``empty``(``$entry``[``'ip'``] ) ? GFFormsModel::get_ip() :``$entry``[``'ip'``];`<br>```if``( ! filter_var(``$ip_address``, FILTER_VALIDATE_IP ) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_ipapi_country()'``,``'The IP address failed FILTER_VALIDATE_IP validation.'``);`<br>```return``true;`<br>```}`<br>```$response``= wp_remote_get( sprintf(``'https://ipapi.co/%s/country/'``,``$ip_address``) );`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```return``false;`<br>```}`<br>```$response_country_code``= trim( wp_remote_retrieve_body(``$response``) );`<br>```if``(``empty``(``$response_country_code``) ) {`<br>```return``false;`<br>```}`<br>```// The two letter ISO 3166-1 alpha-2 country codes.`<br>```$country_codes``=``array``(``'CN'``,``'RU'``);`<br>```$is_spam``= in_array(``$response_country_code``,``$country_codes``);`<br>```if``(``$is_spam``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_ipapi_country()'``,``'The submission originated from a blocked country.'``);`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Integrate with iplocate.io

This example shows how the [iplocate.io](http://iplocate.io/) service can be used to get the country code for the IP address of the form submitter enabling you to mark submissions as spam if they originate from specified countries.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_iplocate_country'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_iplocate_country(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$ip_address``=``empty``(``$entry``[``'ip'``] ) ? GFFormsModel::get_ip() :``$entry``[``'ip'``];`<br>```if``( ! filter_var(``$ip_address``, FILTER_VALIDATE_IP ) ) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_iplocate_country()'``,``'The IP address failed FILTER_VALIDATE_IP validation.'``);`<br>```return``true;`<br>```}`<br>```$response``= wp_remote_get(``'https://www.iplocate.io/api/lookup/'``.``$ip_address``);`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```return``false;`<br>```}`<br>```$response_body``= json_decode( wp_remote_retrieve_body(``$response``), true );`<br>```if``(``empty``(``$response_body``[``'country_code'``] ) ) {`<br>```return``false;`<br>```}`<br>```// The two letter ISO 3166-1 alpha-2 country codes.`<br>```$country_codes``=``array``(``'CN'``,``'RU'``);`<br>```$is_spam``= in_array(``$response_body``[``'country_code'``],``$country_codes``);`<br>```if``(``$is_spam``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_iplocate_country()'``,``'The submission originated from a blocked country.'``);`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Mark as Not Spam for administrators

This example shows how prevent entries being marked as spam for logged in users with the ‘administrator’ role.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10 | `add_filter(``'gform_entry_is_spam'``,``'gf_admin_is_not_spam'``, 99, 3 );`<br>`function``gf_admin_is_not_spam(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``&& current_user_can(``'administrator'``) ) {`<br>```// Always not spam for users with administrator role.`<br>```$is_spam``= false;`<br>```GFCommon::log_debug(``__METHOD__``.``'(): Entry marked as not spam for administrator role.'``);`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Integrate with Komprehend Abusive Content Classifier

This example shows how you can use the [Komprehend Abusive Content Classifier](https://komprehend.io/abusive-content) ( [ParallelDots Abuse API](https://apis.paralleldots.com/text_docs/index.html?shell#abuse)) to mark submissions as spam if Text or Paragraph field values are abusive or offensive.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_komprehend'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_komprehend(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_types_to_check``=``array``(`<br>```'text'``,`<br>```'textarea'``,`<br>```);`<br>```$text_to_check``=``array``();`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() || ! in_array(``$field``->get_input_type(),``$field_types_to_check``) ) {`<br>```continue``;`<br>```}`<br>```// Skipping fields which don't have a value.`<br>```$value``=``$field``->get_value_export(``$entry``);`<br>```if``(``empty``(``$value``) ) {`<br>```continue``;`<br>```}`<br>```$text_to_check``[] =``$value``;`<br>```}`<br>```if``(``empty``(``$text_to_check``) ) {`<br>```return``false;`<br>```}`<br>```$response``= wp_remote_post(``'https://apis.paralleldots.com/v4/abuse_batch'``,``array``(`<br>```'body'``=>``array``(`<br>```'text'``=> json_encode(``$text_to_check``),`<br>```'api_key'``=>``'your_api_key_here'``,`<br>```),`<br>```) );`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $response => '``. print_r(``$response``, true ) );`<br>```return``false;`<br>```}`<br>```$results``= rgar( json_decode( wp_remote_retrieve_body(``$response``), true ),``'abuse'``);`<br>```if``(``empty``(``$results``) || !``is_array``(``$results``) ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $response => '``. print_r(``$response``, true ) );`<br>```return``false;`<br>```}`<br>```// Add the checked text to the results.`<br>```foreach``(``$text_to_check``as``$key``=>``$text``) {`<br>```if``( ! isset(``$results``[``$key``] ) ) {`<br>```continue``;`<br>```}`<br>```$results``[``$key``][``'text'``] =``$text``;`<br>```}`<br>```// Define the thresholds the scores will be compared with.`<br>```$abuse_threshold``= 0.75;`<br>```$hate_threshold``= 0.75;`<br>```foreach``(``$results``as``$result``) {`<br>```// Mark entry as spam if scores are equal to or greater than the thresholds.`<br>```if``( rgar(``$result``,``'abusive'``, 0 ) >=``$abuse_threshold``|| rgar(``$result``,``'hate_speech'``, 0 ) >=``$hate_threshold``) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $results => '``. print_r(``$results``, true ) );`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_komprehend()'``,``'The submission contains hate speech or is abusive.'``);`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}` |

### Integrate with PurgoMalum profanity filter

This example shows how you can use the [PurgoMalum profanity filter](https://www.purgomalum.com/index.html) to mark submissions as spam if Text or Paragraph field values contain words found on the PurgoMalum [profanity list](https://www.purgomalum.com/profanitylist.html).

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_purgomalum'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_purgomalum(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_types_to_check``=``array``(`<br>```'text'``,`<br>```'textarea'``,`<br>```);`<br>```$text_to_check``=``array``();`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() || ! in_array(``$field``->get_input_type(),``$field_types_to_check``) ) {`<br>```continue``;`<br>```}`<br>```// Skipping fields which don't have a value.`<br>```$value``=``$field``->get_value_export(``$entry``);`<br>```if``(``empty``(``$value``) ) {`<br>```continue``;`<br>```}`<br>```$text_to_check``[] =``$value``;`<br>```}`<br>```if``(``empty``(``$text_to_check``) ) {`<br>```return``false;`<br>```}`<br>```$args``=``array``(`<br>```'text'``=> urlencode( implode(``"\r\n"``,``$text_to_check``) ),`<br>```);`<br>```$response``= wp_remote_get( add_query_arg(``$args``,``'https://www.purgomalum.com/service/containsprofanity'``) );`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $response => '``. print_r(``$response``, true ) );`<br>```return``false;`<br>```}`<br>```$is_spam``= wp_remote_retrieve_body(``$response``) ===``'true'``;`<br>```if``(``$is_spam``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_purgomalum()'``,``'The submission contains words found on the PurgoMalum profanity list.'``);`<br>```}`<br>```return``$is_spam``;`<br>`}` |

### Integrate with Moderation API

This example shows how you can use the [Moderation API](https://moderationapi.com/) Toxicity Analyzer to mark submissions as spam if Text or Paragraph field values contain profanity, swearing, racism, threats etc.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_moderationapi'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_moderationapi(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_types_to_check``=``array``(`<br>```'text'``,`<br>```'textarea'``,`<br>```);`<br>```$text_to_check``=``array``();`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() || ! in_array(``$field``->get_input_type(),``$field_types_to_check``) ) {`<br>```continue``;`<br>```}`<br>```// Skipping fields which don't have a value.`<br>```$value``=``$field``->get_value_export(``$entry``);`<br>```if``(``empty``(``$value``) ) {`<br>```continue``;`<br>```}`<br>```$text_to_check``[] =``$value``;`<br>```}`<br>```if``(``empty``(``$text_to_check``) ) {`<br>```return``false;`<br>```}`<br>```$response``= wp_remote_post(``'https://moderationapi.com/api/v1/moderation/text'``,``array``(`<br>```'headers'``=>``array``(`<br>```'Authorization'``=>``'Bearer your_api_key_here'``,`<br>```'Content-Type'``=>``'application/json'``,`<br>```),`<br>```'body'``=> json_encode(``array``(``'value'``=> implode(``"\r\n"``,``$text_to_check``) ) ),`<br>```) );`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $response => '``. print_r(``$response``, true ) );`<br>```return``false;`<br>```}`<br>```$body``= json_decode( wp_remote_retrieve_body(``$response``), true );`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $body => '``. print_r(``$body``, true ) );`<br>```if``(``empty``(``$body``[``'toxicity'``] ) || rgar(``$body``[``'toxicity'``],``'label'``) ===``'NEUTRAL'``||``empty``(``$body``[``'toxicity'``][``'label_scores'``] ) ) {`<br>```return``false;`<br>```}`<br>```// Define the thresholds the scores will be compared with; range from 0 (not spam) to 1 (definitely spam).`<br>```$thresholds``=``array``(`<br>```'TOXICITY'``=> 0.75,`<br>```'PROFANITY'``=> 0.75,`<br>```'DISCRIMINATION'``=> 0.75,`<br>```);`<br>```foreach``(``$thresholds``as``$key``=>``$threshold``) {`<br>```// Mark entry as spam if score is equal to or greater than the threshold.`<br>```if``( rgar(``$body``[``'toxicity'``][``'label_scores'``],``$key``) >=``$threshold``) {`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_moderationapi()'``,``'The submission content is toxic, profane, or discriminatory.'``);`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}` |

### Integrate with Detect Language API

This example shows how you can use the [Detect Language API](https://detectlanguage.com/) to mark submissions as spam if Text or Paragraph field values aren’t the specified language, in this case English.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_detectlanguage'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_detectlanguage(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$field_types_to_check``=``array``(`<br>```'text'``,`<br>```'textarea'``,`<br>```);`<br>```$text_to_check``=``array``();`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```// Skipping fields which are administrative or the wrong type.`<br>```if``(``$field``->is_administrative() || ! in_array(``$field``->get_input_type(),``$field_types_to_check``) ) {`<br>```continue``;`<br>```}`<br>```// Skipping fields which don't have a value.`<br>```$value``=``$field``->get_value_export(``$entry``);`<br>```if``(``empty``(``$value``) ) {`<br>```continue``;`<br>```}`<br>```$text_to_check``[] =``$value``;`<br>```}`<br>```if``(``empty``(``$text_to_check``) ) {`<br>```return``false;`<br>```}`<br>```$response``= wp_remote_post(``'https://ws.detectlanguage.com/0.2/detect'``,``array``(`<br>```'headers'``=>``array``(`<br>```'Authorization'``=>``'Bearer your_api_key_here'``,`<br>```'Content-Type'``=>``'application/json'``,`<br>```),`<br>```'body'``=> json_encode(``array``(``'q'``=>``$text_to_check``) ),`<br>```) );`<br>```if``( is_wp_error(``$response``) || wp_remote_retrieve_response_code(``$response``) !== 200 ) {`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $response => '``. print_r(``$response``, true ) );`<br>```return``false;`<br>```}`<br>```$body``= json_decode( wp_remote_retrieve_body(``$response``), true );`<br>```GFCommon::log_debug(``__METHOD__``.``'(): $body => '``. print_r(``$body``, true ) );`<br>```if``(``empty``(``$body``[``'data'``] ) ||``empty``(``$body``[``'data'``][``'detections'``] ) || !``is_array``(``$body``[``'data'``][``'detections'``] ) ) {`<br>```return``false;`<br>```}`<br>```foreach``(``$body``[``'data'``][``'detections'``]``as``$detections``) {`<br>```foreach``(``$detections``as``$detection``) {`<br>```// Not spam if language is English.`<br>```if``( rgar(``$detection``,``'language'``) ===``'en'``&& rgar(``$detection``,``'isReliable'``) ) {`<br>```return``false;`<br>```}`<br>```}`<br>```}`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'filter_gform_entry_is_spam_detectlanguage()'``,``'The submission content is the wrong language.'``);`<br>```return``true;`<br>`}` |

### User-Agent

This example shows how you can mark entries as spam based on the [User-Agent](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent) header sent by the browser used to submit the form.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36 | `add_filter(``'gform_entry_is_spam'``,``'filter_gform_entry_is_spam_user_agent'``, 11, 3 );`<br>`function``filter_gform_entry_is_spam_user_agent(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``) {`<br>```return``$is_spam``;`<br>```}`<br>```$user_agent``= rgar(``$entry``,``'user_agent'``);`<br>```if``(``empty``(``$user_agent``) ) {`<br>```if``( method_exists(``'GFCommon'``,``'set_spam_filter'``) ) {`<br>```$reason``=``'User-Agent is empty.'``;`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'User-Agent Check'``,``$reason``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): '``.``$reason``);`<br>```}`<br>```return``true;`<br>```}`<br>```// List of tokens that when found in the user agent will mark the entry as spam.`<br>```$tokens``=``array``(`<br>```'YaBrowser'``,`<br>```'Yowser'``,`<br>```);`<br>```foreach``(``$tokens``as``$token``) {`<br>```if``(``stripos``(``$user_agent``,``$token``) !== false ) {`<br>```$reason``= sprintf(``'User-Agent "%s" contains "%s".'``,``$user_agent``,``$token``);`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'User-Agent Check'``,``$reason``);`<br>```GFCommon::log_debug(``__METHOD__``.``'(): '``.``$reason``);`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}` |

### Field “is\_value\_spam” Context Property

This example shows how you can mark entries as spam based on the [Field](https://docs.gravityforms.com/field-object/) “is\_value\_spam” context property being set to true. That property would be set during validation via the [gform\_field\_validation](https://docs.gravityforms.com/gform_field_validation/) or [gform\_validation](https://docs.gravityforms.com/gform_validation/) filters.

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21 | `add_filter(``'gform_entry_is_spam'``,``function``(``$is_spam``,``$form``,``$entry``) {`<br>```if``(``$is_spam``||``empty``(``$form``[``'fields'``] ) ) {`<br>```return``$is_spam``;`<br>```}`<br>```foreach``(``$form``[``'fields'``]``as``$field``) {`<br>```if``(``$field``->displayOnly ) {`<br>```continue``;`<br>```}`<br>```if``(``$field``->get_context_property(``'is_value_spam'``) ) {`<br>```$reason``= sprintf(``'Spam value detected for field #%d.'``,``$field``->id );`<br>```GFCommon::set_spam_filter( rgar(``$form``,``'id'``),``'Field "is_value_spam" Context Property Check'``,``$reason``);`<br>```GFCommon::log_debug(``'gform_entry_is_spam: '``.``$reason``);`<br>```return``true;`<br>```}`<br>```}`<br>```return``false;`<br>`}, 11, 3 );` |

## Placement

This code can be used in the [functions.php](https://developer.wordpress.org/themes/basics/theme-functions/) file of the active theme, a custom functions plugin, a custom add-on, or with a code snippets plugin.

See also the PHP section in this article: [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/)

## Source Code

As of Gravity Forms 2.4.17 this filter is located in GFCommon::is\_spam\_entry() in _common.php_. It was previously located in GFFormDisplay::handle\_submission() in _form\_display.php_.

- Company


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: November 1, 2025

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/gform_entry_is_spam/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)