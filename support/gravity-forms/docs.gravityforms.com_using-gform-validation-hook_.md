---
url: "https://docs.gravityforms.com/using-gform-validation-hook/"
title: "Using the gform_validation Hook - Gravity Forms Documentation"
---

[![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2023/09/logo.svg)](https://docs.gravityforms.com/) [![Gravity Forms Documentation](https://docs.gravityforms.com/wp-content/uploads/2024/08/gf-print_logo.svg)](https://docs.gravityforms.com/)

- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Developer](https://docs.gravityforms.com/category/developers/)
- [Blog](https://www.gravityforms.com/blog/)
- [Changelog](https://docs.gravityforms.com/gravityforms-change-log/)

```

```

Toggle Menu

- [Getting Started](https://docs.gravityforms.com/category/getting-started/)
- [Your Gravity Forms Account](https://docs.gravityforms.com/category/your-gravity-forms-account/)
- [User Guides](https://docs.gravityforms.com/category/user-guides/)
- [Gravity Forms 2.9](https://docs.gravityforms.com/category/gravity-forms-2-9/)
- [Gravity Forms 2.8](https://docs.gravityforms.com/category/gravity-forms-2-8/)
- [Add-Ons](https://docs.gravityforms.com/category/add-ons-gravity-forms/)
- [Developers](https://docs.gravityforms.com/category/developers/)
- [Knowledge Base](https://docs.gravityforms.com/category/knowledge-base/)  - [Accessibility](https://docs.gravityforms.com/category/knowledge-base/accessibility/)
  - [How To](https://docs.gravityforms.com/category/knowledge-base/how-to/)    - [Automatically Block Unwanted Emails Using Code](https://docs.gravityforms.com/automatically-block-unwanted-emails-using-code/ "Automatically Block Unwanted Emails Using Code")
    - [How To Populate Image Choices With WooCommerce Products](https://docs.gravityforms.com/how-to-populate-image-choices-with-woocommerce-products/ "How To Populate Image Choices With WooCommerce Products")
    - [How To Schedule When A Form Is Active](https://docs.gravityforms.com/how-to-schedule-when-a-form-is-active/ "How To Schedule When A Form Is Active")
    - [How To Restrict Forms To Logged In Users](https://docs.gravityforms.com/how-to-restrict-forms-to-logged-in-users/ "How To Restrict Forms To Logged In Users")
    - [Understanding Entry Limits in Gravity Forms](https://docs.gravityforms.com/understanding-entry-limits-in-gravity-forms/ "Understanding Entry Limits in Gravity Forms")
    - [Installing Gravity Plugins and Add-Ons using Composer](https://docs.gravityforms.com/install-gravity-plugins-and-add-ons-via-composer/ "Installing Gravity Plugins and Add-Ons using Composer")
    - [Adding JavaScript Code to the Frontend of Your Site](https://docs.gravityforms.com/adding-javascript-code-to-the-frontend-of-your-site/ "Adding JavaScript Code to the Frontend of Your Site")
    - [Show Values For Choice Based Fields](https://docs.gravityforms.com/show-values-for-choice-based-fields/ "Show Values For Choice Based Fields")
    - [How To Populate A Field With A Default Value](https://docs.gravityforms.com/populate-a-default-value/ "How To Populate A Field With A Default Value")
    - [Resetting Results for Polls, Quizzes and Surveys](https://docs.gravityforms.com/resetting-results/ "Resetting Results for Polls, Quizzes and Surveys")
    - [Adding an inline Submit Button in Gravity Forms 2.5](https://docs.gravityforms.com/adding-an-inline-submit-button-in-gravity-forms-2-5/ "Adding an inline Submit Button in Gravity Forms 2.5")
    - [Creating Columns in the Form Editor](https://docs.gravityforms.com/working-with-columns/ "Creating Columns in the Form Editor")
    - [Adding Row Spans in the Gravity Forms 2.5 Form Editor](https://docs.gravityforms.com/adding-row-spans-in-the-2-5-form-editor/ "Adding Row Spans in the Gravity Forms 2.5 Form Editor")
    - [How to add Gravity Forms Blocks](https://docs.gravityforms.com/how-to-add-gravity-forms-blocks/ "How to add Gravity Forms Blocks")
    - [How to Chain Forms Using Shortcodes](https://docs.gravityforms.com/how-to-chain-forms-using-shortcodes/ "How to Chain Forms Using Shortcodes")
    - [Holding Notifications until after Payment](https://docs.gravityforms.com/holding-notifications-until-after-payment/ "Holding Notifications until after Payment")
    - [Testing For Blank Fields With Conditional Logic](https://docs.gravityforms.com/test-blank-fields-with-conditional-logic/ "Testing For Blank Fields With Conditional Logic")
    - [Adding Images, JavaScript, and HTML To Forms](https://docs.gravityforms.com/adding-images-javascript-and-more-to-forms/ "Adding Images, JavaScript, and HTML To Forms")
    - [Creating Customized Form Notification Emails](https://docs.gravityforms.com/creating-customized-form-notification-emails/ "Creating Customized Form Notification Emails")
    - [Sending Form Submission Notifications To Multiple Recipients](https://docs.gravityforms.com/sending-notifications-multiple-recipients/ "Sending Form Submission Notifications To Multiple Recipients")
    - [Creating Multi-Page Forms](https://docs.gravityforms.com/creating-multi-page-forms/ "Creating Multi-Page Forms")
    - [Increasing Your PHP Max Execution Time](https://docs.gravityforms.com/increasing-php-max-execution-time/ "Increasing Your PHP Max Execution Time")
    - [Increasing Your PHP Memory Limits](https://docs.gravityforms.com/increasing-php-memory-limits/ "Increasing Your PHP Memory Limits")
    - [Changing the Payment Description in the Stripe Add-On](https://docs.gravityforms.com/changing-payment-description-stripe-add-on/ "Changing the Payment Description in the Stripe Add-On")
    - [Disabling Automatic Scrolling On Form Confirmations](https://docs.gravityforms.com/disable-automatic-scroll-form-confirmation/ "Disabling Automatic Scrolling On Form Confirmations")
    - [Displaying a Form Within a Modal/Popup/Lightbox](https://docs.gravityforms.com/displaying-form-within-modalpopuplightbox/ "Displaying a Form Within a Modal/Popup/Lightbox")
    - [Exporting Gravity Forms Entries as a PDF](https://docs.gravityforms.com/exporting-gravity-forms-entries-as-a-pdf/ "Exporting Gravity Forms Entries as a PDF")
    - [Using Confirmation Query Strings to Populate a Form Based on Another Submission](https://docs.gravityforms.com/confirmation-query-string-populate-form/ "Using Confirmation Query Strings to Populate a Form Based on Another Submission")
    - [Setting Up Conditional Payments in Gravity Forms](https://docs.gravityforms.com/setting-up-conditional-payments/ "Setting Up Conditional Payments in Gravity Forms")
    - [Enabling the Gravity Forms Toolbar Menu](https://docs.gravityforms.com/enabling-gravity-forms-toolbar-item/ "Enabling the Gravity Forms Toolbar Menu")
    - [How To Change Your Language In Gravity Forms](https://docs.gravityforms.com/how-to-change-your-language-in-gravity-forms/ "How To Change Your Language In Gravity Forms")
    - [Using the Gravity Forms "gform\_validation" Hook](https://docs.gravityforms.com/using-gform-validation-hook/ "Using the Gravity Forms \"gform_validation\" Hook")
    - [Dynamically Populating a Field](https://docs.gravityforms.com/using-dynamic-population/ "Dynamically Populating a Field")
    - [How To Install Gravity Forms](https://docs.gravityforms.com/how-to-install-gravity-forms/ "How To Install Gravity Forms")
    - [Gravity Forms Pricing: Adding Tax](https://docs.gravityforms.com/gravity-forms-pricing-adding-tax/ "Gravity Forms Pricing: Adding Tax")
    - [Dynamically Populating the Post Author](https://docs.gravityforms.com/dynamically-populating-the-post-author/ "Dynamically Populating the Post Author")
    - [Dynamically Populating Drop Down, Radio Buttons or Multi-Select Fields](https://docs.gravityforms.com/dynamically-populating-drop-down-or-radio-buttons-fields/ "Dynamically Populating Drop Down, Radio Buttons or Multi-Select Fields")
    - [Making a Field Read-Only](https://docs.gravityforms.com/making-a-field-read-only/ "Making a Field Read-Only")
    - [Set Tabindex](https://docs.gravityforms.com/set-tabindex/ "Set Tabindex")
    - [Delete Entry Data after Submission](https://docs.gravityforms.com/delete-entry-data-after-submission/ "Delete Entry Data after Submission")
    - [How to Manually Update Gravity Forms](https://docs.gravityforms.com/how-to-manually-update/ "How to Manually Update Gravity Forms")
    - [How to Separate Product Selection and Price When Exporting Entries](https://docs.gravityforms.com/how-to-separate-product-selection-and-price-when-exporting-entries/ "How to Separate Product Selection and Price When Exporting Entries")
    - [Adding Javascript Code to the Admin Side of Your Site](https://docs.gravityforms.com/adding-javascript-code-to-the-admin-side-of-your-site/ "Adding Javascript Code to the Admin Side of Your Site")
    - [How to Change the Gravity Forms License on a Site](https://docs.gravityforms.com/change-gravity-forms-license/ "How to Change the Gravity Forms License on a Site")
    - [How To Manually Update For Older WordPress Editions](https://docs.gravityforms.com/manually-update-for-older-wordpress/ "How To Manually Update For Older WordPress Editions")
    - [Viewing Sales Results](https://docs.gravityforms.com/viewing-sales-results/ "Viewing Sales Results")
    - [Customizing Forms created from the Template Library](https://docs.gravityforms.com/custom-form-template-library/ "Customizing Forms created from the Template Library")
    - [How to determine the Form ID](https://docs.gravityforms.com/how-to-determine-the-form-id/ "How to determine the Form ID")
  - [Licensing](https://docs.gravityforms.com/category/knowledge-base/licensing/)
  - [Privacy, Security and Compliance](https://docs.gravityforms.com/category/knowledge-base/security/)
  - [Troubleshooting](https://docs.gravityforms.com/category/knowledge-base/troubleshooting/)
  - [Accepting Payments Without SSL](https://docs.gravityforms.com/accepting-payments-without-ssl/ "Accepting Payments Without SSL")
  - [Add-On Support for Background Feed Processing](https://docs.gravityforms.com/support-background-feed/ "Add-On Support for Background Feed Processing")
  - [Campfire Changelog](https://docs.gravityforms.com/campfire-change-log/ "Campfire Changelog")
  - [Can Gravity Forms Do...?](https://docs.gravityforms.com/features/ "Can Gravity Forms Do...?")
  - [Common Form Issues](https://docs.gravityforms.com/common-issues/ "Common Form Issues")
  - [Common Issues With Formatting](https://docs.gravityforms.com/formatting/ "Common Issues With Formatting")
  - [Common Questions About Gravity Forms](https://docs.gravityforms.com/general/ "Common Questions About Gravity Forms")
  - [Conditional Logic for Notifications and Confirmations by Toxicity Score](https://docs.gravityforms.com/conditional-logic-for-notifications-and-confirmations-by-toxicity-score/ "Conditional Logic for Notifications and Confirmations by Toxicity Score")
  - [Create Conditional User Defined Products](https://docs.gravityforms.com/create-conditional-user-defined-products/ "Create Conditional User Defined Products")
  - [Creating A Custom Background Processor](https://docs.gravityforms.com/creating-a-custom-background-processor/ "Creating A Custom Background Processor")
  - [Credit Card Processing Error Messages](https://docs.gravityforms.com/credit-card-processing-error-messages/ "Credit Card Processing Error Messages")
  - [Delete Entry Data After Post Submission](https://docs.gravityforms.com/delete-entry-data-after-post-submission/ "Delete Entry Data After Post Submission")
  - [Deprecated Gravity Forms Database Tables](https://docs.gravityforms.com/deprecated-database-tables/ "Deprecated Gravity Forms Database Tables")
  - [Deprecation of the Gravity Forms Credit Card Field](https://docs.gravityforms.com/deprecation-of-the-gravity-forms-credit-card-field/ "Deprecation of the Gravity Forms Credit Card Field")
  - [Deprecation of the Rocketgenius Namespace for Gravity Forms 2.5](https://docs.gravityforms.com/deprecation-of-the-rocketgenius-namespace-for-gravity-forms-2-5-beta-3/ "Deprecation of the Rocketgenius Namespace for Gravity Forms 2.5")
  - [Does Gravity Forms Support ....](https://docs.gravityforms.com/does-gravity-forms-support/ "Does Gravity Forms Support ....")
  - [Does Gravity Forms Support HHVM?](https://docs.gravityforms.com/does-gravity-forms-support-hhvm/ "Does Gravity Forms Support HHVM?")
  - [Duplicate Submissions And No Duplicates](https://docs.gravityforms.com/duplicate-submissions/ "Duplicate Submissions And No Duplicates")
  - [Enhancements to the Spam Honeypot](https://docs.gravityforms.com/spam-honeypot-enhancements/ "Enhancements to the Spam Honeypot")
  - [Error ‘Unexpected T\_STRING’ when installing Gravity Forms](https://docs.gravityforms.com/unexpected-t-string-php-error/ "Error ‘Unexpected T_STRING’ when installing Gravity Forms")
  - [FAQ about additional data collection](https://docs.gravityforms.com/about-additional-data-collection/ "FAQ about additional data collection")
  - [FAQ About Gravity Forms Language Translation Files](https://docs.gravityforms.com/faq-about-gravity-forms-language-translation-files/ "FAQ About Gravity Forms Language Translation Files")
  - [FAQ on Cache and Script Optimizer Issues](https://docs.gravityforms.com/faq-on-cache-and-script-optimizer-issues/ "FAQ on Cache and Script Optimizer Issues")
  - [Form Switcher in Gravity Forms 2.5](https://docs.gravityforms.com/help-form-switcher/ "Form Switcher in Gravity Forms 2.5")
  - [FreshBooks (Classic) Add-On Changelog](https://docs.gravityforms.com/freshbooks-change-log/ "FreshBooks (Classic) Add-On Changelog")
  - [Gravity Forms 2.2: Changes to Entry IP Detection](https://docs.gravityforms.com/changes-entry-ip-detection/ "Gravity Forms 2.2: Changes to Entry IP Detection")
  - [Gravity Forms 2.5 Key Features](https://docs.gravityforms.com/gravity-forms-2-5-beta-features-and-changes/ "Gravity Forms 2.5 Key Features")
  - [Gravity Forms 2.5 Known Limitations](https://docs.gravityforms.com/gravity-forms-2-5-known-limitations/ "Gravity Forms 2.5 Known Limitations")
  - [Gravity Forms 2.5 Release FAQ](https://docs.gravityforms.com/gravity-forms-2-5-faq/ "Gravity Forms 2.5 Release FAQ")
  - [Gravity Forms 2.7 Key Features](https://docs.gravityforms.com/gravity-forms-2-7-beta-features/ "Gravity Forms 2.7 Key Features")
  - [Gravity Forms and PHP 8.0 Compatibility](https://docs.gravityforms.com/gravity-forms-and-php-8-0-compatibility/ "Gravity Forms and PHP 8.0 Compatibility")
  - [Gravity Forms and PHP 8.1 Compatibility](https://docs.gravityforms.com/gravity-forms-and-php-8-1-compatibility/ "Gravity Forms and PHP 8.1 Compatibility")
  - [Gravity Forms and PHP 8.2 Compatibility](https://docs.gravityforms.com/gravity-forms-and-php-8-2-compatibility/ "Gravity Forms and PHP 8.2 Compatibility")
  - [Gravity Forms and PHP 8.3 Compatibility](https://docs.gravityforms.com/gravity-forms-and-php-8-3-compatibility/ "Gravity Forms and PHP 8.3 Compatibility")
  - [Gravity Forms and PHP 8.4 Compatibility](https://docs.gravityforms.com/gravity-forms-and-php-8-4-compatibility/ "Gravity Forms and PHP 8.4 Compatibility")
  - [Gravity Forms and PHP 8.5 Compatibility](https://docs.gravityforms.com/php-8-5-compatibility/ "Gravity Forms and PHP 8.5 Compatibility")
  - [Gravity Forms Changelog](https://docs.gravityforms.com/gravityforms-change-log/ "Gravity Forms Changelog")
  - [Gravity Forms Custom Development](https://docs.gravityforms.com/custom-development/ "Gravity Forms Custom Development")
  - [Gravity Forms Entry Payment Statuses](https://docs.gravityforms.com/gravity-forms-entry-payment-statuses/ "Gravity Forms Entry Payment Statuses")
  - [Gravity Forms Gutenberg Block](https://docs.gravityforms.com/gravity-forms-gutenberg-block/ "Gravity Forms Gutenberg Block")
  - [Gravity Forms System Requirements](https://docs.gravityforms.com/gravity-forms-system-requirements/ "Gravity Forms System Requirements")
  - [Gravity Forms Version Numbering](https://docs.gravityforms.com/version-numbering/ "Gravity Forms Version Numbering")
  - [Guide to Gravity Forms 2.5 for Theme Developers](https://docs.gravityforms.com/guide-to-gravity-forms-2-5-for-theme-developers/ "Guide to Gravity Forms 2.5 for Theme Developers")
  - [Gutenberg Block Changelog](https://docs.gravityforms.com/gutenberg-block-change-log/ "Gutenberg Block Changelog")
  - [Handling Character Encoding Issues in Form Submissions](https://docs.gravityforms.com/handling-character-encoding-issues-in-form-submissions/ "Handling Character Encoding Issues in Form Submissions")
  - [Highrise (Deprecated) Changelog](https://docs.gravityforms.com/highrise-change-log/ "Highrise (Deprecated) Changelog")
  - [How to Delete a Field in a Form without Losing Existing Data](https://docs.gravityforms.com/how-to-delete-a-field-in-a-form-without-losing-existing-data/ "How to Delete a Field in a Form without Losing Existing Data")
  - [How To Load Forms In Hidden UIs](https://docs.gravityforms.com/how-to-load-forms-in-hidden-uis/ "How To Load Forms In Hidden UIs")
  - [How To Remove Required Field And Indicates Required Fields legends](https://docs.gravityforms.com/how-to-remove-required-field-and-indicates-required-fields-legends/ "How To Remove Required Field And Indicates Required Fields legends")
  - [How To Restrict Download URLs To The Entry Creator](https://docs.gravityforms.com/how-to-restrict-download-urls-to-the-entry-creator/ "How To Restrict Download URLs To The Entry Creator")
  - [How to Trigger Gravity Forms Scripts in Elementor Popups](https://docs.gravityforms.com/how-to-trigger-gravity-forms-scripts-in-elementor-popups/ "How to Trigger Gravity Forms Scripts in Elementor Popups")
  - [How to Use Post Payment Actions](https://docs.gravityforms.com/how-to-use-post-payment-actions/ "How to Use Post Payment Actions")
  - [Incompatibilities with the third-party HubSpot Plugin for WordPress](https://docs.gravityforms.com/using-gravity-forms-with-the-hubspot-plugin-what-you-need-to-know/ "Incompatibilities with the third-party HubSpot Plugin for WordPress")
  - [Legacy (Personal, Business, Developer) License FAQ](https://docs.gravityforms.com/legacy-license-faq/ "Legacy (Personal, Business, Developer) License FAQ")
  - [My Download Is Not a Zip File?](https://docs.gravityforms.com/my-download-is-not-a-zipfile/ "My Download Is Not a Zip File?")
  - [Not Receiving Notifications](https://docs.gravityforms.com/not-receiving-notifications/ "Not Receiving Notifications")
  - [Obtaining Prior Versions of Gravity Forms](https://docs.gravityforms.com/obtaining-prior-versions-of-gravity-forms/ "Obtaining Prior Versions of Gravity Forms")
  - [PayPal Checkout Beta 2.0 Features and Changes](https://docs.gravityforms.com/paypal-checkout-2-0-beta-features-changes/ "PayPal Checkout Beta 2.0 Features and Changes")
  - [PayPal Service Upgrade](https://docs.gravityforms.com/paypal-service-upgrade/ "PayPal Service Upgrade")
  - [Permitted File Types for Uploading](https://docs.gravityforms.com/permitted-file-types-for-uploading/ "Permitted File Types for Uploading")
  - [Promotion and Sponsorship](https://docs.gravityforms.com/promotion/ "Promotion and Sponsorship")
  - [Rules for Calculations](https://docs.gravityforms.com/rules-for-calculations/ "Rules for Calculations")
  - [Security Warning: merge tags as HTML attribute values](https://docs.gravityforms.com/security-warning-merge-tags-html-attribute-values/ "Security Warning: merge tags as HTML attribute values")
  - [Setting Up Conditional Feeds for Offline Payments](https://docs.gravityforms.com/setting-up-conditional-feeds-for-offline-payments/ "Setting Up Conditional Feeds for Offline Payments")
  - [Setting Up Conditional Payments for One Time and Recurring Transactions](https://docs.gravityforms.com/setting-up-conditional-payments-for-one-time-and-recurring-transactions/ "Setting Up Conditional Payments for One Time and Recurring Transactions")
  - [Taking a Screenshot of Your Feed Settings](https://docs.gravityforms.com/taking-a-screenshot-of-your-feed-settings/ "Taking a Screenshot of Your Feed Settings")
  - [Translating Gravity Forms (or an add-on) using Loco Translate](https://docs.gravityforms.com/translating-using-loco-translate/ "Translating Gravity Forms (or an add-on) using Loco Translate")
  - [Translating Gravity Forms (or an add-on) using Poedit](https://docs.gravityforms.com/translating-using-poedit/ "Translating Gravity Forms (or an add-on) using Poedit")
  - [Translating the Datepicker](https://docs.gravityforms.com/translating-the-datepicker/ "Translating the Datepicker")
  - [Upgrade/Add-on Issues](https://docs.gravityforms.com/upgradeadd-on-issues/ "Upgrade/Add-on Issues")
  - [Upgrading to Gravity Forms v2.3](https://docs.gravityforms.com/upgrading-to-gravity-forms-2-3/ "Upgrading to Gravity Forms v2.3")
  - [Using Survey Fields In Conditional Logic](https://docs.gravityforms.com/using-survey-fields-in-conditional-logic/ "Using Survey Fields In Conditional Logic")
  - [Using the Advanced Post Creation Add-On with Advanced Custom Fields](https://docs.gravityforms.com/using-the-advanced-post-creation-add-on-with-advanced-custom-fields/ "Using the Advanced Post Creation Add-On with Advanced Custom Fields")
  - [Where Do I Put This Code?](https://docs.gravityforms.com/where-do-i-put-this-code/ "Where Do I Put This Code?")
  - [Where's that old forum topic?](https://docs.gravityforms.com/wheres-forum-topic/ "Where's that old forum topic?")

# Using the Gravity Forms “gform\_validation” Hook

- [The Premise](https://docs.gravityforms.com/using-gform-validation-hook/#h-the-premise)
- [Getting Started](https://docs.gravityforms.com/using-gform-validation-hook/#h-getting-started)
- [The Validation Result](https://docs.gravityforms.com/using-gform-validation-hook/#h-the-validation-result)
- [Getting the Current Page](https://docs.gravityforms.com/using-gform-validation-hook/#h-getting-the-current-page)
- [Looping Through the Fields](https://docs.gravityforms.com/using-gform-validation-hook/#h-looping-through-the-fields)
- [Find Field by CSS Class](https://docs.gravityforms.com/using-gform-validation-hook/#h-find-field-by-css-class)
- [Getting the Field Page Number](https://docs.gravityforms.com/using-gform-validation-hook/#h-getting-the-field-page-number)
- [Is the Field Hidden?](https://docs.gravityforms.com/using-gform-validation-hook/#h-is-the-field-hidden)
- [Skip Field If...](https://docs.gravityforms.com/using-gform-validation-hook/#h-skip-field-if)
- [Retrieve & Validate the Submitted Value](https://docs.gravityforms.com/using-gform-validation-hook/#h-retrieve-amp-validate-the-submitted-value)
- [Check If the Field Value is Valid](https://docs.gravityforms.com/using-gform-validation-hook/#h-check-if-the-field-value-is-valid)
- [Uh, oh! It Failed Validation!](https://docs.gravityforms.com/using-gform-validation-hook/#h-uh-oh-it-failed-validation)
- [Assign the Modified Form Back to the Validation Result](https://docs.gravityforms.com/using-gform-validation-hook/#h-assign-the-modified-form-back-to-the-validation-result)
- [Return the Validation Result](https://docs.gravityforms.com/using-gform-validation-hook/#h-return-the-validation-result)
- [Grab the Code](https://docs.gravityforms.com/using-gform-validation-hook/#h-grab-the-code)

## The Premise

Let’s imagine that we’re building some sort of car related website. On this fictional website we have a Gravity Form that allows you to register cars you own and part of that registration is a field for the VIN number of the vehicle. So how do we ensure that the user is entering a valid VIN number? Yup. The [gform\_validation](https://docs.gravityforms.com/gform_validation) hook.

## Getting Started

The first step is to tie our custom validation function to the [gform\_validation](https://docs.gravityforms.com/gform_validation) filter.

|     |     |
| --- | --- |
| 1<br>2 | `// 1 - Tie our validation function to the 'gform_validation' hook`<br>`add_filter(``'gform_validation_9'``,``'validate_vin'``);` |

This line is just us telling Gravity Forms that whenever it validates the form submission, we’d like it to also run our custom **validate\_vin** function as well. In addition, since this is a filter and not an action ( [read more about the difference here](http://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)) we’re also telling Gravity Forms that we’d like to modify the validation result and continuing processing the rest of the validation with those modifications preserved.

- **Note:** You’ll notice we’ve appended a ‘9’ to the end of the ‘gform\_validation’ filter name. This means that we only want to trigger our custom validation function from form ID 9. No sense in running an extra function on every form submission if we only need it on one specific form. Just replace the 9 with the ID of the form you’d like to target.\*

## The Validation Result

When Gravity Forms calls our custom function it will pass an array containing two important items for form validation.

1. **$validation\_result\[‘is\_valid’\]** This property will be either true or false and indicates whether or not the form has failed any of Gravity Forms’ default validation checks. You’ll see this again on step 13.
2. **$validation\_result\[‘form’\]** This property contains the [Form Object](https://docs.gravityforms.com/form-object) which itself contains an array of all the fields created for this form.

|     |     |
| --- | --- |
| 1<br>2 | `// 2 - Get the form object from the validation result`<br>`$form``=``$validation_result``[``'form'``];` |

With that said, all we’re doing here is setting the form object from the validation result to a local variable that will be easier to read and use.

## Getting the Current Page

|     |     |
| --- | --- |
| 1<br>2 | `// 3 - Get the current page being validated`<br>`$current_page``= rgpost(``'gform_source_page_number_'``.``$form``[``'id'``] ) ? rgpost(``'gform_source_page_number_'``.``$form``[``'id'``] ) : 1;` |

_If you aren’t using multi-page forms, this step doesn’t apply to you but it wouldn’t hurt to know how it works._

When you submit a page on a multi-page form, Gravity Forms will populate some additional info in the $\_POST global ( [read more here if you’re unfamiliar with the $\_POST](http://www.w3schools.com/php/php_post.asp)). One of those helpful bits of information is the source page number (aka the current page you are validating). We’ll use the rgpost function to retrieve the source page number from the $\_POST.

So why is this important? Because if the field we want to validate is on page 2 of our form and the user just submitted page 1, that field will be blank and will fail the validation for the entire form preventing the user form progressing to the next page.

## Looping Through the Fields

|     |     |
| --- | --- |
| 1<br>2 | `// 4 - Loop through the form fields`<br>`foreach``(``$form``[``'fields'``]``as``&``$field``) {` |

As mentioned earlier, the [Form Object](https://docs.gravityforms.com/form-object) contains an array of fields created for that form. Using a loop we can go through each field one by one and run a series of checks and conditions to determine if it is a field that should be validated for a VIN number.

- **Note:** You’ll see **continue** in a couple places in the code within the loop. This means that we want to skip the rest of the loop for whatever field we are on and move on to the next field.\*

## Find Field by CSS Class

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4 | `// 5 - If the field does not have our designated CSS class, skip it`<br>`if``(``strpos``(``$field``->cssClass,``'validate-vin'``) === false ) {`<br>```continue``;`<br>`}` |

In this example, we’re looking for a specific string based on the field’s CSS class property. We could change this to check by field ID or any other field property, but I’ve found that the CSS class is a user friendly way of quickly adding custom validation functionality to most fields. Basing this check on field ID would have the drawback of requiring a code change if you ever needed to remove the field and apply the custom validation to a different field. With the CSS class technique, you can simply add the designated CSS class to the new field from the Gravity Form editor. The designated class we’re using here is _validate-vin_.

If _validate-vin_ CSS class is not present on the current field, we will skip it and move on to the next field. If the field does have the _validate-vin_ class, we know that this is a field we’ve marked for VIN validation and we’ll proceed to the next step.

## Getting the Field Page Number

|     |     |
| --- | --- |
| 1<br>2 | `// 6 - Get the field's page number`<br>`$field_page``=``$field``->pageNumber;` |

_This step is also multi-page form specific._

When using the multi-page functionality, each field has a _pageNumber_ property which stores the page number on which that field is displayed. We’ll be using this variable on step 8.

## Is the Field Hidden?

|     |     |
| --- | --- |
| 1<br>2 | `// 7 - Check if the field is hidden by GF conditional logic`<br>`$is_hidden``= RGFormsModel::is_field_hidden(``$form``,``$field``,``array``() );` |

It’s important to know whether or not the field we are validating is hidden by Gravity Form’s conditional logic. Hidden fields should not be validated because they are not part of the form submission.

Gravity Forms provides a handy public function that you can use to determine if a field is hidden: **RGFormsModel::is\_field\_hidden()**. To use this function all you need is a [Form Object](https://docs.gravityforms.com/form-object/) and a field to check.

## Skip Field If…

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4 | `// 8 - If the field is not on the current page OR if the field is hidden, skip it`<br>`if``(``$field_page``!=``$current_page``||``$is_hidden``) {`<br>```continue``;`<br>`}` |

The previous two steps we gathered some information about the current field. Now we’re putting that information to use. If the field is not on the current page **OR** if the field is hidden, we don’t want to run our VIN validation function on it. Instead, we’ll continue on to the next field in the loop.

## Retrieve & Validate the Submitted Value

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5 | `// 9 - Get the submitted value from the $_POST`<br>`$field_value``= rgpost(``"input_{$field['id']}"``);`<br>`// 10 - Make a call to your validation function to validate the value`<br>`$is_valid``= is_vin(``$field_value``);` |

So… if the field gets to this point we know that it:

1. has the designated validation CSS class
2. is on the current page being validated
3. and is not hidden

We’re now ready to retrieve and validate the submitted value for this field. Let’s retrieve the value of of the field using the **rgpost** function (which is a clean way of retrieving values from the $\_POST). The string we’re passing to this function would look something like “input\_48” if we weren’t dynamically populating the field ID using the current field’s ID property.

- **Note:** This method for retrieving the field value will work for most fields. Known exceptions are checkboxes and fields with multiple inputs. We will cover those later as an addition to this walk-through.\*

Next, we create an **$is\_valid** variable and assign it the result of our VIN validation function. We pass **is\_vin()** our field value and it returns a true/false value indicating whether the submitted value is a valid VIN number.

## Check If the Field Value is Valid

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4 | `// 11 - If the field is valid we don't need to do anything, skip it`<br>`if``(``$is_valid``) {`<br>```continue``;`<br>`}` |

If the submitted value is valid, then we don’t need to update any of the validation properties for this field. It’s good to go!

If you are only validating one field for the VIN number (which is likely the case) you could technically stop here and return the unmodified validation result; however, for the sake of explanation and making this code sample as useful as possible, let’s assume that you’re validating multiple fields. That means we’d skip the rest of the code for this field and start back with the next field at the very top of the loop.

## Uh, oh! It Failed Validation!

Ok, so we made it all the back to the **is\_vin()** validation function on the next VIN field… but this one failed validation. What do we do now?

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6 | `// 12 - The field failed validation, so first we'll need to fail the validation for the entire form`<br>`$validation_result``[``'is_valid'``] = false;`<br>`// 13 - Next we'll mark the specific field that failed and add a custom validation message`<br>`$field``->failed_validation = true;`<br>`$field``->validation_message =``'The VIN number you have entered is not valid.'``;` |

Well, first since we know that there is a validation error on the form, let’s make sure we mark the **$validation\_result** _is\_valid_ property as false. When we return our modified validation result, this property is how Gravity Forms knows to look for validation errors on the individual fields.

Next, we’re going to mark the **$field** _failed\_validation_ property as **true**, because, well… it did! In addition, we’ll want to provide a custom validation message so the user filling out the form will know what the problem is.

## Assign the Modified Form Back to the Validation Result

|     |     |
| --- | --- |
| 1<br>2 | `// 14 - Assign our modified $form object back to the validation result`<br>`$validation_result``[``'form'``] =``$form``;` |

This step is super important! We’ve updated a field of this form with validation failure details but if we don’t assign the [Form Object](https://docs.gravityforms.com/form-object) back to the form property of the **$validation\_result**, Gravity Forms won’t know which field had the error.

## Return the Validation Result

|     |     |
| --- | --- |
| 1<br>2 | `// 15 - Return the validation result`<br>`return``$validation_result``;` |

And finally, we return the modified (or perhaps unmodified if no validation errors were found) **$validation\_result** back to Gravity Forms. Assuming that a field did fail validation, Gravity Forms will now prevent the form from submitting successfully and mark each field that has a validation error with its corresponding validation message.

## Grab the Code

|     |     |
| --- | --- |
| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60 | `add_filter(``'gform_validation_9'``,``'validate_vin'``);`<br>`function``validate_vin(``$validation_result``) {`<br>```// 2 - Get the form object from the validation result`<br>```$form``=``$validation_result``[``'form'``];`<br>```// 3 - Get the current page being validated`<br>```$current_page``= rgpost(``'gform_source_page_number_'``.``$form``[``'id'``] ) ? rgpost(``'gform_source_page_number_'``.``$form``[``'id'``] ) : 1;`<br>```// 4 - Loop through the form fields`<br>```foreach``(``$form``[``'fields'``]``as``&``$field``) {`<br>```// 5 - If the field does not have our designated CSS class, skip it`<br>```if``(``strpos``(``$field``->cssClass,``'validate-vin'``) === false ) {`<br>```continue``;`<br>```}`<br>```// 6 - Get the field's page number`<br>```$field_page``=``$field``->pageNumber;`<br>```// 7 - Check if the field is hidden by GF conditional logic`<br>```$is_hidden``= RGFormsModel::is_field_hidden(``$form``,``$field``,``array``() );`<br>```// 8 - If the field is not on the current page OR if the field is hidden, skip it`<br>```if``(``$field_page``!=``$current_page``||``$is_hidden``) {`<br>```continue``;`<br>```}`<br>```// 9 - Get the submitted value from the $_POST`<br>```$field_value``= rgpost(``"input_{$field['id']}"``);`<br>```// 10 - Make a call to your validation function to validate the value`<br>```$is_valid``= is_vin(``$field_value``);`<br>```// 11 - If the field is valid we don't need to do anything, skip it`<br>```if``(``$is_valid``) {`<br>```continue``;`<br>```}`<br>```// 12 - The field failed validation, so first we'll need to fail the validation for the entire form`<br>```$validation_result``[``'is_valid'``] = false;`<br>```// 13 - Next we'll mark the specific field that failed and add a custom validation message`<br>```$field``->failed_validation = true;`<br>```$field``->validation_message =``'The VIN number you have entered is not valid.'``;`<br>```}`<br>```// 14 - Assign our modified $form object back to the validation result`<br>```$validation_result``[``'form'``] =``$form``;`<br>```// 15 - Return the validation result`<br>```return``$validation_result``;`<br>`}`<br>`// Dummy is_vin function for testing`<br>`function``is_vin(``$vin``) {`<br>```// For testing purposes, we'll return true if the VIN is exactly 17 characters long`<br>```// This is just an example and not a real VIN validation`<br>```return``strlen``(``$vin``) === 17;`<br>`}` |

- Name


This field is for validation purposes and should be left unchanged.

- Was this article helpful?

- How we can improve it?

- Please [open a support ticket](https://www.gravityforms.com/open-support-ticket/) if you need technical support or want to report a bug. Product feedback, feature and integration requests, and other functionality ideas can be submitted on our [Product Roadmap page](https://www.gravityforms.com/gravity-forms-roadmap/?c=submit-idea).


Δ

Last modified: October 7, 2024

© Copyright 2008 - 2025 Rocketgenius, Inc

[Return to Gravity Forms](https://www.gravityforms.com/)

Notifications

[Algolia](https://docs.gravityforms.com/using-gform-validation-hook/# "Algolia")

![](https://docs.gravityforms.com/wp-content/plugins/wpfront-scroll-top/includes/assets/icons/1.png)